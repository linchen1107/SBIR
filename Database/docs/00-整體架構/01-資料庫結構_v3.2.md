# SBIR è£å‚™è³‡æ–™åº«ä¸­è‹±æ–‡å°ç…§è¡¨ (V3.2)

## ğŸ“Š è³‡æ–™åº«è³‡è¨Š

- **è³‡æ–™åº«åç¨±**: sbir_equipment_db_v3
- **ç‰ˆæœ¬**: V3.2
- **ç”¨é€”**: æµ·è»è£å‚™ç®¡ç†ç³»çµ± + Web æ‡‰ç”¨æ•´åˆ + NSN ç”³ç·¨æœå°‹ç³»çµ±
- **ç·¨ç¢¼**: UTF8
- **å»ºç«‹æ—¥æœŸ**: 2025-11-25
- **æœ€å¾Œæ›´æ–°**: 2025-12-09
- **æ¶æ§‹ç‰¹é»**:
  - Item è‡ªæˆ‘é—œè¯ BOM çµæ§‹
  - UUID ä¸»éµ
  - æ“´å±•è¡¨è¨­è¨ˆ
  - **é›™ Schema æ¶æ§‹**:
    - `web_app`: è£å‚™ç®¡ç†ç³»çµ± + Web æ‡‰ç”¨ï¼ˆ19 å€‹è¡¨æ ¼ï¼ŒåŸ public schemaï¼‰
    - `public`: æœå°‹ç³»çµ±ï¼ˆ15 å€‹è¡¨æ ¼ + 5 å€‹è¦–åœ–ï¼‰
  - æ•´åˆ Web æ‡‰ç”¨ä½¿ç”¨è€…èˆ‡ç”³ç·¨å–®ç®¡ç†ç³»çµ±
  - çµ±ä¸€æ™‚é–“æˆ³å‘½åï¼ˆdate_created/date_updatedï¼‰
  - EMU3000 ç¶­ä¿®ç‰©æ–™åŒ¯å…¥é‚è¼¯
  - NSN ç”³ç·¨æœå°‹ç³»çµ±å®Œæ•´æ•´åˆ
- **ç¸½è¡¨æ•¸**: 34 å€‹è³‡æ–™è¡¨ï¼ˆweb_app: 19 + public: 15ï¼‰+ 5 å€‹è¦–åœ–

---

## ğŸ“‹ æ¬„ä½å°ç…§èªªæ˜åœ–ä¾‹

- ğŸ”‘ = ä¸»éµ (Primary Key)
- ğŸ”— = å¤–éµ (Foreign Key)
- â­ = å¿…å¡«æ¬„ä½ (Required)
- ğŸ“ = é¸å¡«æ¬„ä½ (Optional)
- ğŸ”„ = è‡ªå‹•ç”¢ç”Ÿ (Auto Generated)

---

## ğŸ“‘ ç›®éŒ„

- [è³‡æ–™è¡¨ç¸½è¦½](#è³‡æ–™è¡¨ç¸½è¦½)
- [V3.2 è®Šæ›´èªªæ˜](#v32-è®Šæ›´èªªæ˜)
- [V3.1 æ•´åˆè®Šæ›´èªªæ˜](#v31-æ•´åˆè®Šæ›´èªªæ˜)
- [web_app Schema - è£å‚™ç®¡ç†è¡¨ï¼ˆ13å€‹ï¼‰](#web_app-schema---è£å‚™ç®¡ç†è¡¨13å€‹)
  - [Supplier - å» å•†ä¸»æª”](#1-supplier-å» å•†ä¸»æª”)
  - [Item - å“é …ä¸»æª”](#2-item-å“é …ä¸»æª”)
  - [Item_Equipment_Ext - è£å‚™æ“´å±•è¡¨](#3-item_equipment_ext-è£å‚™æ“´å±•è¡¨)
  - [Item_Material_Ext - æ–™ä»¶æ“´å±•è¡¨](#4-item_material_ext-æ–™ä»¶æ“´å±•è¡¨)
  - [BOM - BOMä¸»è¡¨](#5-bom-bomä¸»è¡¨)
  - [BOM_LINE - BOMæ˜ç´°è¡Œ](#6-bom_line-bomæ˜ç´°è¡Œ)
  - [MRC - å“é …è¦æ ¼è¡¨](#7-mrc-å“é …è¦æ ¼è¡¨)
  - [item_number_xref - é›¶ä»¶è™Ÿç¢¼é—œè¯æª”](#8-item_number_xref-é›¶ä»¶è™Ÿç¢¼é—œè¯æª”)
  - [TechnicalDocument - æŠ€è¡“æ–‡ä»¶æª”](#9-technicaldocument-æŠ€è¡“æ–‡ä»¶æª”)
  - [Item_Document_xref - å“é …æ–‡ä»¶é—œè¯æª”](#10-item_document_xref-å“é …æ–‡ä»¶é—œè¯æª”)
  - [SupplierCodeApplication - å» å•†ä»£è™Ÿç”³è«‹è¡¨](#11-suppliercodeapplication-å» å•†ä»£è™Ÿç”³è«‹è¡¨)
  - [CIDApplication - CIDç”³è«‹å–®](#12-cidapplication-cidç”³è«‹å–®)
  - [item_emu3000_maintenance_ext - EMU3000ç¶­ä¿®ç‰©æ–™æ“´å±•è¡¨](#13-item_emu3000_maintenance_ext-emu3000ç¶­ä¿®ç‰©æ–™æ“´å±•è¡¨)
- [web_app Schema - Web æ‡‰ç”¨è¡¨ï¼ˆ6å€‹ï¼‰](#web_app-schema---web-æ‡‰ç”¨è¡¨6å€‹)
  - [User - ä½¿ç”¨è€…ç®¡ç†](#14-user-ä½¿ç”¨è€…ç®¡ç†)
  - [Application - ç”³ç·¨å–®ä¸»è¡¨](#15-application-ç”³ç·¨å–®ä¸»è¡¨)
  - [ApplicationAttachment - é™„ä»¶ç®¡ç†](#16-applicationattachment-é™„ä»¶ç®¡ç†)
  - [UserSession - å·¥ä½œéšæ®µç®¡ç†](#17-usersession-å·¥ä½œéšæ®µç®¡ç†)
  - [ApplicationLog - æ‡‰ç”¨ç¨‹å¼æ—¥èªŒ](#18-applicationlog-æ‡‰ç”¨ç¨‹å¼æ—¥èªŒ)
  - [AuditLog - ç¨½æ ¸æ—¥èªŒ](#19-auditlog-ç¨½æ ¸æ—¥èªŒ)
- [public Schema - NSN æœå°‹ç³»çµ±ï¼ˆ15å€‹è¡¨ + 5å€‹è¦–åœ–ï¼‰](#public-schema---nsn-æœå°‹ç³»çµ±15å€‹è¡¨--5å€‹è¦–åœ–)
- [è³‡æ–™è¡¨é—œè¯åœ–](#è³‡æ–™è¡¨é—œè¯åœ–)
- [æ™‚é–“æˆ³å‘½åç­–ç•¥](#æ™‚é–“æˆ³å‘½åç­–ç•¥)
- [EMU3000 è³‡æ–™åŒ¯å…¥è¦å‰‡](#emu3000-è³‡æ–™åŒ¯å…¥è¦å‰‡)

---

## è³‡æ–™è¡¨ç¸½è¦½

### web_app Schemaï¼ˆ19 å€‹è¡¨æ ¼ï¼‰

| ç·¨è™Ÿ | è‹±æ–‡è¡¨å | ä¸­æ–‡åç¨± | ä¸»éµé¡å‹ | æ™‚é–“æˆ³å‘½å | ç”¨é€” |
|------|---------|---------|---------|-----------|------|
| **è£å‚™ç®¡ç†è¡¨ï¼ˆ13å€‹ï¼‰** | | | | | |
| 1 | supplier | å» å•†ä¸»æª” | SERIAL | date_created | ä¾›æ‡‰å•†/è£½é€ å•†åŸºæœ¬è³‡æ–™ |
| 2 | item | å“é …ä¸»æª” â­ | UUID | date_created | çµ±ä¸€å“é …è³‡æ–™ï¼ˆæ ¸å¿ƒè¡¨ï¼‰ |
| 3 | item_equipment_ext | è£å‚™æ“´å±•è¡¨ | UUID (FK) | date_created | è£å‚™é¡å‹å°ˆç”¨æ¬„ä½ |
| 4 | item_material_ext | æ–™ä»¶æ“´å±•è¡¨ | UUID (FK) | date_created | æ–™ä»¶é¡å‹å°ˆç”¨æ¬„ä½ |
| 5 | bom | BOMä¸»è¡¨ | UUID | date_created | BOMç‰ˆæœ¬æ§åˆ¶ |
| 6 | bom_line | BOMæ˜ç´°è¡Œ â­ | UUID | date_created | itemè‡ªæˆ‘é—œè¯ï¼ˆå…ƒä»¶æ¸…å–®ï¼‰ |
| 7 | mrc | å“é …è¦æ ¼è¡¨ | UUID | date_created | å“é …è¦æ ¼è³‡æ–™ |
| 8 | item_number_xref | é›¶ä»¶è™Ÿç¢¼é—œè¯æª” | SERIAL | date_created | å“é …-é›¶ä»¶è™Ÿ-å» å•†å¤šå°å¤šé—œè¯ |
| 9 | technicaldocument | æŠ€è¡“æ–‡ä»¶æª” | SERIAL | date_created | æŠ€è¡“æ–‡ä»¶/æ‰‹å†Šä¸»æª” |
| 10 | item_document_xref | å“é …æ–‡ä»¶é—œè¯æª” | è¤‡åˆéµ | date_created | å“é …-æŠ€è¡“æ–‡ä»¶å¤šå°å¤šé—œè¯ |
| 11 | application_suppliercode | å» å•†ä»£è™Ÿç”³è«‹è¡¨ | UUID | date_created | å» å•†ä»£è™Ÿç”³è«‹ |
| 12 | cidapplication | CIDç”³è«‹å–® | UUID | date_created | CIDç”³è«‹ |
| 13 | item_emu3000_maintenance_ext | EMU3000ç¶­ä¿®ç‰©æ–™æ“´å±• | UUID | date_created | EMU3000ç¶­ä¿®ç‰©æ–™å°ˆå±¬ |
| **Web æ‡‰ç”¨è¡¨ï¼ˆ6å€‹ï¼‰** | | | | | |
| 14 | user | ä½¿ç”¨è€…ç®¡ç† | UUID | date_created | ç³»çµ±ä½¿ç”¨è€…å¸³è™Ÿç®¡ç† |
| 15 | application | ç”³ç·¨å–®ä¸»è¡¨ | UUID | date_created | ç”³ç·¨å–®å®Œæ•´è³‡æ–™ |
| 16 | applicationattachment | é™„ä»¶ç®¡ç† | UUID | date_created | ç”³ç·¨å–®é™„ä»¶ï¼ˆBYTEAå„²å­˜ï¼‰ |
| 17 | usersession | å·¥ä½œéšæ®µç®¡ç† | VARCHAR | date_created | ä½¿ç”¨è€…ç™»å…¥Session |
| 18 | applicationlog | æ‡‰ç”¨ç¨‹å¼æ—¥èªŒ | UUID | timestamp | æ‡‰ç”¨ç¨‹å¼é‹è¡Œæ—¥èªŒ |
| 19 | auditlog | ç¨½æ ¸æ—¥èªŒ | UUID | date_created | æ“ä½œå¯©è¨ˆè¿½è¹¤ |

**å°è¨ˆ**: 19 å€‹è³‡æ–™è¡¨ï¼ˆ13 è£å‚™ç®¡ç† + 6 Web æ‡‰ç”¨ï¼‰

---

### public Schemaï¼ˆ15 å€‹è¡¨æ ¼ + 5 å€‹è¦–åœ–ï¼‰

| ç·¨è™Ÿ | è‹±æ–‡è¡¨å | ä¸­æ–‡åç¨± | ä¸»éµé¡å‹ | æ™‚é–“æˆ³å‘½å | ç”¨é€” |
|------|---------|---------|---------|-----------|------|
| **FSG/FSC åˆ†é¡ç³»çµ±ï¼ˆ3å€‹ï¼‰** | | | | | |
| 1 | fsg | FSG è¯é‚¦è£œçµ¦ç¾¤çµ„ | VARCHAR(2) | date_created | è¯é‚¦è£œçµ¦ç¾¤çµ„åˆ†é¡ |
| 2 | fsc | FSC è¯é‚¦è£œçµ¦åˆ†é¡ | VARCHAR(4) | date_created | è¯é‚¦è£œçµ¦åˆ†é¡ä»£ç¢¼ |
| 3 | inc_fsc_xref | INC-FSC å°æ‡‰è¡¨ | è¤‡åˆéµ | date_created | INC èˆ‡ FSC å°æ‡‰é—œä¿‚ |
| **NATO H6 ç³»çµ±ï¼ˆ2å€‹ï¼‰** | | | | | |
| 4 | nato_h6_item_name | NATO H6 ç‰©å“åç¨± | VARCHAR(6) | date_created | NATO H6 æ¨™æº–ç‰©å“åç¨± |
| 5 | nato_h6_inc_xref | H6-INC å°æ‡‰è¡¨ | è¤‡åˆéµ | date_created | H6 èˆ‡ INC å°æ‡‰é—œä¿‚ |
| **INC ç³»çµ±ï¼ˆ2å€‹ï¼‰** | | | | | |
| 6 | inc | INC ç‰©å“åç¨±ä»£ç¢¼ | VARCHAR(5) | date_created | ç‰©å“åç¨±ä»£ç¢¼ä¸»æª” |
| 7 | colloquial_inc_xref | ä¿—èª-INC å°æ‡‰è¡¨ | è¤‡åˆéµ | date_created | ä¿—èªèˆ‡ INC å°æ‡‰ |
| **FIIG ç³»çµ±ï¼ˆ2å€‹ï¼‰** | | | | | |
| 8 | fiig | FIIG è­˜åˆ¥æŒ‡å— | VARCHAR(4) | date_created | è¯é‚¦ç‰©å“è­˜åˆ¥æŒ‡å— |
| 9 | fiig_inc_xref | FIIG-INC å°æ‡‰è¡¨ | è¤‡åˆéµ | date_created | FIIG èˆ‡ INC å°æ‡‰ |
| **MRC ç³»çµ±ï¼ˆ4å€‹ï¼‰** | | | | | |
| 10 | mrc_key_group | MRC ç¾¤çµ„ | VARCHAR(3) | date_created | MRC ç¾¤çµ„åˆ†é¡ |
| 11 | mrc | MRC éœ€æ±‚ä»£ç¢¼ | VARCHAR(5) | date_created | ç‰©æ–™éœ€æ±‚ä»£ç¢¼ä¸»æª” |
| 12 | fiig_inc_mrc_xref | FIIG-INC-MRC å°æ‡‰è¡¨ â­ | SERIAL | date_created | ä¸‰å…ƒå°æ‡‰æ ¸å¿ƒè¡¨ï¼ˆ170è¬ç­†ï¼‰ |
| 13 | mrc_reply_table_xref | MRC-å›æ‡‰è¡¨å°æ‡‰ | è¤‡åˆéµ | date_created | MRC èˆ‡å›æ‡‰è¡¨å°æ‡‰ |
| **å›æ‡‰ç³»çµ±ï¼ˆ1å€‹ï¼‰** | | | | | |
| 14 | reply_table | å›æ‡‰è¡¨ä¸»æª” | SERIAL | date_created | ç”³ç·¨å›æ‡‰é¸é …ï¼ˆ16è¬ç­†ï¼‰ |
| **å…¶ä»–ï¼ˆ1å€‹ï¼‰** | | | | | |
| 15 | mode_code_edit | æ¨¡å¼ç¢¼ç·¨è¼¯æŒ‡å— | VARCHAR(2) | date_created | æ¨¡å¼ç¢¼ç·¨è¼¯è¦å‰‡ |

**å°è¨ˆ**: 15 å€‹è³‡æ–™è¡¨

#### æŸ¥è©¢è¦–åœ–ï¼ˆ5 å€‹ï¼‰

| ç·¨è™Ÿ | è¦–åœ–åç¨± | èªªæ˜ | ç”¨é€” |
|------|---------|------|------|
| 1 | v_h6_inc_mapping | H6â†’INC å®Œæ•´å°æ‡‰ | NATO H6 è½‰ INC æŸ¥è©¢ |
| 2 | v_inc_fiig_mapping | INCâ†’FIIG å®Œæ•´å°æ‡‰ | INC è½‰ FIIG æŸ¥è©¢ |
| 3 | v_fiig_mrc_requirements | FIIGâ†’MRC ç”³ç·¨éœ€æ±‚ | ç”³ç·¨ MRC éœ€æ±‚æŸ¥è©¢ |
| 4 | v_mrc_reply_options | MRC å›æ‡‰é¸é … | MRC å›æ‡‰é¸é …æŸ¥è©¢ |
| 5 | v_application_flow | å®Œæ•´ç”³ç·¨æµç¨‹ | ç«¯åˆ°ç«¯ç”³ç·¨æµç¨‹è¦–åœ– |

---

**ç¸½è¨ˆ**: 34 å€‹è³‡æ–™è¡¨ï¼ˆweb_app: 19 + public: 15ï¼‰+ 5 å€‹è¦–åœ–

---

## V3.2 è®Šæ›´èªªæ˜

### ğŸ”„ ä¸»è¦è®Šæ›´

#### 1. âœ… æ–°å¢ EMU3000 è³‡æ–™åŒ¯å…¥è¦å‰‡

**ç†ç”±**:
- æ”¯æ´ EMU3000 ç¶­ä¿®ç‰©æ–™æ¸…å–®çš„åŒ¯å…¥
- å®šç¾©ç¸½æˆèˆ‡æ¬¡ç¸½æˆçš„è­˜åˆ¥é‚è¼¯
- é€é BOM çµæ§‹å»ºç«‹é—œè¯

**å½±éŸ¿**:
- æ–°å¢æ–‡ä»¶ç« ç¯€ [EMU3000 è³‡æ–™åŒ¯å…¥è¦å‰‡](#emu3000-è³‡æ–™åŒ¯å…¥è¦å‰‡)
- ä¸å½±éŸ¿ç¾æœ‰è³‡æ–™è¡¨çµæ§‹ï¼Œåƒ…å®šç¾©è³‡æ–™å°æ‡‰é‚è¼¯

#### 2. âš¡ Schema æ¶æ§‹é‡æ§‹èˆ‡ NSN ç³»çµ±æ•´åˆ (2025-12-08/09)

**ç†ç”±**:
- ç‚ºäº†æ›´å¥½çš„è³‡æ–™åº«çµ„ç¹”èˆ‡åŠŸèƒ½éš”é›¢
- æ•´åˆå®Œæ•´çš„ NSN ç”³ç·¨æœå°‹ç³»çµ±
- æ”¯æ´å¤šæ¨¡çµ„æ“´å……æ¶æ§‹

**ç¬¬ä¸€éšæ®µï¼šSchema é‡æ§‹ (2025-12-08)**:
- åŸ `public` schema æ›´åç‚º `web_app`ï¼ˆ19 å€‹è£å‚™ç®¡ç†è¡¨ï¼‰
- å»ºç«‹æ–°çš„ `public` schema ç”¨æ–¼ NSN æœå°‹ç³»çµ±
- æ‰€æœ‰è£å‚™ç®¡ç†èˆ‡ Web æ‡‰ç”¨è¡¨æ ¼ç§»è‡³ `web_app` schema

**ç¬¬äºŒéšæ®µï¼šNSN ç³»çµ±æ•´åˆ (2025-12-09)**:
- åœ¨ `public` schema å»ºç«‹ 15 å€‹ NSN æ ¸å¿ƒè¡¨æ ¼
- å»ºç«‹ 5 å€‹æŸ¥è©¢è¦–åœ–ï¼ˆv_h6_inc_mapping ç­‰ï¼‰
- åŒ¯å…¥è¶…é 50 è¬ç­† NSN è³‡æ–™ï¼ˆ306.8 MBï¼‰
- å®Œæˆ FSG/FSCã€NATO H6ã€INCã€FIIGã€MRC ç­‰ç³»çµ±æ•´åˆ

**å½±éŸ¿**:
- è³‡æ–™è¡¨ç¸½æ•¸ï¼š19 â†’ 34 å€‹
- æ–°å¢ public schema å°ˆé–€ç”¨æ–¼ NSN ç”³ç·¨æœå°‹
- web_app schema å°ˆæ³¨æ–¼è£å‚™ç®¡ç†èˆ‡ Web æ‡‰ç”¨
- é›™ schema æ¶æ§‹å¯¦ç¾åŠŸèƒ½åˆ†é›¢èˆ‡å®‰å…¨éš”é›¢


---

## V3.1 æ•´åˆè®Šæ›´èªªæ˜

### ğŸ”„ ä¸»è¦è®Šæ›´

#### 1. âœ… æ•´åˆ Web æ‡‰ç”¨ç³»çµ±ï¼ˆæ–°å¢ 6 å€‹è¡¨ï¼‰

**ç†ç”±**:
- æä¾›å®Œæ•´çš„ä½¿ç”¨è€…ç®¡ç†ç³»çµ±
- è©³ç´°çš„ç”³ç·¨å–®ç®¡ç†ï¼ˆ50+ æ¬„ä½ vs åŸæœ¬ 7 æ¬„ä½ï¼‰
- é™„ä»¶ç®¡ç†ï¼ˆBYTEA å„²å­˜ï¼‰
- å®Œæ•´çš„å¯©è¨ˆè¿½è¹¤

**å½±éŸ¿**:
- æ–°å¢ User è¡¨ï¼ˆä½¿ç”¨è€…ç®¡ç†ï¼‰
- Application è¡¨å–ä»£èˆŠçš„ ApplicationForm
- æ–°å¢ ApplicationAttachmentï¼ˆé™„ä»¶ç®¡ç†ï¼‰
- æ–°å¢ UserSessionï¼ˆå·¥ä½œéšæ®µç®¡ç†ï¼‰
- æ–°å¢ ApplicationLogï¼ˆæ‡‰ç”¨ç¨‹å¼æ—¥èªŒï¼‰
- æ–°å¢ AuditLogï¼ˆç¨½æ ¸æ—¥èªŒï¼‰

#### 2. âœ… çµ±ä¸€æ™‚é–“æˆ³å‘½å

**ç†ç”±**:
- æ‰€æœ‰è¡¨çµ±ä¸€ä½¿ç”¨ date_created/date_updated å‘½å
- ä¿æŒè³‡æ–™åº«å‘½åä¸€è‡´æ€§
- ç°¡åŒ–è§¸ç™¼å™¨å‡½æ•¸é‚è¼¯

**å½±éŸ¿**:
- Web æ‡‰ç”¨è¡¨æ”¹ç”¨ date_created/date_updated
- çµ±ä¸€çš„è§¸ç™¼å™¨å‡½æ•¸
- æ•´å€‹è³‡æ–™åº«ä½¿ç”¨ç›¸åŒçš„æ™‚é–“æˆ³å‘½åè¦ç¯„

#### 3. âœ… Application èˆ‡ Item è¡¨é—œè¯

**ç†ç”±**:
- ç”³ç·¨å–®éœ€è¦é—œè¯åˆ°å…·é«”çš„å“é …
- æ”¯æ´ç”³ç·¨å–®çš„å®Œæ•´ç”Ÿå‘½é€±æœŸç®¡ç†

**å½±éŸ¿**:
- Application è¡¨æ–°å¢ item_uuid æ¬„ä½
- å¤–éµé—œè¯åˆ° Item è¡¨

---

## web_app Schema - è£å‚™ç®¡ç†è¡¨ï¼ˆ13å€‹ï¼‰

> **Schema**: `web_app`  
> **èªªæ˜**: è£å‚™ç®¡ç†æ ¸å¿ƒè¡¨ï¼ŒåŒ…å«å» å•†ã€å“é …ã€BOMã€è¦æ ¼ç­‰è³‡æ–™  
> **åŸ Schema**: `public`ï¼ˆ2025-12-08 é‡æ§‹å‰ï¼‰

### 1. supplierï¼ˆå» å•†ä¸»æª”ï¼‰

**ç”¨é€”**: ç®¡ç†ä¾›æ‡‰å•†/è£½é€ å•†åŸºæœ¬è³‡æ–™
**ä¾†æº**: 19M, 20M

| è‹±æ–‡æ¬„ä½å | ä¸­æ–‡åç¨± | è³‡æ–™é¡å‹ | æ¨™è¨˜ | èªªæ˜ |
|-----------|---------|---------|------|------|
| supplier_id | å» å•†ID | SERIAL | ğŸ”‘ğŸ”„ | è‡ªå‹•ç·¨è™Ÿ |
| supplier_code | å» å•†ä¾†æºä»£è™Ÿ | VARCHAR(20) | UNIQUE | å» å•†ä»£ç¢¼ |
| cage_code | å» å®¶ç™»è¨˜ä»£è™Ÿ | VARCHAR(20) | UNIQUE | CAGE CODE |
| supplier_name_en | å» å®¶è£½é€ å•†ï¼ˆè‹±æ–‡ï¼‰ | VARCHAR(200) | â­ | è‹±æ–‡å» å•†åç¨± |
| supplier_name_zh | å» å•†ä¸­æ–‡åç¨± | VARCHAR(100) | ğŸ“ | ä¸­æ–‡å» å•†åç¨± |
| agent_name | ä»£ç†å•†åç¨± | VARCHAR(255) | ğŸ“ | ä»£ç†å•†åç¨±ï¼ˆè£½é€ å•†å¡« NULLï¼Œä»£ç†å•†å¡«å…¥åç¨±ï¼‰ |
| country_code | åœ‹å®¶ä»£ç¢¼ | VARCHAR(10) | ğŸ“ | åœ‹åˆ¥ä»£ç¢¼ |
| date_created | å»ºç«‹æ™‚é–“ | TIMESTAMP | ğŸ”„ | è¨˜éŒ„å»ºç«‹æ™‚é–“ |
| date_updated | æ›´æ–°æ™‚é–“ | TIMESTAMP | ğŸ”„ | è¨˜éŒ„æ›´æ–°æ™‚é–“ |

**å‚™è¨»**:
- `agent_name`: è‹¥æ­¤ä¾›æ‡‰å•†ç‚ºè£½é€ å•†ï¼Œå‰‡æ­¤æ¬„ä½ç‚º NULLï¼›è‹¥ç‚ºä»£ç†å•†ï¼Œå‰‡å¡«å…¥ä»£ç†å•†åç¨±

---

### 2. itemï¼ˆå“é …ä¸»æª”ï¼‰â­

**ç”¨é€”**: çµ±ä¸€ç®¡ç†æ‰€æœ‰å“é …ï¼ˆæˆå“/åŠæˆå“/åŸç‰©æ–™ï¼‰
**V3.0 è®Šæ›´**: åˆä½µ Equipmentï¼Œä½¿ç”¨ UUID ä¸»éµ

| è‹±æ–‡æ¬„ä½å | ä¸­æ–‡åç¨± | è³‡æ–™é¡å‹ | æ¨™è¨˜ | èªªæ˜ |
|-----------|---------|---------|------|------|
| item_uuid | å“é …UUID | UUID | ğŸ”‘ğŸ”„ | è‡ªå‹•ç”Ÿæˆ UUID |
| item_code | çµ±ä¸€è­˜åˆ¥ç¢¼ | VARCHAR(50) | â­ UNIQUE | CID æˆ– NIIN |
| item_name_zh | ä¸­æ–‡å“å | VARCHAR(100) | â­ | å“é …ä¸­æ–‡åç¨± |
| item_name_en | è‹±æ–‡å“å | VARCHAR(200) | â­ | å“é …è‹±æ–‡åç¨± |
| item_type | å“é …é¡å‹ | VARCHAR(10) | â­ | FG/SEMI/RM |
| uom | åŸºæœ¬è¨ˆé‡å–®ä½ | VARCHAR(10) | ğŸ“ | EA/SET/LOTç­‰ |
| status | ç‹€æ…‹ | VARCHAR(20) | ğŸ“ | Active/Inactive |
| date_created | å»ºç«‹æ™‚é–“ | TIMESTAMP | ğŸ”„ | è¨˜éŒ„å»ºç«‹æ™‚é–“ |
| date_updated | æ›´æ–°æ™‚é–“ | TIMESTAMP | ğŸ”„ | è¨˜éŒ„æ›´æ–°æ™‚é–“ |

**ç´„æŸ**:
- `item_type IN ('FG', 'SEMI', 'RM')`
- `status IN ('Active', 'Inactive')`

**ç´¢å¼•**:
- `idx_item_code` - è­˜åˆ¥ç¢¼ç´¢å¼•
- `idx_item_type` - é¡å‹ç´¢å¼•
- `idx_item_status` - ç‹€æ…‹ç´¢å¼•

---

### 3. item_equipment_extï¼ˆè£å‚™æ“´å±•è¡¨ï¼‰

**ç”¨é€”**: è£å‚™é¡å‹å°ˆç”¨æ¬„ä½ï¼ˆFG é¡å‹ï¼‰
**ä¾†æº**: åŸ Equipment è¡¨

| è‹±æ–‡æ¬„ä½å | ä¸­æ–‡åç¨± | è³‡æ–™é¡å‹ | æ¨™è¨˜ | èªªæ˜ |
|-----------|---------|---------|------|------|
| item_uuid | å“é …UUID | UUID | ğŸ”‘ğŸ”— | å¤–éµé€£çµè‡³ Item |
| equipment_type | è£å‚™å½¢å¼ | VARCHAR(50) | ğŸ“ | è£å‚™å‹è™Ÿ/å‹å¼ |
| ship_type | è‰¦å‹ | VARCHAR(50) | ğŸ“ | é©ç”¨è‰¦å‹ |
| usage_location | è£è¨­åœ°é» | VARCHAR(100) | ğŸ“ | å®‰è£ä½ç½® |
| parent_equipment_zh | ä¸Šå±¤é©ç”¨è£å‚™ä¸­æ–‡åç¨± | VARCHAR(100) | ğŸ“ | çˆ¶è£å‚™ä¸­æ–‡å |
| parent_equipment_en | ä¸Šå±¤é©ç”¨è£å‚™è‹±æ–‡åç¨± | VARCHAR(200) | ğŸ“ | çˆ¶è£å‚™è‹±æ–‡å |
| parent_cid | ä¸Šå±¤CID | VARCHAR(50) | ğŸ“ | çˆ¶è£å‚™è­˜åˆ¥ç¢¼ |
| eswbs_code | æ—ç¾¤çµæ§‹ç¢¼HSC | VARCHAR(20) | ğŸ“ | ESWBSï¼ˆäº”ç¢¼ï¼‰ |
| system_function_name | ç³»çµ±åŠŸèƒ½åç¨± | VARCHAR(200) | ğŸ“ | ç³»çµ±åŠŸèƒ½èªªæ˜ |
| installation_qty | åŒä¸€é¡å‹æ•¸é‡ | INT | ğŸ“ | å–®è‰¦è£ç½®æ•¸é‡ |
| total_installation_qty | å…¨è‰¦è£ç½®æ•¸ | INT | ğŸ“ | å…¨è‰¦ç¸½æ•¸ |
| maintenance_level | è£å‚™ç¶­ä¿®ç­‰ç´šä»£ç¢¼ | VARCHAR(10) | ğŸ“ | ç¶­ä¿®ç­‰ç´š |
| equipment_serial | è£å‚™åºè™Ÿ | VARCHAR(50) | UNIQUE | è£å‚™è­˜åˆ¥ç·¨è™Ÿ |
| date_created | å»ºç«‹æ™‚é–“ | TIMESTAMP | ğŸ”„ | |
| date_updated | æ›´æ–°æ™‚é–“ | TIMESTAMP | ğŸ”„ | |

**å¤–éµé—œè¯**:
- `item_uuid` â†’ `Item.item_uuid` (ON DELETE CASCADE)

---

### 4. item_material_extï¼ˆæ–™ä»¶æ“´å±•è¡¨ï¼‰

**ç”¨é€”**: æ–™ä»¶é¡å‹å°ˆç”¨æ¬„ä½ï¼ˆSEMI/RM é¡å‹ï¼‰
**ä¾†æº**: åŸ Item è¡¨å±¬æ€§æ¬„ä½

| è‹±æ–‡æ¬„ä½å | ä¸­æ–‡åç¨± | è³‡æ–™é¡å‹ | æ¨™è¨˜ | èªªæ˜ |
|-----------|---------|---------|------|------|
| item_uuid | å“é …UUID | UUID | ğŸ”‘ğŸ”— | å¤–éµé€£çµè‡³ Item |
| item_id_last5 | å“é …è­˜åˆ¥ç¢¼(å¾Œäº”ç¢¼) | VARCHAR(5) | ğŸ“ | å¿«é€Ÿè­˜åˆ¥ç”¨ |
| item_name_zh_short | ä¸­æ–‡å“åï¼ˆ9å­—å…§ï¼‰ | VARCHAR(20) | ğŸ“ | ç°¡çŸ­ä¸­æ–‡å |
| nsn | NSN/åœ‹å®¶æ–™è™Ÿ | VARCHAR(20) | UNIQUE | NATO Stock Number |
| category_code | çµ±ä¸€çµ„é¡åˆ¥ | VARCHAR(10) | ğŸ“ | å“é …åˆ†é¡ä»£ç¢¼ |
| item_code | å“åä»£è™Ÿ | VARCHAR(10) | ğŸ“ | INCå“åä»£è™Ÿ |
| fiig | FIIG | VARCHAR(10) | ğŸ“ | è¯é‚¦å“é …è­˜åˆ¥æŒ‡å— |
| weapon_system_code | æ­¦å™¨ç³»çµ±ä»£è™Ÿ | VARCHAR(20) | ğŸ“ | æ‰€å±¬æ­¦å™¨ç³»çµ± |
| accounting_unit_code | æœƒè¨ˆç·¨è™Ÿ | VARCHAR(20) | ğŸ“ | æœƒè¨ˆç§‘ç›®ä»£è™Ÿ |
| issue_unit | æ’¥ç™¼å–®ä½ | VARCHAR(10) | ğŸ“ | EA/SET/LOTç­‰ |
| unit_price | ç¾é‡‘å–®åƒ¹ | DECIMAL(10,2) | ğŸ“ | å–®ä½åƒ¹æ ¼ï¼ˆç¾é‡‘ï¼‰ |
| unit_pack_quantity | å–®ä½åŒ…è£é‡ | INT | ğŸ“ | åŒ…è£æ•¸é‡ |
| weight_kg | é‡é‡(KG) | DECIMAL(10,3) | ğŸ“ | å–®ä½é‡é‡ï¼ˆå…¬æ–¤ï¼‰ |
| has_stock | æœ‰ç„¡æ–™è™Ÿ | BOOLEAN | ğŸ“ | æ˜¯å¦æœ‰åº«å­˜æ–™è™Ÿ |
| storage_life_months | å­˜å„²å£½é™ä»£è™Ÿ | VARCHAR(10) | ğŸ“ | å„²å­˜æœŸé™ä»£ç¢¼ |
| file_type_code | æª”åˆ¥ä»£è™Ÿ | VARCHAR(10) | ğŸ“ | æª”æ¡ˆé¡å‹ä»£è™Ÿ |
| file_type_category | æª”åˆ¥å€åˆ† | VARCHAR(10) | ğŸ“ | æª”æ¡ˆåˆ†é¡ |
| secrecy_code | æ©Ÿå¯†æ€§ä»£è™Ÿ | VARCHAR(10) | ğŸ“ | æ©Ÿå¯†ç­‰ç´šï¼ˆU/C/Sç­‰ï¼‰ |
| expendability_code | æ¶ˆè€—æ€§ä»£è™Ÿ | VARCHAR(10) | ğŸ“ | æ¶ˆè€—å“åˆ†é¡ï¼ˆM/Nç­‰ï¼‰ |
| spec_indicator | è¦æ ¼æŒ‡ç¤º | VARCHAR(10) | ğŸ“ | è¦æ ¼æŒ‡æ¨™ |
| navy_source | æµ·è»è»å“ä¾†æº | VARCHAR(50) | ğŸ“ | ä¾†æºèªªæ˜ |
| storage_type_code | å„²å­˜å‹å¼ | VARCHAR(20) | ğŸ“ | å„²å­˜æ–¹å¼ |
| storage_life_action_code | è™•ç†ä»£è™Ÿ (å£½é™è™•ç†) | VARCHAR(10) | ğŸ“ | å£½é™ç®¡ç†ä»£è™Ÿ |
| manufacturability_code | è£½é€ èƒ½é‡ | VARCHAR(10) | ğŸ“ | è£½é€ èƒ½åŠ› |
| repairability_code | ä¿®ç†èƒ½é‡ | VARCHAR(10) | ğŸ“ | ä¿®ç†èƒ½åŠ› |
| source_code | ä¾†æºä»£è™Ÿ | VARCHAR(10) | ğŸ“ | ä¾†æºåˆ†é¡ |
| project_code | å°ˆæ¡ˆä»£è™Ÿ | VARCHAR(20) | ğŸ“ | æ‰€å±¬å°ˆæ¡ˆ |
| date_created | å»ºç«‹æ™‚é–“ | TIMESTAMP | ğŸ”„ | |
| date_updated | æ›´æ–°æ™‚é–“ | TIMESTAMP | ğŸ”„ | |
| inc_code | INCä»£ç¢¼ | VARCHAR(20) | ğŸ“ | INCåˆ†é¡ç¢¼ |
| fiig_code | FIIGä»£ç¢¼ | VARCHAR(20) | ğŸ“ | FIIGç¢¼ |

**å‚™è¨»**:
- `inc_code`: ç”¨æ–¼å„²å­˜ INC åˆ†é¡ä»£ç¢¼ï¼Œèˆ‡ public.inc è¡¨é—œè¯
- `fiig_code`: ç”¨æ–¼å„²å­˜ FIIG ä»£ç¢¼ï¼Œèˆ‡ public.fiig è¡¨é—œè¯

---

### 5. bomï¼ˆBOMä¸»è¡¨ï¼‰

**ç”¨é€”**: BOM ç‰ˆæœ¬æ§åˆ¶
**V3.0 æ–°å¢**: æ”¯æ´ç‰ˆæœ¬ç®¡ç†å’Œæ­·å²è¿½æº¯

| è‹±æ–‡æ¬„ä½å | ä¸­æ–‡åç¨± | è³‡æ–™é¡å‹ | æ¨™è¨˜ | èªªæ˜ |
|-----------|---------|---------|------|------|
| bom_uuid | BOM UUID | UUID | ğŸ”‘ğŸ”„ | è‡ªå‹•ç”Ÿæˆ UUID |
| item_uuid | æˆå“æ–™è™Ÿ | UUID | ğŸ”—â­ | å¤–éµé€£çµè‡³ Item |
| bom_code | BOMç·¨è™Ÿ | VARCHAR(50) | ğŸ“ | BOM è­˜åˆ¥ç¢¼ |
| revision | ç‰ˆæ¬¡ | VARCHAR(20) | ğŸ“ | ç‰ˆæœ¬è™Ÿ (1.0, 1.1...) |
| effective_from | ç”Ÿæ•ˆæ—¥ | DATE | ğŸ“ | é–‹å§‹ç”Ÿæ•ˆæ—¥æœŸ |
| effective_to | å¤±æ•ˆæ—¥ | DATE | ğŸ“ | çµæŸç”Ÿæ•ˆæ—¥æœŸ |
| status | ç‹€æ…‹ | VARCHAR(20) | ğŸ“ | Released/Draft |
| remark | å‚™è¨» | TEXT | ğŸ“ | å‚™è¨»èªªæ˜ |
| date_created | å»ºç«‹æ™‚é–“ | TIMESTAMP | ğŸ”„ | |
| date_updated | æ›´æ–°æ™‚é–“ | TIMESTAMP | ğŸ”„ | |

---

### 6. bom_lineï¼ˆBOMæ˜ç´°è¡Œï¼‰â­

**ç”¨é€”**: BOM å…ƒä»¶æ¸…å–®ï¼ˆitem è‡ªæˆ‘é—œè¯ï¼‰
**V3.0 æ ¸å¿ƒ**: å¯¦ç¾å¤šå±¤ç´š BOM çµæ§‹

| è‹±æ–‡æ¬„ä½å | ä¸­æ–‡åç¨± | è³‡æ–™é¡å‹ | æ¨™è¨˜ | èªªæ˜ |
|-----------|---------|---------|------|------|
| line_uuid | è¡ŒUUID | UUID | ğŸ”‘ğŸ”„ | è‡ªå‹•ç”Ÿæˆ UUID |
| bom_uuid | BOM UUID | UUID | ğŸ”—â­ | å¤–éµé€£çµè‡³ BOM |
| line_no | è¡Œè™Ÿ | VARCHAR(50) | â­ | æ’åºç”¨ |
| component_item_uuid | å…ƒä»¶æ–™è™Ÿ | UUID | ğŸ”—â­ | å¤–éµé€£çµè‡³ Itemï¼ˆå…ƒä»¶ï¼‰ |
| qty_per | å–®ä½ç”¨é‡ | DECIMAL(10,4) | â­ | æ¯å–®ä½æˆå“éœ€è¦æ•¸é‡ |
| scrap_type | æè€—å‹æ…‹ | VARCHAR(20) | ğŸ“ | æè€—è¨ˆç®—æ–¹å¼ |
| scrap_rate | æè€—ç‡ | DECIMAL(5,4) | ğŸ“ | æè€—ç™¾åˆ†æ¯” |
| uom | ç”¨é‡å–®ä½ | VARCHAR(10) | ğŸ“ | é è¨­è·Ÿå…ƒä»¶UOMä¸€è‡´ |
| position | è£é…ä½ç½® | VARCHAR(100) | ğŸ“ | è£é…ä½ç½®/ç«™åˆ¥ |
| remark | å‚™è¨» | TEXT | ğŸ“ | å‚™è¨»èªªæ˜ |
| date_created | å»ºç«‹æ™‚é–“ | TIMESTAMP | ğŸ”„ | |
| date_updated | æ›´æ–°æ™‚é–“ | TIMESTAMP | ğŸ”„ | |

**å¤–éµé—œè¯**:
- `bom_uuid` â†’ `bom.bom_uuid` (ON DELETE CASCADE)
- `component_item_uuid` â†’ `item.item_uuid` (ON DELETE CASCADE)

---

### 7. mrcï¼ˆå“é …è¦æ ¼è¡¨ï¼‰

**ç”¨é€”**: è¨˜éŒ„å“é …çš„è¦æ ¼è³‡æ–™
**V3.0 è®Šæ›´**: å–ä»£ ItemSpecificationï¼Œä½¿ç”¨ UUID ä¸»éµ

| è‹±æ–‡æ¬„ä½å | ä¸­æ–‡åç¨± | è³‡æ–™é¡å‹ | æ¨™è¨˜ | èªªæ˜ |
|-----------|---------|---------|------|------|
| mrc_uuid | MRC UUID | UUID | ğŸ”‘ğŸ”„ | è‡ªå‹•ç”Ÿæˆ UUID |
| item_uuid | å“é …UUID | UUID | ğŸ”—â­ | å¤–éµé€£çµè‡³ Item |
| spec_no | è¦æ ¼é †åº | INT | ğŸ“ | é †åºç·¨è™Ÿ |
| spec_abbr | è¦æ ¼è³‡æ–™ç¸®å¯« | VARCHAR(20) | ğŸ“ | è¦æ ¼ç°¡ç¨± |
| spec_en | è¦æ ¼è³‡æ–™è‹±æ–‡ | VARCHAR(200) | ğŸ“ | è¦æ ¼é …ç›®è‹±æ–‡ |
| spec_zh | è¦æ ¼è³‡æ–™ç¿»è­¯ | VARCHAR(200) | ğŸ“ | è¦æ ¼é …ç›®ä¸­æ–‡ |
| answer_en | è‹±ç­” | VARCHAR(200) | ğŸ“ | è¦æ ¼å€¼è‹±æ–‡ |
| answer_zh | ä¸­ç­” | VARCHAR(200) | ğŸ“ | è¦æ ¼å€¼ä¸­æ–‡ |
| date_created | å»ºç«‹æ™‚é–“ | TIMESTAMP | ğŸ”„ | |
| date_updated | æ›´æ–°æ™‚é–“ | TIMESTAMP | ğŸ”„ | |

**å¤–éµé—œè¯**:
- `item_uuid` â†’ `item.item_uuid` (ON DELETE CASCADE)

---

### 8. item_number_xrefï¼ˆé›¶ä»¶è™Ÿç¢¼é—œè¯æª”ï¼‰

**ç”¨é€”**: å“é …-é›¶ä»¶è™Ÿ-å» å•†çš„å¤šå°å¤šé—œè¯
**ä¾†æº**: 20M_æ–™è™Ÿä¸»è¦ä»¶è™Ÿæª”
**è¡¨å**: å¯¦éš›è³‡æ–™åº«è¡¨åç‚º `item_number_xref`ï¼ˆå°å¯«ï¼Œåº•ç·šåˆ†éš”ï¼‰

| è‹±æ–‡æ¬„ä½å | ä¸­æ–‡åç¨± | è³‡æ–™é¡å‹ | æ¨™è¨˜ | èªªæ˜ |
|-----------|---------|---------|------|------|
| part_number_id | é›¶ä»¶è™Ÿç¢¼ID | SERIAL | ğŸ”‘ğŸ”„ | è‡ªå‹•ç·¨è™Ÿ |
| part_number_reference | é…ä»¶è™Ÿç¢¼ | VARCHAR(50) | â­ | P/N |
| item_uuid | å“é …UUID | UUID | ğŸ”—â­ | å¤–éµé€£çµè‡³ Item |
| supplier_id | å» å•†ID | INT | ğŸ”— | å¤–éµé€£çµè‡³ Supplier |
| pn_acquisition_level | åƒè€ƒè™Ÿç²å¾—ç¨‹åº¦ | VARCHAR(10) | ğŸ“ | å–å¾—é›£æ˜“åº¦ |
| pn_acquisition_source | åƒè€ƒè™Ÿç²å¾—ä¾†æº | VARCHAR(50) | ğŸ“ | å–å¾—ç®¡é“ |
| is_primary | æ˜¯å¦ç‚ºä¸»è¦é›¶ä»¶è™Ÿ | BOOLEAN | ğŸ“ | ä¸»/æ›¿ä»£é›¶ä»¶è™Ÿ |
| date_created | å»ºç«‹æ™‚é–“ | TIMESTAMP | ğŸ”„ | |
| date_updated | æ›´æ–°æ™‚é–“ | TIMESTAMP | ğŸ”„ | |

---

### 9. technicaldocumentï¼ˆæŠ€è¡“æ–‡ä»¶æª”ï¼‰

**ç”¨é€”**: ç®¡ç†æŠ€è¡“æ–‡ä»¶èˆ‡åœ–é¢è³‡æ–™

| è‹±æ–‡æ¬„ä½å | ä¸­æ–‡åç¨± | è³‡æ–™é¡å‹ | æ¨™è¨˜ | èªªæ˜ |
|-----------|---------|---------|------|------|
| document_id | æ–‡ä»¶ID | SERIAL | ğŸ”‘ğŸ”„ | è‡ªå‹•ç·¨è™Ÿ |
| document_reference | åœ–å/æ›¸å | VARCHAR(200) | â­ | æ–‡ä»¶åç¨± |
| document_version | ç‰ˆæ¬¡ | VARCHAR(20) | ğŸ“ | ç‰ˆæœ¬è™Ÿ |
| shipyard_drawing_no | èˆ¹å» åœ–è™Ÿ | VARCHAR(50) | ğŸ“ | èˆ¹å» åœ–é¢ç·¨è™Ÿ |
| design_drawing_no | è¨­è¨ˆåœ–è™Ÿ | VARCHAR(50) | ğŸ“ | è¨­è¨ˆåœ–é¢ç·¨è™Ÿ |
| document_type | è³‡æ–™é¡å‹ | VARCHAR(20) | ğŸ“ | æ–‡ä»¶é¡å‹ |
| document_category | è³‡æ–™é¡åˆ¥ | VARCHAR(20) | ğŸ“ | æ–‡ä»¶åˆ†é¡ |
| language | èªè¨€ | VARCHAR(10) | ğŸ“ | ä¸­æ–‡/è‹±æ–‡ |
| security_level | æ©Ÿå¯†ç­‰ç´š | VARCHAR(10) | ğŸ“ | æ©Ÿå¯†åˆ†ç´š |
| eswbs_code | ESWBSï¼ˆäº”ç¢¼ï¼‰ | VARCHAR(20) | ğŸ“ | è£å‚™åˆ†é¡ç¢¼ |
| accounting_code | æœƒè¨ˆç·¨è™Ÿ | VARCHAR(20) | ğŸ“ | æœƒè¨ˆç§‘ç›® |
| date_created | å»ºç«‹æ™‚é–“ | TIMESTAMP | ğŸ”„ | |
| date_updated | æ›´æ–°æ™‚é–“ | TIMESTAMP | ğŸ”„ | |

---

### 10. item_document_xrefï¼ˆå“é …æ–‡ä»¶é—œè¯æª”ï¼‰

**ç”¨é€”**: å“é …-æŠ€è¡“æ–‡ä»¶å¤šå°å¤šé—œè¯
**V3.0 è®Šæ›´**: å¾ Equipment_Document_xref æ”¹ç‚º Item_Document_xref

| è‹±æ–‡æ¬„ä½å | ä¸­æ–‡åç¨± | è³‡æ–™é¡å‹ | æ¨™è¨˜ | èªªæ˜ |
|-----------|---------|---------|------|------|
| item_uuid | å“é …UUID | UUID | ğŸ”‘ğŸ”—â­ | å¤–éµé€£çµè‡³ Item |
| document_id | æ–‡ä»¶ID | INT | ğŸ”‘ğŸ”—â­ | å¤–éµé€£çµè‡³ TechnicalDocument |
| date_created | å»ºç«‹æ™‚é–“ | TIMESTAMP | ğŸ”„ | |
| date_updated | æ›´æ–°æ™‚é–“ | TIMESTAMP | ğŸ”„ | |

**è¤‡åˆä¸»éµ**: (item_uuid, document_id)

---

### 11. application_suppliercodeï¼ˆå» å•†ä»£è™Ÿç”³è«‹è¡¨ï¼‰

**ç”¨é€”**: å» å•†ä»£è™Ÿç”³è«‹è¡¨å–®
**V3.1 ä¿ç•™**: èˆ‡ Application è¡¨ç”¨é€”ä¸åŒï¼Œç¹¼çºŒä¿ç•™

| è‹±æ–‡æ¬„ä½å | ä¸­æ–‡åç¨± | è³‡æ–™é¡å‹ | æ¨™è¨˜ | èªªæ˜ |
|-----------|---------|---------|------|------|
| application_uuid | ç”³ç·¨å–®UUID | UUID | ğŸ”‘ğŸ”„ | è‡ªå‹•ç”Ÿæˆ UUID |
| form_no | æµæ°´è™Ÿ | VARCHAR(50) | UNIQUE | ç”³è«‹å–®æµæ°´è™Ÿ |
| applicant | ç”³è«‹äºº | VARCHAR(50) | ğŸ“ | ç”³è«‹äººå§“å |
| supplier_id | å» å•†ID | INT | ğŸ”— | å¤–éµé€£çµè‡³ Supplier (å¯é¸) |
| supplier_name | å» å•†åç¨± | VARCHAR(200) | ğŸ“ | å» å•†åç¨± |
| address | åœ°å€ | VARCHAR(200) | ğŸ“ | å» å•†åœ°å€ |
| phone | é›»è©± | VARCHAR(50) | ğŸ“ | è¯çµ¡é›»è©± |
| business_items | ç‡Ÿæ¥­é …ç›® | VARCHAR(200) | ğŸ“ | ç‡Ÿæ¥­é …ç›®èªªæ˜ |
| supplier_code | å» å®¶ä»£è™Ÿ | VARCHAR(20) | ğŸ“ | ç”³è«‹æˆ–ç¾æœ‰ä»£è™Ÿ |
| equipment_name | è£å‚™åç¨± | VARCHAR(200) | ğŸ“ | ç›¸é—œè£å‚™åç¨± |
| custom_fields | è‡ªå®šç¾©æ¬„ä½ | JSONB | ğŸ“ | å‹•æ…‹æ“´å……æ¬„ä½ |
| status | ç‹€æ…‹ | VARCHAR(20) | ğŸ“ | Draft/Submittedç­‰ |
| date_created | å»ºç«‹æ™‚é–“ | TIMESTAMP | ğŸ”„ | |
| date_updated | æ›´æ–°æ™‚é–“ | TIMESTAMP | ğŸ”„ | |

---

### 12. cidapplicationï¼ˆCIDç”³è«‹å–®ï¼‰

**ç”¨é€”**: CID ç”³è«‹è¡¨å–®
**V3.1 ä¿ç•™**: èˆ‡ Application è¡¨ç”¨é€”ä¸åŒï¼Œç¹¼çºŒä¿ç•™

| è‹±æ–‡æ¬„ä½å | ä¸­æ–‡åç¨± | è³‡æ–™é¡å‹ | æ¨™è¨˜ | èªªæ˜ |
|-----------|---------|---------|------|------|
| application_uuid | ç”³ç·¨å–®UUID | UUID | ğŸ”‘ğŸ”„ | è‡ªå‹•ç”Ÿæˆ UUID |
| form_no | æµæ°´è™Ÿ | VARCHAR(50) | UNIQUE | ç”³è«‹å–®æµæ°´è™Ÿ |
| applicant | ç”³è«‹äºº | VARCHAR(50) | ğŸ“ | ç”³è«‹äººå§“å |
| item_uuid | å“é …UUID | UUID | ğŸ”— | å¤–éµé€£çµè‡³ Item (å¯é¸) |
| suggested_prefix | å»ºè­°å‰å…©ç¢¼ | VARCHAR(2) | ğŸ“ | å»ºè­°CIDå‰ç¶´ |
| approved_cid | æ ¸å®šCID | VARCHAR(50) | ğŸ“ | æ ¸å®šå¾Œçš„CID |
| equipment_name_zh | è£å‚™ä¸­æ–‡åç¨± | VARCHAR(100) | ğŸ“ | ä¸­æ–‡åç¨± |
| equipment_name_en | è£å‚™è‹±æ–‡åç¨± | VARCHAR(200) | ğŸ“ | è‹±æ–‡åç¨± |
| supplier_code | å» å®¶ä»£è™Ÿ | VARCHAR(20) | ğŸ“ | ç›¸é—œå» å•†ä»£è™Ÿ |
| part_number | é…ä»¶è™Ÿç¢¼ | VARCHAR(50) | ğŸ“ | P/N |
| status | ç‹€æ…‹ | VARCHAR(20) | ğŸ“ | Draft/Submittedç­‰ |
| date_created | å»ºç«‹æ™‚é–“ | TIMESTAMP | ğŸ”„ | |
| date_updated | æ›´æ–°æ™‚é–“ | TIMESTAMP | ğŸ”„ | |

---

### 13. item_emu3000_maintenance_extï¼ˆEMU3000ç¶­ä¿®ç‰©æ–™æ“´å±•è¡¨ï¼‰

**ç”¨é€”**: å„²å­˜ EMU3000 ç¶­ä¿®ç‰©æ–™æ¸…å–®å°ˆå±¬æ¬„ä½
**ä¾†æº**: EMU3000 PDF/Excel åŒ¯å…¥

| è‹±æ–‡æ¬„ä½å | ä¸­æ–‡åç¨± | è³‡æ–™é¡å‹ | æ¨™è¨˜ | èªªæ˜ |
|-----------|---------|---------|------|------|
| ext_uuid | æ“´å±•è¡¨UUID | UUID | ğŸ”‘ğŸ”„ | è‡ªå‹•ç”Ÿæˆ UUID |
| item_uuid | å“é …UUID | UUID | ğŸ”— | å¤–éµé€£çµè‡³ Item |
| part | é …æ¬¡/è¡Œè™Ÿ | VARCHAR(255) | ğŸ“ | åŸå§‹è³‡æ–™ Item No/Part |
| quantity | æ•¸é‡ | NUMERIC(10, 4) | ğŸ“ | æ•¸é‡ |
| unit | å–®ä½ | VARCHAR(50) | ğŸ“ | å–®ä½ (Pce, SETç­‰) |
| name | å“å | VARCHAR(255) | ğŸ“ | åŸå§‹å“å |
| wec | WECç·¨ç¢¼ | VARCHAR(100) | ğŸ“ | WEC Code |
| notes | å‚™è¨» | TEXT | ğŸ“ | å‚™è¨»èªªæ˜ |
| kit_no | å¥—ä»¶ç·¨è™Ÿ | VARCHAR(100) | ğŸ“ | Kit Number |
| date_created | å»ºç«‹æ™‚é–“ | TIMESTAMP | ğŸ”„ | |
| date_updated | æ›´æ–°æ™‚é–“ | TIMESTAMP | ğŸ”„ | |

**å¤–éµé—œè¯**:
- `item_uuid` â†’ `Item.item_uuid` (ON DELETE CASCADE)

---

## web_app Schema - Web æ‡‰ç”¨è¡¨ï¼ˆ6å€‹ï¼‰

> **Schema**: `web_app`  
> **èªªæ˜**: Web æ‡‰ç”¨æ ¸å¿ƒè¡¨ï¼ŒåŒ…å«ä½¿ç”¨è€…ã€ç”³ç·¨å–®ã€é™„ä»¶ã€æ—¥èªŒç­‰  
> **V3.1 æ–°å¢**: 2025-11-25 æ•´åˆè‡³è³‡æ–™åº«

### 14. userï¼ˆä½¿ç”¨è€…ç®¡ç†ï¼‰â­

**ç”¨é€”**: ç³»çµ±ä½¿ç”¨è€…å¸³è™Ÿç®¡ç†
**V3.1 æ–°å¢**: Web æ‡‰ç”¨æ ¸å¿ƒè¡¨

| è‹±æ–‡æ¬„ä½å | ä¸­æ–‡åç¨± | è³‡æ–™é¡å‹ | æ¨™è¨˜ | èªªæ˜ |
|-----------|---------|---------|------|------|
| id | ä½¿ç”¨è€…UUID | UUID | ğŸ”‘ğŸ”„ | è‡ªå‹•ç”Ÿæˆ UUID |
| username | ä½¿ç”¨è€…å¸³è™Ÿ | VARCHAR(80) | â­ UNIQUE | ç™»å…¥å¸³è™Ÿ |
| email | é›»å­éƒµä»¶ | VARCHAR(120) | â­ UNIQUE | é›»å­éƒµä»¶åœ°å€ |
| password_hash | å¯†ç¢¼é›œæ¹Šå€¼ | VARCHAR(256) | â­ | åŠ å¯†å¾Œçš„å¯†ç¢¼ |
| english_code | è‹±æ–‡ä»£ç¢¼ | VARCHAR(10) | ğŸ“ | è‹±æ–‡ä»£è™Ÿ |
| full_name | å…¨å | VARCHAR(100) | ğŸ“ | å®Œæ•´å§“å |
| department | éƒ¨é–€ | VARCHAR(100) | ğŸ“ | æ‰€å±¬éƒ¨é–€ |
| position | è·ä½ | VARCHAR(100) | ğŸ“ | è·ç¨± |
| phone | é›»è©± | VARCHAR(20) | ğŸ“ | è¯çµ¡é›»è©± |
| role | è§’è‰²æ¬Šé™ | VARCHAR(50) | ğŸ“ | admin/user/viewerç­‰ |
| is_active | å¸³è™Ÿå•Ÿç”¨ç‹€æ…‹ | BOOLEAN | ğŸ“ | å¸³è™Ÿæ˜¯å¦å•Ÿç”¨ |
| is_verified | é›»å­éƒµä»¶é©—è­‰ç‹€æ…‹ | BOOLEAN | ğŸ“ | Emailæ˜¯å¦å·²é©—è­‰ |
| email_verified_at | é›»å­éƒµä»¶é©—è­‰æ™‚é–“ | TIMESTAMP | ğŸ“ | é©—è­‰æ™‚é–“æˆ³ |
| last_login_at | æœ€å¾Œç™»å…¥æ™‚é–“ | TIMESTAMP | ğŸ“ | æœ€å¾Œç™»å…¥æ™‚é–“æˆ³ |
| failed_login_attempts | ç™»å…¥å¤±æ•—æ¬¡æ•¸ | INT | ğŸ“ | é€£çºŒå¤±æ•—æ¬¡æ•¸ |
| locked_until | å¸³è™Ÿé–å®šè‡³ | TIMESTAMP | ğŸ“ | é–å®šè§£é™¤æ™‚é–“ |
| date_created | å»ºç«‹æ™‚é–“ | TIMESTAMP | ğŸ”„ | è¨˜éŒ„å»ºç«‹æ™‚é–“ |
| date_updated | æ›´æ–°æ™‚é–“ | TIMESTAMP | ğŸ”„ | è¨˜éŒ„æ›´æ–°æ™‚é–“ |

**ç´¢å¼•**:
- `idx_user_email` - Emailç´¢å¼•
- `idx_user_username` - ä½¿ç”¨è€…åç¨±ç´¢å¼•
- `idx_user_role` - è§’è‰²ç´¢å¼•
- `idx_user_is_active` - å•Ÿç”¨ç‹€æ…‹ç´¢å¼•

---

### 15. applicationï¼ˆç”³ç·¨å–®ä¸»è¡¨ï¼‰â­

**ç”¨é€”**: ç”³ç·¨å–®æ ¸å¿ƒè³‡æ–™ç®¡ç†
**V3.2 ç²¾ç°¡åŒ–**: åƒ…ä¿ç•™æ ¸å¿ƒæ¬„ä½ï¼Œè©³ç´°è³‡æ–™å„²å­˜æ–¼é—œè¯è¡¨

| è‹±æ–‡æ¬„ä½å | ä¸­æ–‡åç¨± | è³‡æ–™é¡å‹ | æ¨™è¨˜ | èªªæ˜ |
|-----------|---------|---------|------|------|
| id | ç”³ç·¨å–®UUID | UUID | ğŸ”‘ğŸ”„ | è‡ªå‹•ç”Ÿæˆ UUID |
| user_id | ç”³è«‹äºº | UUID | ğŸ”— | å¤–éµè‡³Userè¡¨ |
| item_uuid | é—œè¯å“é …UUID | UUID | ğŸ”— | å¤–éµè‡³Itemè¡¨ â­ |
| date_created | å»ºç«‹æ™‚é–“ | TIMESTAMP | ğŸ”„ | è¨˜éŒ„å»ºç«‹æ™‚é–“ |
| date_updated | æ›´æ–°æ™‚é–“ | TIMESTAMP | ğŸ”„ | è¨˜éŒ„æ›´æ–°æ™‚é–“ |
| deleted_at | è»Ÿåˆªé™¤æ™‚é–“æˆ³ | TIMESTAMP | ğŸ“ | è»Ÿåˆªé™¤æ¨™è¨˜ |
| form_serial_number | è¡¨å–®åºè™Ÿ | VARCHAR(50) | ğŸ“ | ç”³ç·¨å–®ç·¨è™Ÿ |
| system_code | ç³»çµ±ä»£ç¢¼ | VARCHAR(100) | ğŸ“ | ç³»çµ±åˆ†é¡ |
| mrc_data | MRCè³‡æ–™ | JSON | ğŸ“ | è¦æ ¼è³‡æ–™ï¼ˆJSONæ ¼å¼ï¼‰ |
| applicant_unit | ç”³è«‹å–®ä½ | VARCHAR(100) | ğŸ“ | ç”³è«‹éƒ¨é–€ |
| contact_info | è¯çµ¡è³‡è¨Š | VARCHAR(100) | ğŸ“ | è¯çµ¡æ–¹å¼ |
| apply_date | ç”³è«‹æ—¥æœŸ | DATE | ğŸ“ | ç”³è«‹æ—¥ |
| official_nsn_stamp | æ­£å¼NSNå°ç«  | VARCHAR(10) | ğŸ“ | NSNç« æˆ³ |
| official_nsn_final | æœ€çµ‚æ­£å¼NSN | VARCHAR(20) | ğŸ“ | æ­£å¼NSNè™Ÿç¢¼ |
| nsn_filled_at | NSNå¡«å¯«æ™‚é–“ | TIMESTAMP | ğŸ“ | NSNå¡«å¯«æ™‚é–“æˆ³ |
| nsn_filled_by | NSNå¡«å¯«è€… | UUID | ğŸ”— | å¤–éµè‡³Userè¡¨ |
| closed_at | çµæ¡ˆæ™‚é–“ | TIMESTAMP | ğŸ“ | çµæ¡ˆæ™‚é–“æˆ³ |
| closed_by | çµæ¡ˆè€… | UUID | ğŸ”— | å¤–éµè‡³Userè¡¨ |
| status | ç”³ç·¨å–®ç‹€æ…‹ | VARCHAR(50) | ğŸ“ | ç‹€æ…‹ï¼ˆpending/approvedç­‰ï¼‰ |
| sub_status | ç”³ç·¨å–®å­ç‹€æ…‹ | VARCHAR(50) | ğŸ“ | è©³ç´°ç‹€æ…‹ |

**å¤–éµé—œè¯**:
- `user_id` â†’ `user.id`
- `item_uuid` â†’ `item.item_uuid` (ON DELETE SET NULL) â­
- `nsn_filled_by` â†’ `user.id`
- `closed_by` â†’ `user.id`

**ç´¢å¼•**:
- `idx_app_user_id` - ä½¿ç”¨è€…ç´¢å¼•
- `idx_app_item_uuid` - å“é …ç´¢å¼• â­
- `idx_app_status` - ç‹€æ…‹ç´¢å¼•
- `idx_app_date_created` - å»ºç«‹æ™‚é–“ç´¢å¼•
- `idx_app_deleted_at` - è»Ÿåˆªé™¤ç´¢å¼•ï¼ˆéƒ¨åˆ†ç´¢å¼•ï¼‰

**å‚™è¨»**:
- V3.2 ç²¾ç°¡åŒ–ï¼šç§»é™¤å¤§éƒ¨åˆ†æ–™ä»¶å±¬æ€§æ¬„ä½
- æ–™ä»¶è©³ç´°è³‡è¨Šé€é `item_uuid` é—œè¯è‡³æ“´å±•è¡¨ï¼š
  - `item_material_ext`: æ–™ä»¶å±¬æ€§ï¼ˆaccounting_unit_code, unit_priceç­‰ï¼‰
  - `item_equipment_ext`: è£å‚™å±¬æ€§ï¼ˆusage_locationç­‰ï¼‰
  - `item_number_xref`: é›¶ä»¶è™Ÿç¢¼ï¼ˆpn_acquisition_levelç­‰ï¼‰
  - `technicaldocument`: æŠ€è¡“æ–‡ä»¶ï¼ˆdocument_referenceç­‰ï¼‰

#### Application è¡¨æ¬„ä½å°æ‡‰è¡¨ï¼ˆèˆŠ â†’ æ–°ï¼‰

ä¸‹è¡¨é¡¯ç¤ºèˆŠç‰ˆç”³ç·¨å–®è¡¨ï¼ˆ51 æ¬„ä½ï¼‰èˆ‡æ–°ç‰ˆ `web_app.application` è¡¨ï¼ˆ20 æ¬„ä½ï¼‰çš„æ¬„ä½å°æ‡‰é—œä¿‚ï¼š

| èˆŠç‰ˆæ¬„ä½ | æ–°ç‰ˆæ¬„ä½ (application) | è³‡æ–™é·ç§»èªªæ˜ |
|------------------------|----------------------|-------------|
| **æ ¸å¿ƒæ¬„ä½ï¼ˆä¿ç•™ï¼‰** | | |
| `id` | `id` | âœ… ç›´æ¥å°æ‡‰ |
| `user_id` | `user_id` | âœ… ç›´æ¥å°æ‡‰ |
| `form_serial_number` | `form_serial_number` | âœ… ç›´æ¥å°æ‡‰ |
| `status` | `status` | âœ… ç›´æ¥å°æ‡‰ |
| `sub_status` | `sub_status` | âœ… ç›´æ¥å°æ‡‰ |
| `created_at` | `date_created` | âœ… æ¬„ä½æ”¹å |
| `updated_at` | `date_updated` | âœ… æ¬„ä½æ”¹å |
| `deleted_at` | `deleted_at` | âœ… ç›´æ¥å°æ‡‰ |
| `system_code` | `system_code` | âœ… ç›´æ¥å°æ‡‰ |
| `mrc_data` | `mrc_data` | âœ… ç›´æ¥å°æ‡‰ï¼ˆJSONï¼‰ |
| `applicant_unit` | `applicant_unit` | âœ… ç›´æ¥å°æ‡‰ |
| `contact_info` | `contact_info` | âœ… ç›´æ¥å°æ‡‰ |
| `apply_date` | `apply_date` | âœ… ç›´æ¥å°æ‡‰ |
| `official_nsn_stamp` | `official_nsn_stamp` | âœ… ç›´æ¥å°æ‡‰ |
| `official_nsn_final` | `official_nsn_final` | âœ… ç›´æ¥å°æ‡‰ |
| `nsn_filled_at` | `nsn_filled_at` | âœ… ç›´æ¥å°æ‡‰ |
| `nsn_filled_by` | `nsn_filled_by` | âœ… ç›´æ¥å°æ‡‰ |
| `closed_at` | `closed_at` | âœ… ç›´æ¥å°æ‡‰ |
| `closed_by` | `closed_by` | âœ… ç›´æ¥å°æ‡‰ |
| **æ–°å¢æ¬„ä½** | | |
| - | `item_uuid` | ğŸ†• é—œè¯è‡³ Item è¡¨ï¼ˆæ ¸å¿ƒæ•´åˆé»ï¼‰ |
| **ç§»é™¤æ¬„ä½ï¼ˆæ–™ä»¶å±¬æ€§ï¼‰** | | |
| `part_number` | âŒ ç§»é™¤ | â†’ `Item.item_code` |
| `english_name` | âŒ ç§»é™¤ | â†’ `item.item_name_en` |
| `chinese_name` | âŒ ç§»é™¤ | â†’ `item.item_name_zh` |
| `inc_code` | âŒ ç§»é™¤ | â†’ `item_material_ext.inc_code` |
| `fiig_code` | âŒ ç§»é™¤ | â†’ `item_material_ext.fiig_code` |
| `accounting_unit_code` | âŒ ç§»é™¤ | â†’ `item_material_ext.accounting_code` |
| `issue_unit` | âŒ ç§»é™¤ | â†’ `item_material_ext.issue_unit` |
| `unit_price` | âŒ ç§»é™¤ | â†’ `item_material_ext.unit_price` |
| `spec_indicator` | âŒ ç§»é™¤ | â†’ `item_material_ext.spec_indicator` |
| `unit_pack_quantity` | âŒ ç§»é™¤ | â†’ `item_material_ext.unit_pack_quantity` |
| `storage_life_months` | âŒ ç§»é™¤ | â†’ `item_material_ext.storage_life_months` |
| `storage_life_action_code` | âŒ ç§»é™¤ | â†’ `item_material_ext.storage_life_action_code` |
| `storage_type_code` | âŒ ç§»é™¤ | â†’ `item_material_ext.storage_type_code` |
| `secrecy_code` | âŒ ç§»é™¤ | â†’ `item_material_ext.secrecy_code` |
| `expendability_code` | âŒ ç§»é™¤ | â†’ `item_material_ext.expendability_code` |
| `repairability_code` | âŒ ç§»é™¤ | â†’ `item_material_ext.repairability_code` |
| `manufacturability_code` | âŒ ç§»é™¤ | â†’ `item_material_ext.manufacturability_code` |
| `source_code` | âŒ ç§»é™¤ | â†’ `item_material_ext.source_code` |
| `category_code` | âŒ ç§»é™¤ | â†’ `item_material_ext.category_code` |
| **ç§»é™¤æ¬„ä½ï¼ˆè£å‚™å±¬æ€§ï¼‰** | | |
| `ship_type` | âŒ ç§»é™¤ | â†’ `item_equipment_ext.ship_type` |
| `model_type` | âŒ ç§»é™¤ | â†’ `item_equipment_ext.equipment_type` |
| `equipment_name` | âŒ ç§»é™¤ | â†’ `item.item_name_zh/en` |
| `usage_location` | âŒ ç§»é™¤ | â†’ `item_equipment_ext.usage_location` |
| `quantity_per_unit` | âŒ ç§»é™¤ | â†’ `item_material_ext.unit_pack_quantity` |
| **ç§»é™¤æ¬„ä½ï¼ˆé›¶ä»¶è™Ÿç¢¼ï¼‰** | | |
| `pn_acquisition_level` | âŒ ç§»é™¤ | â†’ `item_number_xref.pn_acquisition_level` |
| `pn_acquisition_source` | âŒ ç§»é™¤ | â†’ `item_number_xref.pn_acquisition_source` |
| `part_number_reference` | âŒ ç§»é™¤ | â†’ `item_number_xref.part_number_reference` |
| **ç§»é™¤æ¬„ä½ï¼ˆå» å•†è³‡è¨Šï¼‰** | | |
| `manufacturer` | âŒ ç§»é™¤ | â†’ `supplier.supplier_name_en` |
| `manufacturer_name` | âŒ ç§»é™¤ | â†’ `supplier.supplier_name_en` |
| `agent_name` | âŒ ç§»é™¤ | â†’ `supplier.agent_name` |
| **ç§»é™¤æ¬„ä½ï¼ˆå…¶ä»–ï¼‰** | | |
| `cid_no` | âŒ ç§»é™¤ | â†’ `item.item_code` (CID) |
| `document_reference` | âŒ ç§»é™¤ | â†’ `technicaldocument.document_reference` |

**æ¬„ä½çµ±è¨ˆ**:
- èˆŠç‰ˆç¸½æ¬„ä½æ•¸: **51 å€‹**
- æ–°ç‰ˆç¸½æ¬„ä½æ•¸: **20 å€‹**
- ä¿ç•™æ¬„ä½: **17 å€‹**ï¼ˆå« 2 å€‹æ”¹åæ¬„ä½ï¼šcreated_atâ†’date_created, updated_atâ†’date_updatedï¼‰
- æ–°å¢æ¬„ä½: **1 å€‹** (`item_uuid`)
- ç§»é™¤æ¬„ä½: **34 å€‹**ï¼ˆåŒ…å« 32 å€‹ç§»è‡³é—œè¯è¡¨ + 2 å€‹é‡è¤‡æ™‚é–“æ¬„ä½ï¼‰

**è³‡æ–™å­˜å–æ–¹å¼**:
```sql
-- èˆŠç‰ˆæŸ¥è©¢ï¼ˆæ‰€æœ‰è³‡æ–™åœ¨ä¸€å€‹è¡¨ï¼‰
SELECT part_number, english_name, manufacturer 
FROM web_app.applications 
WHERE id = 'xxx';

-- æ–°ç‰ˆæŸ¥è©¢ï¼ˆé€éé—œè¯ï¼‰
SELECT 
    a.form_serial_number,
    i.item_code AS part_number,
    i.item_name_en AS english_name,
    s.supplier_name_en AS manufacturer
FROM web_app.application a
LEFT JOIN web_app.item i ON a.item_uuid = i.item_uuid
LEFT JOIN web_app.item_material_ext ime ON i.item_uuid = ime.item_uuid
LEFT JOIN web_app.item_number_xref inx ON i.item_uuid = inx.item_uuid
LEFT JOIN web_app.supplier s ON inx.supplier_id = s.supplier_id
WHERE a.id = 'xxx';
```

---

### 16. applicationattachmentï¼ˆé™„ä»¶ç®¡ç†ï¼‰

**ç”¨é€”**: ç”³ç·¨å–®é™„ä»¶ï¼ˆBYTEAå„²å­˜ï¼‰
**V3.1 æ–°å¢**: æ”¯æ´äºŒé€²åˆ¶æª”æ¡ˆå„²å­˜

| è‹±æ–‡æ¬„ä½å | ä¸­æ–‡åç¨± | è³‡æ–™é¡å‹ | æ¨™è¨˜ | èªªæ˜ |
|-----------|---------|---------|------|------|
| id | é™„ä»¶UUID | UUID | ğŸ”‘ğŸ”„ | è‡ªå‹•ç”Ÿæˆ UUID |
| application_id | ç”³ç·¨å–®ID | UUID | ğŸ”—â­ | å¤–éµè‡³Applicationè¡¨ |
| user_id | ä¸Šå‚³è€… | UUID | ğŸ”— | å¤–éµè‡³Userè¡¨ |
| file_data | æª”æ¡ˆäºŒé€²åˆ¶è³‡æ–™ | BYTEA | ğŸ“ | æª”æ¡ˆå…§å®¹ï¼ˆäºŒé€²åˆ¶ï¼‰ |
| filename | å„²å­˜æª”å | VARCHAR(255) | ğŸ“ | ç³»çµ±å„²å­˜æª”å |
| original_filename | åŸå§‹æª”å | VARCHAR(255) | ğŸ“ | ä½¿ç”¨è€…ä¸Šå‚³æª”å |
| mimetype | MIMEé¡å‹ | VARCHAR(100) | ğŸ“ | æª”æ¡ˆé¡å‹ |
| file_type | æª”æ¡ˆé¡å‹ | VARCHAR(20) | ğŸ“ | PDF/PNG/JPGç­‰ |
| page_selection | é é¢é¸æ“‡ | VARCHAR(200) | ğŸ“ | PDFå¤šé æ™‚é¸æ“‡ |
| sort_order | æ’åºé †åº | INT | ğŸ“ | é™„ä»¶æ’åº |
| date_created | å»ºç«‹æ™‚é–“ | TIMESTAMP | ğŸ”„ | ä¸Šå‚³æ™‚é–“ |
| date_updated | æ›´æ–°æ™‚é–“ | TIMESTAMP | ğŸ”„ | æ›´æ–°æ™‚é–“ |

**å¤–éµé—œè¯**:
- `application_id` â†’ `application.id` (ON DELETE CASCADE)
- `user_id` â†’ `user.id`

---

### 17. usersessionï¼ˆå·¥ä½œéšæ®µç®¡ç†ï¼‰

**ç”¨é€”**: ä½¿ç”¨è€…ç™»å…¥Sessionç®¡ç†
**V3.1 æ–°å¢**: æ”¯æ´ remember_me åŠŸèƒ½

| è‹±æ–‡æ¬„ä½å | ä¸­æ–‡åç¨± | è³‡æ–™é¡å‹ | æ¨™è¨˜ | èªªæ˜ |
|-----------|---------|---------|------|------|
| session_id | Session ID | VARCHAR(255) | ğŸ”‘ | Sessionè­˜åˆ¥ç¢¼ |
| user_id | ä½¿ç”¨è€…ID | UUID | ğŸ”—â­ | å¤–éµè‡³Userè¡¨ |
| ip_address | IPä½å€ | VARCHAR(45) | ğŸ“ | ç™»å…¥IP |
| user_agent | ä½¿ç”¨è€…ä»£ç†å­—ä¸² | TEXT | ğŸ“ | ç€è¦½å™¨UA |
| is_active | æ˜¯å¦å•Ÿç”¨ | BOOLEAN | ğŸ“ | Sessionæ˜¯å¦æœ‰æ•ˆ |
| remember_me | è¨˜ä½æˆ‘åŠŸèƒ½ | BOOLEAN | ğŸ“ | æ˜¯å¦è¨˜ä½ç™»å…¥ |
| expires_at | SessionéæœŸæ™‚é–“ | TIMESTAMP | ğŸ“ | éæœŸæ™‚é–“æˆ³ |
| date_created | å»ºç«‹æ™‚é–“ | TIMESTAMP | ğŸ”„ | Sessionå»ºç«‹æ™‚é–“ |
| last_activity_at | æœ€å¾Œæ´»å‹•æ™‚é–“ | TIMESTAMP | ğŸ“ | æœ€å¾Œæ´»å‹•æ™‚é–“æˆ³ |

**å¤–éµé—œè¯**:
- `user_id` â†’ `user.id` (ON DELETE CASCADE)

---

### 18. applicationlogï¼ˆæ‡‰ç”¨ç¨‹å¼æ—¥èªŒï¼‰

**ç”¨é€”**: æ‡‰ç”¨ç¨‹å¼é‹è¡Œæ—¥èªŒ
**V3.1 æ–°å¢**: æ”¯æ´å®Œæ•´çš„æ—¥èªŒè¨˜éŒ„èˆ‡é™¤éŒ¯

| è‹±æ–‡æ¬„ä½å | ä¸­æ–‡åç¨± | è³‡æ–™é¡å‹ | æ¨™è¨˜ | èªªæ˜ |
|-----------|---------|---------|------|------|
| log_id | æ—¥èªŒUUID | UUID | ğŸ”‘ğŸ”„ | è‡ªå‹•ç”Ÿæˆ UUID |
| timestamp | æ—¥èªŒæ™‚é–“æˆ³ | TIMESTAMPTZ | ğŸ”„ | æ™‚é–“æˆ³ï¼ˆå«æ™‚å€ï¼‰ |
| level | æ—¥èªŒç­‰ç´š | VARCHAR(10) | ğŸ“ | DEBUG/INFO/WARNING/ERROR |
| logger | æ—¥èªŒè¨˜éŒ„å™¨åç¨± | VARCHAR(100) | ğŸ“ | Loggeråç¨± |
| message | æ—¥èªŒè¨Šæ¯ | TEXT | ğŸ“ | æ—¥èªŒå…§å®¹ |
| request_id | è«‹æ±‚ID | VARCHAR(36) | ğŸ“ | è«‹æ±‚è¿½è¹¤ID |
| method | HTTPæ–¹æ³• | VARCHAR(10) | ğŸ“ | GET/POST/PUT/DELETEç­‰ |
| path | è«‹æ±‚è·¯å¾‘ | VARCHAR(500) | ğŸ“ | APIè·¯å¾‘ |
| status_code | HTTPç‹€æ…‹ç¢¼ | INT | ğŸ“ | 200/404/500ç­‰ |
| elapsed_time_ms | è«‹æ±‚è™•ç†æ™‚é–“ï¼ˆæ¯«ç§’ï¼‰ | NUMERIC(10,2) | ğŸ“ | åŸ·è¡Œæ™‚é–“ |
| user_id | ä½¿ç”¨è€…ID | UUID | ğŸ“ | ç›¸é—œä½¿ç”¨è€… |
| remote_addr | é ç«¯IPä½å€ | INET | ğŸ“ | å®¢æˆ¶ç«¯IP |
| user_agent | ä½¿ç”¨è€…ä»£ç†å­—ä¸² | TEXT | ğŸ“ | ç€è¦½å™¨UA |
| module | æ¨¡çµ„åç¨± | VARCHAR(100) | ğŸ“ | Pythonæ¨¡çµ„ |
| function | å‡½æ•¸åç¨± | VARCHAR(100) | ğŸ“ | å‡½æ•¸åç¨± |
| line | è¡Œè™Ÿ | INT | ğŸ“ | ç¨‹å¼ç¢¼è¡Œè™Ÿ |
| exception_type | ç•°å¸¸é¡å‹ | VARCHAR(100) | ğŸ“ | Exceptioné¡åˆ¥ |
| exception_message | ç•°å¸¸è¨Šæ¯ | TEXT | ğŸ“ | éŒ¯èª¤è¨Šæ¯ |
| exception_traceback | ç•°å¸¸å †ç–Šè¿½è¹¤ | JSONB | ğŸ“ | å®Œæ•´Tracebackï¼ˆJSONï¼‰ |
| extra_fields | é¡å¤–æ¬„ä½ | JSONB | ğŸ“ | è‡ªå®šç¾©æ¬„ä½ï¼ˆJSONï¼‰ |
| created_date | æ—¥èªŒæ—¥æœŸ | DATE | ğŸ”„ | æ—¥æœŸï¼ˆç”¨æ–¼åˆ†å€ï¼‰ |

**ç´¢å¼•**:
- `idx_app_log_timestamp` - æ™‚é–“æˆ³ç´¢å¼•
- `idx_app_log_level` - æ—¥èªŒç­‰ç´šç´¢å¼•
- `idx_app_log_user_id` - ä½¿ç”¨è€…ç´¢å¼•
- `idx_app_log_created_date_timestamp` - è¤‡åˆç´¢å¼•ï¼ˆæ—¥æœŸ+æ™‚é–“ï¼‰

---

### 19. auditlogï¼ˆç¨½æ ¸æ—¥èªŒï¼‰

**ç”¨é€”**: æ“ä½œå¯©è¨ˆè¿½è¹¤
**V3.1 æ–°å¢**: å®Œæ•´çš„ Audit Trail åŠŸèƒ½

| è‹±æ–‡æ¬„ä½å | ä¸­æ–‡åç¨± | è³‡æ–™é¡å‹ | æ¨™è¨˜ | èªªæ˜ |
|-----------|---------|---------|------|------|
| log_id | æ—¥èªŒUUID | UUID | ğŸ”‘ğŸ”„ | è‡ªå‹•ç”Ÿæˆ UUID |
| user_id | ä½¿ç”¨è€…ID | UUID | ğŸ”— | å¤–éµè‡³Userè¡¨ |
| action | æ“ä½œå‹•ä½œ | VARCHAR(100) | ğŸ“ | CREATE/UPDATE/DELETEç­‰ |
| resource_type | è³‡æºé¡å‹ | VARCHAR(50) | ğŸ“ | Application/Itemç­‰ |
| resource_id | è³‡æºID | VARCHAR(100) | ğŸ“ | è¢«æ“ä½œè³‡æºçš„ID |
| old_values | ä¿®æ”¹å‰èˆŠå€¼ | JSON | ğŸ“ | ä¿®æ”¹å‰çš„è³‡æ–™ï¼ˆJSONï¼‰ |
| new_values | ä¿®æ”¹å¾Œæ–°å€¼ | JSON | ğŸ“ | ä¿®æ”¹å¾Œçš„è³‡æ–™ï¼ˆJSONï¼‰ |
| ip_address | IPä½å€ | VARCHAR(45) | ğŸ“ | æ“ä½œè€…IP |
| user_agent | ä½¿ç”¨è€…ä»£ç†å­—ä¸² | TEXT | ğŸ“ | ç€è¦½å™¨UA |
| success | æ“ä½œæ˜¯å¦æˆåŠŸ | BOOLEAN | ğŸ“ | æ“ä½œçµæœ |
| error_message | éŒ¯èª¤è¨Šæ¯ | TEXT | ğŸ“ | å¤±æ•—åŸå›  |
| date_created | å»ºç«‹æ™‚é–“ | TIMESTAMP | ğŸ”„ | æ“ä½œæ™‚é–“ |

**å¤–éµé—œè¯**:
- `user_id` â†’ `User.id`

**ç´¢å¼•**:
- `idx_audit_user_id` - ä½¿ç”¨è€…ç´¢å¼•
- `idx_audit_action` - æ“ä½œå‹•ä½œç´¢å¼•
- `idx_audit_resource` - è³‡æºé¡å‹+IDè¤‡åˆç´¢å¼•
- `idx_audit_date_created` - å»ºç«‹æ™‚é–“ç´¢å¼•

---

## public Schema - NSN æœå°‹ç³»çµ±ï¼ˆ15å€‹è¡¨ + 5å€‹è¦–åœ–ï¼‰

> **Schema**: `public`  
> **èªªæ˜**: NSN ç”³ç·¨æœå°‹ç³»çµ±ï¼Œæä¾› NATO æ¨™æº–ç‰©å“åç¨±æŸ¥è©¢èˆ‡ç”³ç·¨æµç¨‹  
> **å»ºç«‹æ—¥æœŸ**: 2025-12-08/09  
> **è³‡æ–™é‡**: è¶…é 50 è¬ç­†è¨˜éŒ„

### ç³»çµ±æ¶æ§‹

NSN æœå°‹ç³»çµ±ç”±ä»¥ä¸‹å­ç³»çµ±çµ„æˆï¼š

1. **FSG/FSC åˆ†é¡ç³»çµ±**ï¼šè¯é‚¦è£œçµ¦ç¾¤çµ„èˆ‡åˆ†é¡
2. **NATO H6 ç³»çµ±**ï¼šNATO æ¨™æº–ç‰©å“åç¨±ï¼ˆ6 ä½ç·¨ç¢¼ï¼‰
3. **INC ç³»çµ±**ï¼šç‰©å“åç¨±ä»£ç¢¼ï¼ˆ5 ä½ç·¨ç¢¼ï¼‰
4. **FIIG ç³»çµ±**ï¼šè¯é‚¦ç‰©å“è­˜åˆ¥æŒ‡å—ï¼ˆ4 ä½ç·¨ç¢¼ï¼‰
5. **MRC ç³»çµ±**ï¼šç‰©æ–™éœ€æ±‚ä»£ç¢¼èˆ‡ç”³ç·¨è¦æ ¼
6. **å›æ‡‰ç³»çµ±**ï¼šç”³ç·¨è¡¨å–®å›æ‡‰é¸é …

### è³‡æ–™è¡¨è©³ç´°èªªæ˜

#### FSG/FSC åˆ†é¡ç³»çµ±

**20. fsgï¼ˆFSG è¯é‚¦è£œçµ¦ç¾¤çµ„ï¼‰**
- **ä¸»éµ**: fsg_code (VARCHAR(2))
- **è¨˜éŒ„æ•¸**: 80 ç­†
- **èªªæ˜**: è¯é‚¦è£œçµ¦ç¾¤çµ„åˆ†é¡ï¼ˆå¦‚ 58=é€šè¨Šè¨­å‚™ï¼‰

**21. fscï¼ˆFSC è¯é‚¦è£œçµ¦åˆ†é¡ï¼‰**
- **ä¸»éµ**: fsc_code (VARCHAR(4))
- **è¨˜éŒ„æ•¸**: ç´„ 650 ç­†
- **èªªæ˜**: è¯é‚¦è£œçµ¦åˆ†é¡ä»£ç¢¼ï¼ˆFSG ä¸‹çš„ç´°åˆ†é¡ï¼‰

**22. inc_fsc_xrefï¼ˆINC-FSC å°æ‡‰è¡¨ï¼‰**
- **è¤‡åˆä¸»éµ**: (inc_code, fsc_code)
- **è¨˜éŒ„æ•¸**: ç´„ 78,000 ç­†
- **èªªæ˜**: INC èˆ‡ FSC çš„å¤šå°å¤šå°æ‡‰é—œä¿‚

#### NATO H6 ç³»çµ±

**23. nato_h6_item_nameï¼ˆNATO H6 ç‰©å“åç¨±ï¼‰**
- **ä¸»éµ**: h6_code (VARCHAR(6))
- **è¨˜éŒ„æ•¸**: 60,698 ç­†
- **èªªæ˜**: NATO æ¨™æº–ç‰©å“åç¨±ä¸»æª”ï¼ˆå¦‚ 002001=BOLTï¼‰
- **æ¬„ä½**: h6_code, item_name_en, status_code, date_created, date_updated

**24. nato_h6_inc_xrefï¼ˆH6-INC å°æ‡‰è¡¨ï¼‰**
- **è¤‡åˆä¸»éµ**: (h6_code, inc_code)
- **è¨˜éŒ„æ•¸**: ç´„ 60,000 ç­†
- **èªªæ˜**: NATO H6 èˆ‡ INC çš„å°æ‡‰é—œä¿‚

#### INC ç³»çµ±

**25. incï¼ˆINC ç‰©å“åç¨±ä»£ç¢¼ï¼‰**
- **ä¸»éµ**: inc_code (VARCHAR(5))
- **è¨˜éŒ„æ•¸**: 79,865 ç­†ï¼ˆ69,179 active + 10,686 inactiveï¼‰
- **èªªæ˜**: ç‰©å“åç¨±ä»£ç¢¼ä¸»æª”ï¼ˆå¦‚ 00180=BOLTï¼‰
- **é‡è¦æ¬„ä½**: inc_code, noun, approved_item_name, status_code

**26. colloquial_inc_xrefï¼ˆä¿—èª-INC å°æ‡‰è¡¨ï¼‰**
- **è¤‡åˆä¸»éµ**: (colloquial_name, inc_code)
- **è¨˜éŒ„æ•¸**: ç´„ 142,000 ç­†
- **èªªæ˜**: ä¿—èª/åˆ¥åèˆ‡ INC çš„å°æ‡‰ï¼ˆæ”¯æ´æ¨¡ç³Šæœå°‹ï¼‰

#### FIIG ç³»çµ±

**27. fiigï¼ˆFIIG è­˜åˆ¥æŒ‡å—ï¼‰**
- **ä¸»éµ**: fiig_code (VARCHAR(4))
- **è¨˜éŒ„æ•¸**: ç´„ 2,900 ç­†
- **èªªæ˜**: è¯é‚¦ç‰©å“è­˜åˆ¥æŒ‡å—ï¼ˆå¦‚ A001ï¼‰

**28. fiig_inc_xrefï¼ˆFIIG-INC å°æ‡‰è¡¨ï¼‰**
- **è¤‡åˆä¸»éµ**: (fiig_code, inc_code)
- **è¨˜éŒ„æ•¸**: ç´„ 79,000 ç­†
- **èªªæ˜**: FIIG èˆ‡ INC çš„å°æ‡‰é—œä¿‚

#### MRC ç³»çµ±

**29. mrc_key_groupï¼ˆMRC ç¾¤çµ„ï¼‰**
- **ä¸»éµ**: key_group (VARCHAR(3))
- **è¨˜éŒ„æ•¸**: ç´„ 50 ç­†
- **èªªæ˜**: MRC ç¾¤çµ„åˆ†é¡ï¼ˆå¦‚ 001, 002...ï¼‰

**30. mrcï¼ˆMRC éœ€æ±‚ä»£ç¢¼ï¼‰**
- **ä¸»éµ**: mrc_code (VARCHAR(5))
- **è¨˜éŒ„æ•¸**: ç´„ 16,700 ç­†
- **èªªæ˜**: ç‰©æ–™éœ€æ±‚ä»£ç¢¼ä¸»æª”ï¼Œå®šç¾©ç”³ç·¨è¡¨å–®å¿…å¡«æ¬„ä½
- **é‡è¦æ¬„ä½**: mrc_code, characteristic, key_group, seq_no

**31. fiig_inc_mrc_xrefï¼ˆFIIG-INC-MRC å°æ‡‰è¡¨ï¼‰â­**
- **ä¸»éµ**: id (SERIAL)
- **è¨˜éŒ„æ•¸**: 1,702,274 ç­†ï¼ˆ170 è¬ç­†ï¼Œæ ¸å¿ƒè¡¨ï¼‰
- **èªªæ˜**: FIIG-INC-MRC ä¸‰å…ƒå°æ‡‰ï¼Œå®šç¾©æ¯å€‹å“é …çš„ç”³ç·¨éœ€æ±‚
- **é‡è¦æ¬„ä½**: fiig_code, inc_code, mrc_code, required_flag

**32. mrc_reply_table_xrefï¼ˆMRC-å›æ‡‰è¡¨å°æ‡‰ï¼‰**
- **è¤‡åˆä¸»éµ**: (mrc_code, reply_table_id)
- **è¨˜éŒ„æ•¸**: ç´„ 72,000 ç­†
- **èªªæ˜**: MRC èˆ‡å›æ‡‰é¸é …çš„å°æ‡‰é—œä¿‚

#### å›æ‡‰ç³»çµ±

**33. reply_tableï¼ˆå›æ‡‰è¡¨ä¸»æª”ï¼‰**
- **ä¸»éµ**: id (SERIAL)
- **è¨˜éŒ„æ•¸**: 160,591 ç­†
- **èªªæ˜**: ç”³ç·¨è¡¨å–®å›æ‡‰é¸é …ä¸»æª”ï¼ˆä¸‹æ‹‰é¸å–®å…§å®¹ï¼‰
- **é‡è¦æ¬„ä½**: reply, meaning, reply_code

#### å…¶ä»–

**34. mode_code_editï¼ˆæ¨¡å¼ç¢¼ç·¨è¼¯æŒ‡å—ï¼‰**
- **ä¸»éµ**: mode_code (VARCHAR(2))
- **è¨˜éŒ„æ•¸**: ç´„ 20 ç­†
- **èªªæ˜**: æ¨¡å¼ç¢¼ç·¨è¼¯è¦å‰‡ï¼ˆå¦‚ 01=æ–°å¢, 02=ä¿®æ”¹ï¼‰

### æŸ¥è©¢è¦–åœ–

**v_h6_inc_mapping**
- å°‡ NATO H6 è½‰æ›ç‚º INC çš„å®Œæ•´è¦–åœ–
- åŒ…å« H6 åç¨±ã€INC ä»£ç¢¼ã€æ ¸å‡†åç¨±ç­‰

**v_inc_fiig_mapping**
- å°‡ INC è½‰æ›ç‚º FIIG çš„å®Œæ•´è¦–åœ–
- æ”¯æ´ INCâ†’FIIG æŸ¥è©¢

**v_fiig_mrc_requirements**
- é¡¯ç¤ºæ¯å€‹ FIIG-INC çµ„åˆçš„ MRC éœ€æ±‚
- ç”¨æ–¼ç”Ÿæˆç”³ç·¨è¡¨å–®å¿…å¡«æ¬„ä½æ¸…å–®

**v_mrc_reply_options**
- é¡¯ç¤ºæ¯å€‹ MRC çš„å¯é¸å›æ‡‰é¸é …
- ç”¨æ–¼ç”Ÿæˆä¸‹æ‹‰é¸å–®å…§å®¹

**v_application_flow**
- ç«¯åˆ°ç«¯ç”³ç·¨æµç¨‹è¦–åœ–
- æ•´åˆ H6â†’INCâ†’FIIGâ†’MRCâ†’Reply çš„å®Œæ•´æµç¨‹

---

## è³‡æ–™è¡¨é—œè¯åœ–

### é›™ Schema æ¶æ§‹åœ–

```
sbir_equipment_db_v3 (PostgreSQL 16)
â”‚
â”œâ”€ web_app Schemaï¼ˆ19 å€‹è¡¨æ ¼ï¼‰
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”‚         è£å‚™ç®¡ç†ç³»çµ±ï¼ˆ13 å€‹è¡¨æ ¼ï¼‰                â”‚
â”‚  â”‚     (ä½¿ç”¨ date_created/date_updated)              â”‚
â”‚  â”‚                                                   â”‚
â”‚  â”‚  Supplier â”€â”¬â”€ item_number_xref â”€â”¬â”€ Item â­      â”‚
â”‚  â”‚            â”‚                      â”‚   â”œâ”€ Item_Equipment_Ext
â”‚  â”‚            â””â”€ SupplierCodeApp    â”‚   â”œâ”€ Item_Material_Ext
â”‚  â”‚                                   â”‚   â”œâ”€ item_emu3000_maintenance_ext
â”‚  â”‚                                   â”‚   â”œâ”€ BOM â†’ BOM_LINE (è‡ªæˆ‘é—œè¯)
â”‚  â”‚                                   â”‚   â”œâ”€ MRC
â”‚  â”‚                                   â”‚   â”œâ”€ Item_Document_xref â†’ TechnicalDocument
â”‚  â”‚                                   â”‚   â””â”€ CIDApplication
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                           â”‚
â”‚                           â”‚ item_uuid (FK) â­
â”‚                           â†“
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”‚         Web æ‡‰ç”¨ç³»çµ±ï¼ˆ6 å€‹è¡¨æ ¼ï¼‰                 â”‚
â”‚  â”‚     (çµ±ä¸€ä½¿ç”¨ date_created/date_updated)          â”‚
â”‚  â”‚                                                   â”‚
â”‚  â”‚  User â”€â”¬â”€ UserSession                            â”‚
â”‚  â”‚        â”œâ”€ Application â”€â”€â”€â”¬â”€ ApplicationAttachmentâ”‚
â”‚  â”‚        â”‚                  â””â”€â†’ Item (FK) â­       â”‚
â”‚  â”‚        â”œâ”€ AuditLog                               â”‚
â”‚  â”‚        â””â”€ ApplicationLog                         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚
â””â”€ public Schemaï¼ˆ15 å€‹è¡¨æ ¼ + 5 å€‹è¦–åœ–ï¼‰
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚      NSN ç”³ç·¨æœå°‹ç³»çµ±ï¼ˆ50 è¬ç­†è³‡æ–™ï¼‰             â”‚
   â”‚     (ä½¿ç”¨ date_created/date_updated)              â”‚
   â”‚                                                   â”‚
   â”‚  FSG â”€â†’ FSC â†â”€ inc_fsc_xref â”€â†’ INC â­           â”‚
   â”‚                                    â†•              â”‚
   â”‚                         nato_h6_inc_xref          â”‚
   â”‚                                    â†•              â”‚
   â”‚                            NATO H6 Item Name      â”‚
   â”‚                                                   â”‚
   â”‚  INC â†â”€ colloquial_inc_xref (ä¿—èªæŸ¥è©¢)           â”‚
   â”‚   â†•                                               â”‚
   â”‚  fiig_inc_xref â”€â†’ FIIG                           â”‚
   â”‚   â†•                                               â”‚
   â”‚  fiig_inc_mrc_xref (170è¬ç­†) â”€â†’ MRC â†â”€ mrc_key_group
   â”‚                                   â†•               â”‚
   â”‚                        mrc_reply_table_xref       â”‚
   â”‚                                   â†•               â”‚
   â”‚                              reply_table          â”‚
   â”‚                                                   â”‚
   â”‚  æŸ¥è©¢è¦–åœ–ï¼ˆ5 å€‹ï¼‰:                                â”‚
   â”‚  - v_h6_inc_mapping                               â”‚
   â”‚  - v_inc_fiig_mapping                             â”‚
   â”‚  - v_fiig_mrc_requirements                        â”‚
   â”‚  - v_mrc_reply_options                            â”‚
   â”‚  - v_application_flow                             â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Application è¡¨çš„é—œè¯é‡é»

```
Application (ç”³ç·¨å–®ä¸»è¡¨)
â”œâ”€ user_id â†’ User (ç”³è«‹äºº)
â”œâ”€ item_uuid â†’ Item (é—œè¯å“é …) â­ æ ¸å¿ƒæ•´åˆé»
â”œâ”€ nsn_filled_by â†’ User (NSNå¡«å¯«äºº)
â”œâ”€ closed_by â†’ User (çµæ¡ˆäºº)
â””â”€ 1:N â†’ ApplicationAttachment (é™„ä»¶)
```

---

## æ™‚é–“æˆ³å‘½åç­–ç•¥

### çµ±ä¸€å‘½åè¦ç¯„

**æ‰€æœ‰è¡¨ï¼ˆ34å€‹ï¼‰**: çµ±ä¸€ä½¿ç”¨ `date_created`, `date_updated`

**web_app Schema - è£å‚™ç®¡ç†è¡¨ï¼ˆ13å€‹ï¼‰**:
- Supplier, Item, Item_Equipment_Ext, Item_Material_Ext, item_emu3000_maintenance_ext
- BOM, BOM_LINE, MRC, item_number_xref
- TechnicalDocument, Item_Document_xref
- SupplierCodeApplication, CIDApplication

**web_app Schema - Web æ‡‰ç”¨è¡¨ï¼ˆ6å€‹ï¼‰**:
- User, Application, ApplicationAttachment, UserSession
- ApplicationLogï¼ˆç‰¹æ®Šï¼šä½¿ç”¨ `timestamp` + `created_date`ï¼‰
- AuditLog

**public Schema - NSN æœå°‹ç³»çµ±è¡¨ï¼ˆ15å€‹ï¼‰**:
- fsg, fsc, inc_fsc_xref
- nato_h6_item_name, nato_h6_inc_xref
- inc, colloquial_inc_xref
- fiig, fiig_inc_xref
- mrc_key_group, mrc, fiig_inc_mrc_xref, mrc_reply_table_xref
- reply_table, mode_code_edit

**å„ªé»**:
- æ•´å€‹è³‡æ–™åº«ä¿æŒå‘½åä¸€è‡´æ€§
- ç°¡åŒ–è§¸ç™¼å™¨å‡½æ•¸é‚è¼¯
- é™ä½é–‹ç™¼äººå“¡è¨˜æ†¶è² æ“”

### è§¸ç™¼å™¨å‡½æ•¸çµ±ä¸€è™•ç†

```sql
CREATE OR REPLACE FUNCTION update_date_updated_column()
RETURNS TRIGGER AS $$
BEGIN
    -- æ‰€æœ‰è¡¨çµ±ä¸€ä½¿ç”¨ date_updated æ¬„ä½
    IF to_jsonb(NEW) ? 'date_updated' THEN
        NEW.date_updated = CURRENT_TIMESTAMP;
    END IF;
    RETURN NEW;
END;
$$ language 'plpgsql';
```

---

## EMU3000 è³‡æ–™åŒ¯å…¥è¦å‰‡

### ä¾†æºè³‡æ–™
- **è·¯å¾‘**: `@Database/data/EMU3000/EMU 3000 ç¶­ä¿®ç‰©æ–™æ¸…å–®/5å¹´ç¶­è­·/01 æ¸…æ½”å¡Šå–®å…ƒ--C20ã€C21--OK/æ¸…æ½”å¡Šå–®å…ƒC20ã€C21å¤§ä¿®æ–™ä»¶æ¸…å–®--60å€‹æœˆ.xlsx` (ç¯„ä¾‹)
- **æ ¼å¼**: Excel æª”æ¡ˆ

### è­˜åˆ¥é‚è¼¯

#### 1. ç¸½æˆ (Assembly)
- **è­˜åˆ¥ç‰¹å¾µ**: `Part` æ¬„ä½ç‚º `NULL` æˆ–ç‰¹å®šæ ¼å¼ (å¦‚ "II...")
- **ä¸»è¦æ¬„ä½å°æ‡‰**:
    - `Item number` -> `Item.item_code` (è­˜åˆ¥ç¢¼)
    - `Name` -> `Item.item_name_zh` / `Item.item_name_en`
    - `Quantity` -> ä¸é©ç”¨æ–¼ Item è¡¨ï¼Œå¯èƒ½ç”¨æ–¼ä¸Šå±¤ BOM
- **Item é¡å‹**: `FG` (Finished Good) æˆ– `SEMI` (Semi-finished)

#### 2. æ¬¡ç¸½æˆ/å…ƒä»¶ (Sub-assembly / Component)
- **è­˜åˆ¥ç‰¹å¾µ**: `Part` æ¬„ä½ç‚ºåºè™Ÿ (å¦‚ "1", "2"...)
- **ä¸»è¦æ¬„ä½å°æ‡‰**:
    - `Item number` -> `Item.item_code`
    - `Name` -> `Item.item_name_zh` / `Item.item_name_en`
    - `Quantity` -> `BOM_LINE.qty_per` (å–®ä½ç”¨é‡)
    - `Unit` -> `BOM_LINE.uom`
- **Item é¡å‹**: `SEMI` æˆ– `RM` (Raw Material)

### BOM çµæ§‹å»ºç«‹

1. **å»ºç«‹ç¸½æˆ Item**:
   - å°‡ Excel è¡¨é ­è³‡è¨Šæˆ– `Part` ç‚º NULL çš„è¡Œå»ºç«‹ç‚ºç¸½æˆ Itemã€‚
   - å»ºç«‹ä¸€å€‹å°æ‡‰çš„ `BOM` è¨˜éŒ„ï¼Œé—œè¯åˆ°æ­¤ Itemã€‚

2. **å»ºç«‹æ¬¡ç¸½æˆ Item**:
   - å°‡ `Part` ç‚ºåºè™Ÿçš„æ¯ä¸€è¡Œå»ºç«‹ç‚ºæ¬¡ç¸½æˆ/å…ƒä»¶ Itemã€‚

3. **å»ºç«‹ BOM é—œè¯**:
   - åœ¨ `BOM_LINE` è¡¨ä¸­å»ºç«‹è¨˜éŒ„ã€‚
   - `bom_uuid`: æŒ‡å‘ç¸½æˆçš„ BOMã€‚
   - `component_item_uuid`: æŒ‡å‘æ¬¡ç¸½æˆ/å…ƒä»¶çš„ Itemã€‚
   - `qty_per`: å¡«å…¥ Excel ä¸­çš„ `Quantity`ã€‚
   - `line_no`: å¡«å…¥ Excel ä¸­çš„ `Part` (åºè™Ÿ)ã€‚

---

## ğŸ“Š æ•ˆèƒ½èˆ‡æ“´å±•æ€§

### âœ… å„ªé»
- **é›™ Schema æ¶æ§‹**ï¼šåŠŸèƒ½éš”é›¢èˆ‡å®‰å…¨åˆ†é›¢
- **æ”¯æ´å¤šå±¤ç´š BOM çµæ§‹**ï¼šItem è‡ªæˆ‘é—œè¯è¨­è¨ˆ
- **BOM ç‰ˆæœ¬æ§åˆ¶**ï¼šæ­·å²è¿½æº¯èˆ‡ç‰ˆæœ¬ç®¡ç†
- **æ“´å±•è¡¨æ¸›å°‘ NULL æ¬„ä½**ï¼šæå‡å„²å­˜æ•ˆç‡
- **UUID ä¸»éµ**ï¼šé˜²æ­¢ ID çŒœæ¸¬ï¼Œæ”¯æ´åˆ†æ•£å¼ç³»çµ±
- **å®Œæ•´çš„ä½¿ç”¨è€…ç®¡ç†ç³»çµ±**ï¼šæ¬Šé™æ§åˆ¶èˆ‡å¯©è¨ˆè¿½è¹¤
- **è»Ÿåˆªé™¤æ”¯æ´**ï¼šdeleted_at æ¬„ä½ä¿ç•™æ­·å²è¨˜éŒ„
- **NSN æœå°‹ç³»çµ±**ï¼š50 è¬ç­†è³‡æ–™ï¼Œæ”¯æ´é«˜æ•ˆæŸ¥è©¢
- **æŸ¥è©¢è¦–åœ–**ï¼š5 å€‹è¦–åœ–ç°¡åŒ–è¤‡é›œæŸ¥è©¢
- **é©åˆå¤§é‡è³‡æ–™æ“´å±•**ï¼šæ”¯æ´ç™¾è¬ç´šè³‡æ–™é‡

### ğŸ“ˆ ç´¢å¼•ç­–ç•¥
- **å¤–éµæ¬„ä½ç´¢å¼•**ï¼šæ‰€æœ‰ FK éƒ½æœ‰ç´¢å¼•
- **å¸¸ç”¨æŸ¥è©¢æ¬„ä½ç´¢å¼•**ï¼šstatus, code, name ç­‰
- **éƒ¨åˆ†ç´¢å¼•**ï¼šdeleted_at IS NULL æ¸›å°‘ç´¢å¼•å¤§å°
- **è¤‡åˆç´¢å¼•**ï¼šæ”¯æ´å¤šæ¬„ä½æŸ¥è©¢æ¨¡å¼
- **NSN ç³»çµ±ç´¢å¼•**ï¼šfiig_inc_mrc_xref æœ‰å®Œæ•´ç´¢å¼•ç­–ç•¥
- **è¦–åœ–æ•ˆèƒ½**ï¼š5 å€‹è¦–åœ–é å…ˆå®šç¾©å¸¸ç”¨æŸ¥è©¢

### ğŸ” å®‰å…¨èˆ‡éš”é›¢
- **Schema éš”é›¢**ï¼šweb_app èˆ‡ public åŠŸèƒ½åˆ†é›¢
- **æ¬Šé™æ§åˆ¶**ï¼šå¯é‡å°ä¸åŒ schema è¨­å®šä¸åŒæ¬Šé™
- **è³‡æ–™å®‰å…¨**ï¼šå¯†ç¢¼é›œæ¹Šã€è»Ÿåˆªé™¤ã€å¯©è¨ˆæ—¥èªŒ

---

**æ–‡ä»¶ç‰ˆæœ¬**: 3.2.0
**æœ€å¾Œæ›´æ–°**: 2025-12-09
**ç¶­è­·å–®ä½**: SBIR å°ˆæ¡ˆåœ˜éšŠ
**è³‡æ–™è¡¨ç¸½æ•¸**: âœ… 34 å€‹è¡¨ï¼ˆweb_app: 19 + public: 15ï¼‰+ 5 å€‹è¦–åœ–
**Schema æ¶æ§‹**: é›™ schemaï¼ˆweb_app è£å‚™ç®¡ç† + public æœå°‹ç³»çµ±ï¼‰
**ç¸½è³‡æ–™é‡**: è¶…é 220 è¬ç­†è¨˜éŒ„ï¼ˆweb_app: ç´„ 1,000 ç­† + public: ç´„ 220 è¬ç­†ï¼‰
**ä¸»è¦è®Šæ›´**: Schema é‡æ§‹ + NSN ç³»çµ±æ•´åˆï¼ˆ15 è¡¨ + 5 è¦–åœ– + 50 è¬ç­†è³‡æ–™ï¼‰
