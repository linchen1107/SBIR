# SBIR è£å‚™è³‡æ–™åº«é—œè¯èªªæ˜

## ğŸ“‘ ç›®éŒ„

- [è³‡æ–™åº«æ¦‚è¦½](#è³‡æ–™åº«æ¦‚è¦½)
- [ä¸»éµè¨­è¨ˆèªªæ˜](#ä¸»éµè¨­è¨ˆèªªæ˜)
  - [è‡ªå‹•ç·¨è™Ÿä¸»éµ (SERIAL)](#è‡ªå‹•ç·¨è™Ÿä¸»éµ-serial)
  - [æ¥­å‹™é‚è¼¯ä¸»éµ (è‡ªç„¶éµ)](#æ¥­å‹™é‚è¼¯ä¸»éµ-è‡ªç„¶éµ)
  - [è¤‡åˆä¸»éµ](#è¤‡åˆä¸»éµ)
- [Item (å“é …ä¸»æª”) - æ ¸å¿ƒæ¨ç´](#item-å“é …ä¸»æª”---æ ¸å¿ƒæ¨ç´)
  - [Item è¡¨çš„åŸºæœ¬è³‡è¨Š](#item-è¡¨çš„åŸºæœ¬è³‡è¨Š)
- [Item çš„é—œè¯é—œä¿‚è©³è§£](#item-çš„é—œè¯é—œä¿‚è©³è§£)
  - [1. Item â†’ ItemAttribute (1:1 é—œä¿‚)](#1-item--itemattribute-11-é—œä¿‚)
  - [2. Item â†’ ItemSpecification (1:N é—œä¿‚)](#2-item--itemspecification-1n-é—œä¿‚)
  - [3. Item â†’ PartNumber â† Supplier (N:M é—œä¿‚)](#3-item--partnumber--supplier-nm-é—œä¿‚)
  - [4. Item â† EquipmentItem â†’ Equipment (N:M é—œä¿‚)](#4-item--equipmentitem--equipment-nm-é—œä¿‚)
  - [5. Item â† BOM â†’ Equipment (éšå±¤å¼ç‰©æ–™æ¸…å–®)](#5-item--bom--equipment-éšå±¤å¼ç‰©æ–™æ¸…å–®)
  - [6. Item â† ApplicationFormDetail â†’ ApplicationForm](#6-item--applicationformdetail--applicationform)
- [Item è¡¨çš„é—œè¯ç¸½çµ](#item-è¡¨çš„é—œè¯ç¸½çµ)
- [æ•´é«”è¨­è¨ˆç†å¿µ](#æ•´é«”è¨­è¨ˆç†å¿µ)
- [é—œéµè¨­è¨ˆæ±ºç­–](#é—œéµè¨­è¨ˆæ±ºç­–)

---

## è³‡æ–™åº«æ¦‚è¦½

SBIR è£å‚™è³‡æ–™åº«æ˜¯ç‚ºæµ·è»è£å‚™ç®¡ç†ç³»çµ±è¨­è¨ˆçš„é—œè¯å¼è³‡æ–™åº«ï¼ŒåŒ…å« 12 å€‹ä¸»è¦è³‡æ–™è¡¨ï¼š

1. **Supplier** - å» å•†ä¸»æª”
2. **Equipment** - è£å‚™ä¸»æª”
3. **Item** - å“é …ä¸»æª” â­ (æ ¸å¿ƒè¡¨)
4. **ItemAttribute** - å“é …å±¬æ€§æª”
5. **PartNumber** - é›¶ä»¶è™Ÿç¢¼æª”
6. **EquipmentItem** - è£å‚™å“é …é—œè¯æª”
7. **BOM** - BOMçµæ§‹æª”
8. **TechnicalDocument** - æŠ€è¡“æ–‡ä»¶æª”
9. **EquipmentSpecification** - è£å‚™ç‰¹æ€§èªªæ˜æª”
10. **ItemSpecification** - å“é …è¦æ ¼æª”
11. **ApplicationForm** - ç”³ç·¨å–®æª”
12. **ApplicationFormDetail** - ç”³ç·¨å–®æ˜ç´°æª”

---

## ä¸»éµè¨­è¨ˆèªªæ˜

### è‡ªå‹•ç·¨è™Ÿä¸»éµ (SERIAL)

ä»¥ä¸‹è¡¨ä½¿ç”¨è‡ªå‹•éå¢çš„æ•¸å­— ID ä½œç‚ºä¸»éµï¼š

- **supplier** â†’ `supplier_id` ğŸ”‘
- **bom** â†’ `bom_id` ğŸ”‘
- **partnumber** â†’ `part_number_id` ğŸ”‘
- **itemspecification** â†’ `spec_id` ğŸ”‘
- **technicaldocument** â†’ `document_id` ğŸ”‘
- **applicationform** â†’ `form_id` ğŸ”‘
- **applicationformdetail** â†’ `detail_id` ğŸ”‘

**ç‚ºä»€éº¼ç”¨è‡ªå‹•ç·¨è™Ÿï¼Ÿ**
- é¿å…è¼¸å…¥éŒ¯èª¤
- ç¢ºä¿å”¯ä¸€æ€§
- æå‡æŸ¥è©¢æ•ˆèƒ½
- é©åˆé »ç¹æ–°å¢çš„è³‡æ–™

---

### æ¥­å‹™é‚è¼¯ä¸»éµ (è‡ªç„¶éµ)

ä»¥ä¸‹è¡¨ä½¿ç”¨æ¥­å‹™é‚è¼¯è­˜åˆ¥ç¢¼ä½œç‚ºä¸»éµï¼š

- **equipment** â†’ `equipment_id` ğŸ”‘ï¼ˆå–®æ©Ÿè­˜åˆ¥ç¢¼ CIDï¼‰
- **item** â†’ `item_id` ğŸ”‘ï¼ˆå“é …è­˜åˆ¥ç¢¼ï¼‰
- **itemattribute** â†’ `item_id` ğŸ”‘ï¼ˆä¸€å°ä¸€é—œä¿‚ï¼‰

**ç‚ºä»€éº¼ç”¨æ¥­å‹™éµï¼Ÿ**
- èˆ‡å¤–éƒ¨ç³»çµ±æ•´åˆ
- ç›´æ¥æŸ¥è©¢ï¼ˆä¸éœ€è¦å…ˆæŸ¥ IDï¼‰
- ç¬¦åˆè»äº‹è¦ç¯„
- æ¥­å‹™äººå“¡å®¹æ˜“ç†è§£

---

### è¤‡åˆä¸»éµ

ä»¥ä¸‹è¡¨ä½¿ç”¨è¤‡åˆä¸»éµï¼ˆå¤šå€‹æ¬„ä½çµ„åˆï¼‰ï¼š

- **equipmentitem** â†’ `(equipment_id, item_id)` ğŸ”‘ğŸ”‘
- **equipmentspecification** â†’ `(equipment_id, spec_seq_no)` ğŸ”‘ğŸ”‘

**ç‚ºä»€éº¼ç”¨è¤‡åˆéµï¼Ÿ**
- è¡¨é”å¤šå°å¤šé—œä¿‚
- è¡¨é”ä¸€å°å¤šåºåˆ—é—œä¿‚
- ç¢ºä¿å”¯ä¸€æ€§ç´„æŸ

---

## Item (å“é …ä¸»æª”) - æ ¸å¿ƒæ¨ç´

Item è¡¨æ˜¯æ•´å€‹è³‡æ–™åº«çš„**æ ¸å¿ƒè¡¨**ï¼Œå¹¾ä¹æ‰€æœ‰å…¶ä»–è¡¨éƒ½ç›´æ¥æˆ–é–“æ¥èˆ‡å®ƒé—œè¯ã€‚

### Item è¡¨çš„åŸºæœ¬è³‡è¨Š

**ä¸»éµï¼š** `item_id` (å“é …è­˜åˆ¥ç¢¼ï¼Œä¾‹å¦‚ï¼šYETL22090)

**ä¸»è¦æ¬„ä½ï¼š**
- `item_id` - å“é …è­˜åˆ¥ç¢¼ï¼ˆä¸»éµï¼‰
- `nsn` - åœ‹å®¶æ–™è™Ÿ
- `item_category` - çµ±ä¸€çµ„é¡åˆ¥
- `item_name_zh` / `item_name_en` - ä¸­è‹±æ–‡å“å
- `weapon_system_code` - æ­¦å™¨ç³»çµ±ä»£è™Ÿ
- `accounting_code` - æœƒè¨ˆç·¨è™Ÿ
- `unit_price_usd` - ç¾é‡‘å–®åƒ¹
- `has_stock` - æœ‰ç„¡æ–™è™Ÿ

---

## Item çš„é—œè¯é—œä¿‚è©³è§£

### 1. Item â†’ ItemAttribute (1:1 é—œä¿‚)

```
Item.item_id â”€â”€â”€â”€â”€â†’ ItemAttribute.item_id
   (ä¸»éµ)              (ä¸»éµ + å¤–éµ)
```

**é—œè¯é¡å‹ï¼š** ä¸€å°ä¸€ (One-to-One)

**å¯¦éš›æ„ç¾©ï¼š**
- **æ¯å€‹å“é …åªæœ‰ä¸€çµ„å±¬æ€§è³‡æ–™**
- ItemAttribute æ˜¯ Item çš„å»¶ä¼¸ï¼Œè¨˜éŒ„æ›´è©³ç´°çš„å±¬æ€§

**ç‚ºä»€éº¼è¦åˆ†æˆå…©å¼µè¡¨ï¼Ÿ**
1. **æ¬„ä½å¤ªå¤š**ï¼šItemAttribute æœ‰ 14 å€‹å±¬æ€§æ¬„ä½
2. **æŸ¥è©¢æ•ˆèƒ½**ï¼šä¸æ˜¯æ¯æ¬¡éƒ½éœ€è¦æŸ¥è©¢æ‰€æœ‰å±¬æ€§
3. **è³‡æ–™æ­£è¦åŒ–**ï¼šç¬¦åˆç¬¬ä¸€æ­£è¦åŒ–ï¼ˆ1NFï¼‰

**å¯¦ä¾‹èªªæ˜ï¼š**
```sql
-- Item è¡¨
item_id: YETL22090
item_name_zh: è²åŠ›é›»è©±ç³»çµ±
unit_price_usd: 530000.00

-- ItemAttribute è¡¨ï¼ˆåŒä¸€å€‹ item_idï¼‰
item_id: YETL22090
storage_life_code: 0
security_code: U
consumable_code: M
... (æ›´å¤šå±¬æ€§)
```

**ä½¿ç”¨æƒ…å¢ƒï¼š**
```sql
-- æŸ¥è©¢å“é …åŸºæœ¬è³‡è¨Šï¼ˆä¸éœ€è¦å±¬æ€§ï¼‰
SELECT * FROM Item WHERE item_id = 'YETL22090';

-- æŸ¥è©¢å“é …å®Œæ•´è³‡è¨Šï¼ˆåŒ…å«å±¬æ€§ï¼‰
SELECT i.*, ia.*
FROM Item i
LEFT JOIN ItemAttribute ia ON i.item_id = ia.item_id
WHERE i.item_id = 'YETL22090';
```

---

### 2. Item â†’ ItemSpecification (1:N é—œä¿‚)

```
Item.item_id â”€â”€â”€â”€â”€â†’ ItemSpecification.item_id
   (ä¸»éµ)              (å¤–éµ)

ä¸€å€‹å“é …           å¤šå€‹è¦æ ¼èªªæ˜
YETL22090   â†’     è¦æ ¼1: å‹å¼ = TA-4CI
                â†’     è¦æ ¼2: é›»å£“ = 24V
                â†’     è¦æ ¼3: åŠŸç‡ = 500W
```

**é—œè¯é¡å‹ï¼š** ä¸€å°å¤š (One-to-Many)

**å¯¦éš›æ„ç¾©ï¼š**
- **ä¸€å€‹å“é …å¯ä»¥æœ‰å¤šçµ„è¦æ ¼èªªæ˜**ï¼ˆæœ€å¤š 5 çµ„ï¼‰
- æ¯çµ„è¦æ ¼æœ‰ä¸­è‹±æ–‡èªªæ˜å’Œç­”æ¡ˆ

**ç‚ºä»€éº¼éœ€è¦é€™å€‹é—œè¯ï¼Ÿ**
1. **å½ˆæ€§éœ€æ±‚**ï¼šä¸åŒå“é …çš„è¦æ ¼éœ€æ±‚ä¸åŒ
2. **å¤šèªè¨€æ”¯æ´**ï¼šä¸­è‹±æ–‡è¦æ ¼èªªæ˜
3. **å¯æ“´å……æ€§**ï¼šå¯éš¨æ™‚å¢åŠ æ–°è¦æ ¼è€Œä¸æ”¹è¡¨çµæ§‹

**å¯¦ä¾‹èªªæ˜ï¼š**
```sql
-- Item è¡¨
item_id: YETL22088
item_name_zh: 12ç«™å£æ›å¼è²åŠ›é›»è©±

-- ItemSpecification è¡¨ï¼ˆå¤šç­†è¦æ ¼ï¼‰
spec_id: 1, item_id: YETL22088, spec_no: 1
spec_en: "Number of Stations"
spec_zh: "ç«™æ•¸"
answer_en: "12"
answer_zh: "12ç«™"

spec_id: 2, item_id: YETL22088, spec_no: 2
spec_en: "Voltage"
spec_zh: "é›»å£“"
answer_en: "24V"
answer_zh: "24ä¼ç‰¹"
```

**ä½¿ç”¨æƒ…å¢ƒï¼š**
```sql
-- æŸ¥è©¢æŸå“é …çš„æ‰€æœ‰è¦æ ¼
SELECT spec_no, spec_zh, answer_zh
FROM ItemSpecification
WHERE item_id = 'YETL22088'
ORDER BY spec_no;

-- çµæœï¼š
-- 1 | ç«™æ•¸ | 12ç«™
-- 2 | é›»å£“ | 24V
```

---

### 3. Item â†’ PartNumber â† Supplier (N:M é—œä¿‚)

```
Item.item_id â†â”€â”€â”€â”€ PartNumber.item_id
                     â†“
                   supplier_id
                     â†“
              Supplier.supplier_id

ä¸€å€‹å“é …           å¤šå€‹é›¶ä»¶è™Ÿ           ä¾†è‡ªä¸åŒå» å•†
YETL22090   â†’     TA-4CI        â†’     1973B (å» å•†A)
            â†’     TA-4CI-ALT    â†’     5678C (å» å•†B)
            â†’     123-456       â†’     9012D (å» å•†C)
```

**é—œè¯é¡å‹ï¼š** å¤šå°å¤š (Many-to-Many)

**å¯¦éš›æ„ç¾©ï¼š**
- **ä¸€å€‹å“é …å¯ä»¥æœ‰å¤šå€‹é›¶ä»¶è™Ÿï¼ˆP/Nï¼‰**
- **ä¸€å€‹é›¶ä»¶è™Ÿå°æ‡‰ä¸€å€‹å“é …å’Œä¸€å€‹å» å•†**
- **åŒä¸€å“é …å¯ä»¥æœ‰ä¾†è‡ªä¸åŒå» å•†çš„ä¸åŒé›¶ä»¶è™Ÿ**

**ç‚ºä»€éº¼éœ€è¦ PartNumber ä¸­ä»‹è¡¨ï¼Ÿ**
1. **æ›¿ä»£æ–™ä»¶ç®¡ç†**ï¼šä¸»è¦é›¶ä»¶è™Ÿã€æ¬¡è¦é›¶ä»¶è™Ÿã€æ›¿ä»£é›¶ä»¶è™Ÿ
2. **å¤šå» å•†ä¾†æº**ï¼šä¸åŒå» å•†å¯èƒ½ä½¿ç”¨ä¸åŒçš„é›¶ä»¶è™Ÿ
3. **è¿½æº¯ç®¡ç†**ï¼šè¨˜éŒ„é›¶ä»¶è™Ÿçš„ç²å¾—ç¨‹åº¦å’Œä¾†æº

**å¯¦ä¾‹èªªæ˜ï¼š**
```sql
-- Item è¡¨
item_id: YETL22090
item_name_zh: è²åŠ›é›»è©±ç³»çµ±

-- PartNumber è¡¨ï¼ˆå¤šç­†é›¶ä»¶è™Ÿï¼‰
part_number_id: 1
part_number: 'TA-4CI'
item_id: YETL22090
supplier_id: 2 (å°æ‡‰åˆ° Supplier è¡¨)
is_primary: true  â† ä¸»è¦é›¶ä»¶è™Ÿ

part_number_id: 2
part_number: 'TA-4CI-ALT'
item_id: YETL22090
supplier_id: 3 (å¦ä¸€å€‹å» å•†)
is_primary: false  â† æ›¿ä»£é›¶ä»¶è™Ÿ

-- Supplier è¡¨
supplier_id: 2
cage_code: '1973B'
supplier_name_zh: 'å» å•†åç¨±'
```

**ä½¿ç”¨æƒ…å¢ƒï¼š**
```sql
-- æŸ¥è©¢æŸå“é …çš„æ‰€æœ‰é›¶ä»¶è™ŸåŠå…¶å» å•†
SELECT
    p.part_number,
    p.is_primary,
    s.cage_code,
    s.supplier_name_zh
FROM PartNumber p
JOIN Supplier s ON p.supplier_id = s.supplier_id
WHERE p.item_id = 'YETL22090';

-- çµæœï¼š
-- TA-4CI      | true  | 1973B | å» å•†A
-- TA-4CI-ALT  | false | 5678C | å» å•†B
```

---

### 4. Item â† EquipmentItem â†’ Equipment (N:M é—œä¿‚)

```
Equipment.equipment_id â†â”€â”€â”€ EquipmentItem.equipment_id
                              â†“
                           item_id
                              â†“
                       Item.item_id

ä¸€å€‹è£å‚™              è£å‚™åŒ…å«å“ªäº›å“é …          å“é …
27NYE0823     â†’      YETL22088 x 1 EA    â†’   12ç«™é›»è©±
(è²åŠ›é›»è©±ç³»çµ±)  â†’      YETL22087 x 1 EA    â†’   24ç«™é›»è©±
```

**é—œè¯é¡å‹ï¼š** å¤šå°å¤š (Many-to-Many)

**å¯¦éš›æ„ç¾©ï¼š**
- **ä¸€å€‹è£å‚™åŒ…å«å¤šå€‹å“é …ï¼ˆé›¶é™„ä»¶ï¼‰**
- **ä¸€å€‹å“é …å¯ä»¥ç”¨æ–¼å¤šå€‹è£å‚™**
- **è¨˜éŒ„è£ç½®æ•¸é‡å’Œå–®ä½**

**ç‚ºä»€éº¼éœ€è¦ EquipmentItem ä¸­ä»‹è¡¨ï¼Ÿ**
1. **BOM ç®¡ç†**ï¼šè¨˜éŒ„è£å‚™çš„çµ„æˆé›¶é™„ä»¶
2. **æ•¸é‡è¿½è¹¤**ï¼šæ¯å€‹å“é …åœ¨è©²è£å‚™ä¸Šçš„è£ç½®æ•¸é‡
3. **ç¶­ä¿®ç®¡ç†**ï¼šçŸ¥é“å“ªäº›è£å‚™ä½¿ç”¨äº†å“ªäº›å“é …

**å¯¦ä¾‹èªªæ˜ï¼š**
```sql
-- Equipment è¡¨
equipment_id: '27NYE0823'
equipment_name_zh: 'è²åŠ›é›»è©±ç³»çµ±'

-- EquipmentItem è¡¨ï¼ˆè£å‚™åŒ…å«çš„å“é …ï¼‰
equipment_id: '27NYE0823'
item_id: 'YETL22088'
installation_qty: 1
installation_unit: 'EA'

equipment_id: '27NYE0823'
item_id: 'YETL22087'
installation_qty: 1
installation_unit: 'EA'

-- Item è¡¨
item_id: 'YETL22088'
item_name_zh: '12ç«™å£æ›å¼è²åŠ›é›»è©±'

item_id: 'YETL22087'
item_name_zh: '24ç«™å£æ›å¼è²åŠ›é›»è©±'
```

**ä½¿ç”¨æƒ…å¢ƒï¼š**
```sql
-- æŸ¥è©¢æŸè£å‚™åŒ…å«å“ªäº›å“é …
SELECT
    i.item_id,
    i.item_name_zh,
    ei.installation_qty,
    ei.installation_unit
FROM EquipmentItem ei
JOIN Item i ON ei.item_id = i.item_id
WHERE ei.equipment_id = '27NYE0823';

-- çµæœï¼š
-- YETL22088 | 12ç«™å£æ›å¼è²åŠ›é›»è©± | 1 | EA
-- YETL22087 | 24ç«™å£æ›å¼è²åŠ›é›»è©± | 1 | EA

-- åå‘æŸ¥è©¢ï¼šæŸå“é …ç”¨æ–¼å“ªäº›è£å‚™
SELECT
    e.equipment_id,
    e.equipment_name_zh,
    ei.installation_qty
FROM EquipmentItem ei
JOIN Equipment e ON ei.equipment_id = e.equipment_id
WHERE ei.item_id = 'YETL22088';

-- çµæœï¼š
-- 27NYE0823 | è²åŠ›é›»è©±ç³»çµ± | 1
-- 27NYE0999 | å¦ä¸€å€‹ç³»çµ±   | 2
```

---

### 5. Item â† BOM â†’ Equipment (éšå±¤å¼ç‰©æ–™æ¸…å–®)

```
Equipment.equipment_id â†â”€â”€â”€ BOM.parent_equipment_id
                              â†“
                           child_item_id
                              â†“
                       Item.item_id

çˆ¶è£å‚™                     BOMçµæ§‹                å­å“é …
27NYE0823     â†’    éœ€è¦ YETL22088 x 1    â†’    12ç«™é›»è©±
(ä¸»ç³»çµ±)      â†’    éœ€è¦ YETL22087 x 1    â†’    24ç«™é›»è©±
              â†’    äº¤è²¨æ™‚é–“ï¼š30å¤©
              â†’    MTBFï¼š10000å°æ™‚
```

**é—œè¯é¡å‹ï¼š** å¤šå°å¤š (Many-to-Many) + éšå±¤çµæ§‹

**å¯¦éš›æ„ç¾©ï¼š**
- **çˆ¶è£å‚™åŒ…å«å“ªäº›å­å“é …**
- **è¨˜éŒ„è©³ç´°çš„ BOM è³‡è¨Š**ï¼ˆæ•¸é‡ã€äº¤è²¨æ™‚é–“ã€å¯é åº¦ï¼‰
- **æ”¯æ´éšå±¤å¼çµæ§‹**ï¼ˆå­å“é …å¯èƒ½ä¹Ÿæ˜¯è£å‚™ï¼Œå½¢æˆæ¨¹ç‹€çµæ§‹ï¼‰

**BOM vs EquipmentItem çš„å·®ç•°ï¼š**

| ç‰¹æ€§ | EquipmentItem | BOM |
|------|---------------|-----|
| **ç›®çš„** | è¨˜éŒ„è£å‚™çµ„æˆ | å®Œæ•´ç‰©æ–™æ¸…å–®ç®¡ç† |
| **è³‡è¨Š** | è£ç½®æ•¸é‡ã€å–®ä½ | æ•¸é‡ã€äº¤è²¨æ™‚é–“ã€MTBFã€MTTRã€å¯ä¿®æ€§ |
| **ç”¨é€”** | è£å‚™æŸ¥è©¢ | æ¡è³¼ã€ç¶­ä¿®ã€å¯é åº¦åˆ†æ |
| **è¤‡é›œæ€§** | ç°¡å–®é—œè¯ | æ”¯æ´éšå±¤çµæ§‹ |

**å¯¦ä¾‹èªªæ˜ï¼š**
```sql
-- Equipment è¡¨
equipment_id: '27NYE0823'
equipment_name_zh: 'è²åŠ›é›»è©±ç³»çµ±'

-- BOM è¡¨
bom_id: 1
parent_equipment_id: '27NYE0823'
child_item_id: 'YETL22088'
quantity: 1
unit: 'EA'
delivery_time: 30  (å¤©)
mtbf_hours: 10000
mttr_hours: 2.5
is_repairable: 'Y'

-- Item è¡¨
item_id: 'YETL22088'
item_name_zh: '12ç«™å£æ›å¼è²åŠ›é›»è©±'
unit_price_usd: 1200.00
```

**ä½¿ç”¨æƒ…å¢ƒï¼š**
```sql
-- æŸ¥è©¢æŸè£å‚™çš„å®Œæ•´ BOMï¼ˆå«æˆæœ¬ã€å¯é åº¦ï¼‰
SELECT
    i.item_id,
    i.item_name_zh,
    b.quantity,
    i.unit_price_usd,
    (b.quantity * i.unit_price_usd) as total_cost,
    b.mtbf_hours,
    b.is_repairable
FROM BOM b
JOIN Item i ON b.child_item_id = i.item_id
WHERE b.parent_equipment_id = '27NYE0823';

-- çµæœï¼š
-- YETL22088 | 12ç«™é›»è©± | 1 | 1200.00 | 1200.00 | 10000 | Y
-- YETL22087 | 24ç«™é›»è©± | 1 | 1200.00 | 1200.00 | 15000 | Y
-- ç¸½æˆæœ¬ï¼š2400.00
```

---

### 6. Item â† ApplicationFormDetail â†’ ApplicationForm

```
ApplicationForm.form_id â†â”€â”€â”€ ApplicationFormDetail.form_id
                               â†“
                            item_id
                               â†“
                         Item.item_id

ç”³ç·¨å–®                    æ˜ç´°                    å“é …
YETL-2024-001   â†’    é …æ¬¡1: YETL22090    â†’    è²åŠ›é›»è©±ç³»çµ±
(ç”³è«‹è¡¨å–®)       â†’    é …æ¬¡2: YETL22088    â†’    12ç«™é›»è©±
                â†’    é …æ¬¡3: YETL22087    â†’    24ç«™é›»è©±
```

**é—œè¯é¡å‹ï¼š** ä¸€å°å¤š (One-to-Many)ï¼Œå…¸å‹çš„ã€Œå–®é ­-æ˜ç´°ã€çµæ§‹

**å¯¦éš›æ„ç¾©ï¼š**
- **ç”³ç·¨å–®ï¼ˆå–®é ­ï¼‰åŒ…å«å¤šå€‹å“é …ï¼ˆæ˜ç´°ï¼‰**
- **è¿½è¹¤å“é …çš„ç”³è«‹æµç¨‹**
- **è¨˜éŒ„æ–‡ä»¶ä¾†æº**

**å¯¦ä¾‹èªªæ˜ï¼š**
```sql
-- ApplicationForm è¡¨ï¼ˆå–®é ­ï¼‰
form_id: 1
form_no: 'YETL-2024-001'
submit_status: 'å¾…é€'
applicant_accounting_code: 'B21317'

-- ApplicationFormDetail è¡¨ï¼ˆæ˜ç´°ï¼‰
detail_id: 1
form_id: 1
item_seq: 1
item_id: 'YETL22090'
document_source: 'è²åŠ›é›»è©±-ILSåŠAPL_ç‰ˆ4.1'

detail_id: 2
form_id: 1
item_seq: 2
item_id: 'YETL22088'
document_source: 'è²åŠ›é›»è©±-ILSåŠAPL_ç‰ˆ4.1'

-- Item è¡¨
item_id: 'YETL22090'
item_name_zh: 'è²åŠ›é›»è©±ç³»çµ±'
```

**ä½¿ç”¨æƒ…å¢ƒï¼š**
```sql
-- æŸ¥è©¢æŸç”³ç·¨å–®åŒ…å«å“ªäº›å“é …
SELECT
    afd.item_seq,
    i.item_id,
    i.item_name_zh,
    i.unit_price_usd
FROM ApplicationFormDetail afd
JOIN Item i ON afd.item_id = i.item_id
WHERE afd.form_id = 1
ORDER BY afd.item_seq;

-- çµæœï¼š
-- 1 | YETL22090 | è²åŠ›é›»è©±ç³»çµ±      | 530000.00
-- 2 | YETL22088 | 12ç«™å£æ›å¼è²åŠ›é›»è©± | 1200.00
-- 3 | YETL22087 | 24ç«™å£æ›å¼è²åŠ›é›»è©± | 1200.00
```

---

## Item è¡¨çš„é—œè¯ç¸½çµ

### é—œè¯ç¸½çµåœ–

```
                    ItemAttribute (1:1)
                          â†‘
                          |
    Supplier â† PartNumber â†’ ITEM â† ItemSpecification (1:N)
                          â†“
                    EquipmentItem
                          â†“
                      Equipment
                          â†‘
                         BOM
                          â†‘
                    Equipment (éšå±¤)

                         ITEM
                          â†“
               ApplicationFormDetail
                          â†“
                  ApplicationForm
```

### ç‚ºä»€éº¼ Item æ˜¯æ ¸å¿ƒè¡¨ï¼Ÿ

1. **æ¥­å‹™æ ¸å¿ƒ**ï¼šå“é …æ˜¯è£å‚™ç®¡ç†çš„åŸºæœ¬å–®ä½
2. **æ•¸æ“šæ¨ç´**ï¼šå¹¾ä¹æ‰€æœ‰æ¥­å‹™éƒ½åœç¹å“é …å±•é–‹
3. **é—œè¯å»£æ³›**ï¼šé€£æ¥å» å•†ã€è£å‚™ã€ç”³ç·¨å–®ç­‰æ‰€æœ‰ä¸»è¦å¯¦é«”
4. **æŸ¥è©¢é »ç¹**ï¼šå¤§éƒ¨åˆ†æŸ¥è©¢éƒ½éœ€è¦ JOIN Item è¡¨

---

## æ•´é«”è¨­è¨ˆç†å¿µ

### 1. æ­£è¦åŒ–è¨­è¨ˆ
- é¿å…è³‡æ–™é‡è¤‡
- æå‡ç¶­è­·æ€§
- ç¢ºä¿è³‡æ–™ä¸€è‡´æ€§

### 2. æ¥­å‹™é‚è¼¯å„ªå…ˆ
- ä½¿ç”¨æ¥­å‹™é‚è¼¯éµï¼ˆCID, NIINï¼‰ä¾¿æ–¼èˆ‡å¤–éƒ¨ç³»çµ±æ•´åˆ
- ç¬¦åˆè»äº‹è¦ç¯„èˆ‡ç¾æœ‰æµç¨‹

### 3. å½ˆæ€§èˆ‡æ“´å……æ€§
- å¤šå°å¤šé—œä¿‚æ”¯æ´è¤‡é›œçš„è£å‚™-å“é …é—œè¯
- è¦æ ¼ã€ç‰¹æ€§ã€æ–‡ä»¶ä½¿ç”¨ä¸€å°å¤šè¨­è¨ˆï¼Œå¯ç„¡é™æ“´å……

### 4. å®Œæ•´æ€§ç´„æŸ
- å¤–éµç´„æŸç¢ºä¿è³‡æ–™å®Œæ•´æ€§
- é˜²æ­¢å­¤å…’è³‡æ–™ï¼ˆæ²’æœ‰çˆ¶è¨˜éŒ„çš„å­è¨˜éŒ„ï¼‰

### 5. æŸ¥è©¢æ•ˆèƒ½è€ƒé‡
- å»ºç«‹é©ç•¶ç´¢å¼•ï¼ˆequipment_id, item_id, cage_code ç­‰ï¼‰
- åˆ†è¡¨è¨­è¨ˆï¼ˆItem èˆ‡ ItemAttributeï¼‰æ¸›å°‘å–®è¡¨æ¬„ä½æ•¸

---

## é—œéµè¨­è¨ˆæ±ºç­–

| è¨­è¨ˆæ±ºç­– | ç†ç”± |
|---------|------|
| Item ä½¿ç”¨ `item_id` ä½œç‚ºä¸»éµ | èˆ‡å¤–éƒ¨ç³»çµ±ï¼ˆNIINï¼‰ä¸€è‡´ï¼Œç›´æ¥æŸ¥è©¢ |
| Equipment ä½¿ç”¨ `equipment_id` (CID) | è»äº‹æ¨™æº–è­˜åˆ¥ç¢¼ï¼Œå”¯ä¸€ä¸”æœ‰æ„ç¾© |
| ItemAttribute åˆ†é–‹å»ºè¡¨ | æ¬„ä½å¤ªå¤šï¼Œåˆ†è¡¨æå‡æ•ˆèƒ½ |
| PartNumber ä½¿ç”¨ä¸‰å€‹å¤–éµ | è¿½è¹¤ã€Œå“é …-é›¶ä»¶è™Ÿ-å» å•†ã€ä¸‰æ–¹é—œä¿‚ |
| EquipmentItem ä½¿ç”¨è¤‡åˆä¸»éµ | é˜²æ­¢é‡è¤‡é—œè¯ï¼Œç¢ºä¿ä¸€å°ä¸€è£å‚™-å“é …çµ„åˆ |
| BOM åŒæ™‚åƒç…§ Equipment å’Œ Item | æ”¯æ´éšå±¤å¼ BOM çµæ§‹ |

---