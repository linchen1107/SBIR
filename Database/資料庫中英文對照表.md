# SBIR è£å‚™è³‡æ–™åº«ä¸­è‹±æ–‡å°ç…§è¡¨ (V2.0 é‡æ§‹ç‰ˆ)

## ğŸ“Š è³‡æ–™åº«è³‡è¨Š
- **è³‡æ–™åº«åç¨±**: sbir_equipment_db
- **ç‰ˆæœ¬**: V2.0 (é‡æ§‹ç‰ˆ)
- **ç”¨é€”**: æµ·è»è£å‚™ç®¡ç†ç³»çµ±
- **ç·¨ç¢¼**: UTF8
- **å»ºç«‹æ—¥æœŸ**: 2025-11-11
- **è³‡æ–™ä¾†æº**: é›»ç¬›ç³»çµ±å„Mè¡¨
- **æ¶æ§‹ç‰¹é»**: ä»¥ Equipment ç‚ºä¸­å¿ƒçš„ä¸‰å¤§ä¸»è¡¨è¨­è¨ˆ

---

## ğŸ“‹ æ¬„ä½å°ç…§èªªæ˜åœ–ä¾‹

- ğŸ”‘ = ä¸»éµ (Primary Key)
- ğŸ”— = å¤–éµ (Foreign Key)
- â­ = å¿…å¡«æ¬„ä½ (Required)
- ğŸ“ = é¸å¡«æ¬„ä½ (Optional)
- ğŸ”„ = è‡ªå‹•ç”¢ç”Ÿ (Auto Generated)

---

## ğŸ“‘ ç›®éŒ„
- [è³‡æ–™è¡¨ç¸½è¦½](#è³‡æ–™è¡¨ç¸½è¦½)
- [V2.0 é‡æ§‹è®Šæ›´èªªæ˜](#v20-é‡æ§‹è®Šæ›´èªªæ˜)
- [ç¬¬ä¸€éšæ®µï¼šä¸‰å¤§ä¸»è¡¨](#ç¬¬ä¸€éšæ®µä¸‰å¤§ä¸»è¡¨)
  - [1. Supplier (å» å•†ä¸»æª”)](#1-supplier-å» å•†ä¸»æª”)
  - [2. Equipment (è£å‚™ä¸»æª”)](#2-equipment-è£å‚™ä¸»æª”)
  - [3. Item (å“é …ä¸»æª”)](#3-item-å“é …ä¸»æª”)
- [ç¬¬äºŒéšæ®µï¼šé—œè¯è¡¨](#ç¬¬äºŒéšæ®µé—œè¯è¡¨)
  - [4. Part_Number_xref (é›¶ä»¶è™Ÿç¢¼é—œè¯æª”)](#4-part_number_xref-é›¶ä»¶è™Ÿç¢¼é—œè¯æª”)
  - [5. Equipment_Item_xref (è£å‚™å“é …é—œè¯æª”)](#5-equipment_item_xref-è£å‚™å“é …é—œè¯æª”)
- [ç¬¬ä¸‰éšæ®µï¼šè¼”åŠ©è³‡æ–™](#ç¬¬ä¸‰éšæ®µè¼”åŠ©è³‡æ–™)
  - [6. TechnicalDocument (æŠ€è¡“æ–‡ä»¶æª”)](#6-technicaldocument-æŠ€è¡“æ–‡ä»¶æª”)
  - [7. EquipmentSpecification (è£å‚™ç‰¹æ€§èªªæ˜æª”)](#7-equipmentspecification-è£å‚™ç‰¹æ€§èªªæ˜æª”)
  - [8. ItemSpecification (å“é …è¦æ ¼æª”)](#8-itemspecification-å“é …è¦æ ¼æª”)
  - [9. ApplicationForm (ç”³ç·¨å–®æª”)](#9-applicationform-ç”³ç·¨å–®æª”)
  - [10. ApplicationFormDetail (ç”³ç·¨å–®æ˜ç´°æª”)](#10-applicationformdetail-ç”³ç·¨å–®æ˜ç´°æª”)

---

## è³‡æ–™è¡¨ç¸½è¦½

| ç·¨è™Ÿ | è‹±æ–‡è¡¨å | ä¸­æ–‡åç¨± | ä¸»éµé¡å‹ | ç”¨é€” |
|------|---------|---------|---------|------|
| **ä¸‰å¤§ä¸»è¡¨** ||||
| 1 | Supplier | å» å•†ä¸»æª” â­ | SERIAL | ä¾›æ‡‰å•†/è£½é€ å•†åŸºæœ¬è³‡æ–™ |
| 2 | Equipment | è£å‚™ä¸»æª” â­ | VARCHAR(50) | è‰¦è‰‡è£å‚™åŸºæœ¬è³‡æ–™ï¼ˆæ ¸å¿ƒè¡¨ï¼‰ |
| 3 | Item | å“é …ä¸»æª” â­ | VARCHAR(20) | å“é …åŸºæœ¬è³‡æ–™+å±¬æ€§ï¼ˆæ ¸å¿ƒè¡¨ï¼‰ |
| **é—œè¯è¡¨** ||||
| 4 | Part_Number_xref | é›¶ä»¶è™Ÿç¢¼é—œè¯æª” | SERIAL | å“é …-é›¶ä»¶è™Ÿ-å» å•†å¤šå°å¤šé—œè¯ |
| 5 | Equipment_Item_xref | è£å‚™å“é …é—œè¯æª” | è¤‡åˆéµ | è£å‚™-å“é …å¤šå°å¤šé—œè¯+å¯é åº¦è³‡æ–™ |
| 6 | Equipment_Document_xref | è£å‚™æ–‡ä»¶é—œè¯æª” | è¤‡åˆéµ | è£å‚™-æŠ€è¡“æ–‡ä»¶å¤šå°å¤šé—œè¯ |
| **è¼”åŠ©è³‡æ–™** ||||
| 7 | TechnicalDocument | æŠ€è¡“æ–‡ä»¶æª” | SERIAL | æŠ€è¡“æ–‡ä»¶/æ‰‹å†Šä¸»æª”ï¼ˆç¨ç«‹ï¼‰ |
| 8 | EquipmentSpecification | è£å‚™ç‰¹æ€§èªªæ˜æª” | è¤‡åˆéµ | è£å‚™è¦æ ¼èªªæ˜ |
| 9 | ItemSpecification | å“é …è¦æ ¼æª” | SERIAL | å“é …è¦æ ¼èªªæ˜ |
| 10 | ApplicationForm | ç”³ç·¨å–®æª” | SERIAL | ç”³ç·¨å–®ä¸»æª” |
| 11 | ApplicationFormDetail | ç”³ç·¨å–®æ˜ç´°æª” | SERIAL | ç”³ç·¨å–®æ˜ç´° |

**ç¸½è¨ˆ**: 11 å€‹è³‡æ–™è¡¨ï¼ˆV1.0 ç‚º 12 å€‹è¡¨ï¼‰

---

## V2.0 é‡æ§‹è®Šæ›´èªªæ˜

### ğŸ”„ é‡æ§‹ç›®æ¨™
- âœ… ä»¥ Equipmentï¼ˆè£å‚™ï¼‰ç‚ºä¸­å¿ƒçš„è¨­è¨ˆæ¶æ§‹
- âœ… ç°¡åŒ–ç‚ºä¸‰å¤§ä¸»è¡¨ï¼šSupplier, Equipment, Item
- âœ… æ¸›å°‘ JOIN æ“ä½œï¼Œæå‡æŸ¥è©¢æ•ˆèƒ½
- âœ… çµ±ä¸€å‘½åè¦ç¯„ï¼ˆxref è¡¨ï¼‰

### ğŸ“¦ ä¸»è¦è®Šæ›´

#### 1. âŒ åˆªé™¤ BOM è¡¨ â†’ âœ… åˆä½µåˆ° Equipment_Item_xref
**åŸå› **:
- ä¸å†ä½¿ç”¨ Item-Item è‡ªé—œè¯
- æ”¹ç‚º Equipment-Item ç›´æ¥é—œè¯
- å¯é åº¦è³‡æ–™ï¼ˆMTBF, MTTR, æ•…éšœç‡ï¼‰ç§»è‡³ Equipment_Item_xref

**å½±éŸ¿**:
- Equipment_Item_xref æ–°å¢æ¬„ä½ï¼šdelivery_time, failure_rate_per_million, mtbf_hours, mttr_hours, is_repairable
- åˆªé™¤ BOM è¡¨çš„ç´¢å¼•å’Œè§¸ç™¼å™¨
- BOM ç›¸é—œæŸ¥è©¢æ”¹ç‚ºæŸ¥è©¢ Equipment_Item_xref

#### 2. âŒ åˆªé™¤ ItemAttribute è¡¨ â†’ âœ… åˆä½µåˆ° Item
**åŸå› **:
- 1:1 é—œä¿‚é€ æˆä¸å¿…è¦çš„ JOIN
- å±¬æ€§æ¬„ä½å¯ç›´æ¥å­˜æ–¼ Item ä¸»è¡¨

**å½±éŸ¿**:
- Item è¡¨æ–°å¢ 14 å€‹å±¬æ€§æ¬„ä½
- åˆªé™¤ ItemAttribute è¡¨åŠå…¶è§¸ç™¼å™¨
- æŸ¥è©¢æ•ˆèƒ½æå‡ï¼ˆç„¡éœ€ JOIN ItemAttributeï¼‰

#### 3. ğŸ”„ PartNumber â†’ Part_Number_xref
**åŸå› **:
- çµ±ä¸€å‘½åè¦ç¯„ï¼ˆæ‰€æœ‰å¤šå°å¤šé—œè¯è¡¨ä½¿ç”¨ _xref å¾Œç¶´ï¼‰

**å½±éŸ¿**:
- è¡¨åæ”¹è®Šï¼Œæ‰€æœ‰ç›¸é—œæŸ¥è©¢éœ€æ›´æ–°
- çµæ§‹ä¸è®Š

#### 4. âœ… æ–°å¢ Equipment_Document_xref â†’ TechnicalDocument æ”¹ç‚ºå¤šå°å¤š
**åŸå› **:
- å¯¦éš›æ¥­å‹™éœ€æ±‚ï¼šä¸€æœ¬æ‰‹å†Šï¼ˆå¦‚ç¶­ä¿®æ‰‹å†Šï¼‰å¯ä¾›å¤šå€‹åŒå‹è™Ÿè£å‚™å…±ç”¨
- TechnicalDocument åŸæœ¬æ˜¯ Equipment çš„ 1:N é—œä¿‚ï¼Œç¾æ”¹ç‚º N:M

**å½±éŸ¿**:
- TechnicalDocument ç§»é™¤ equipment_id å¤–éµæ¬„ä½
- æ–°å¢ Equipment_Document_xref é—œè¯è¡¨
- ä¸€æœ¬æ‰‹å†Šå¯å°æ‡‰å¤šå€‹è£å‚™ï¼Œæ¸›å°‘é‡è¤‡è³‡æ–™
- å¾ 10 å€‹è¡¨å¢åŠ åˆ° 11 å€‹è¡¨

---

## ç¬¬ä¸€éšæ®µï¼šä¸‰å¤§ä¸»è¡¨

### 1. Supplier (å» å•†ä¸»æª”)

**ç”¨é€”**: ç®¡ç†ä¾›æ‡‰å•†/è£½é€ å•†åŸºæœ¬è³‡æ–™
**ä¾†æº**: 19M, 20M

| è‹±æ–‡æ¬„ä½å | ä¸­æ–‡åç¨± | è³‡æ–™é¡å‹ | æ¨™è¨˜ | èªªæ˜ |
|-----------|---------|---------|------|------|
| supplier_id | å» å•†ID | SERIAL | ğŸ”‘ğŸ”„ | è‡ªå‹•ç·¨è™Ÿ |
| supplier_code | å» å•†ä¾†æºä»£è™Ÿ | VARCHAR(20) | UNIQUE | å» å•†ä»£ç¢¼ |
| cage_code | å» å®¶ç™»è¨˜ä»£è™Ÿ | VARCHAR(20) | UNIQUE | CAGE CODE |
| supplier_name_en | å» å®¶è£½é€ å•†ï¼ˆè‹±æ–‡ï¼‰ | VARCHAR(200) | â­ | è‹±æ–‡å» å•†åç¨± |
| supplier_name_zh | å» å•†ä¸­æ–‡åç¨± | VARCHAR(100) | ğŸ“ | ä¸­æ–‡å» å•†åç¨± |
| supplier_type | å» å•†é¡å‹ | VARCHAR(20) | ğŸ“ | è£½é€ å•†/ä»£ç†å•† |
| country_code | åœ‹å®¶ä»£ç¢¼ | VARCHAR(10) | ğŸ“ | åœ‹åˆ¥ä»£ç¢¼ |
| created_at | å»ºç«‹æ™‚é–“ | TIMESTAMP | ğŸ”„ | è¨˜éŒ„å»ºç«‹æ™‚é–“ |
| updated_at | æ›´æ–°æ™‚é–“ | TIMESTAMP | ğŸ”„ | è¨˜éŒ„æ›´æ–°æ™‚é–“ |

**ç´¢å¼•**:
- `idx_supplier_code` - å» å•†ä»£è™Ÿç´¢å¼•
- `idx_supplier_cage_code` - CAGE CODEç´¢å¼•

**ç´„æŸ**:
- `uk_cage_code` - CAGE CODE å”¯ä¸€ç´„æŸ

**è§¸ç™¼å™¨**:
- `update_supplier_updated_at` - è‡ªå‹•æ›´æ–°æ™‚é–“æˆ³

---

### 2. Equipment (è£å‚™ä¸»æª”)

**ç”¨é€”**: ç®¡ç†è‰¦è‰‡è£å‚™åŸºæœ¬è³‡æ–™ï¼ˆV2.0 æ ¸å¿ƒè¡¨ï¼‰
**ä¾†æº**: 2M_å–®ä½æ§‹å‹æª” + 3M_å–®æ©Ÿè³‡æ–™æª” (B010102, B010103)

| è‹±æ–‡æ¬„ä½å | ä¸­æ–‡æ¬„ä½åï¼ˆExcelï¼‰ | è³‡æ–™é¡å‹ | æ¨™è¨˜ | èªªæ˜ |
|-----------|------------------|---------|------|------|
| equipment_id | å–®æ©Ÿè­˜åˆ¥ç¢¼CID | VARCHAR(50) | ğŸ”‘â­ | CIDï¼ˆConfiguration Item IDï¼‰ |
| equipment_name_zh | è£å‚™ä¸­æ–‡åç¨± / ä¸­æ–‡åç¨± | VARCHAR(100) | â­ | è£å‚™ä¸­æ–‡å |
| equipment_name_en | è£å‚™è‹±æ–‡åç¨± / è‹±æ–‡åç¨± | VARCHAR(200) | â­ | è£å‚™è‹±æ–‡å |
| equipment_type | è£å‚™å½¢å¼ | VARCHAR(50) | ğŸ“ | è£å‚™å‹è™Ÿ/å‹å¼ |
| ship_type | è‰¦å‹ | VARCHAR(50) | ğŸ“ | é©ç”¨è‰¦å‹ |
| position | è£è¨­åœ°é» | VARCHAR(100) | ğŸ“ | å®‰è£ä½ç½® |
| parent_equipment_zh | ä¸Šå±¤é©ç”¨è£å‚™ä¸­æ–‡åç¨± | VARCHAR(100) | ğŸ“ | çˆ¶è£å‚™ä¸­æ–‡å |
| parent_equipment_en | ä¸Šå±¤é©ç”¨è£å‚™è‹±æ–‡åç¨± | VARCHAR(200) | ğŸ“ | çˆ¶è£å‚™è‹±æ–‡å |
| parent_cid | ä¸Šå±¤é©ç”¨è£å‚™å–®æ©Ÿè­˜åˆ¥ç¢¼CID | VARCHAR(50) | ğŸ“ | çˆ¶è£å‚™CID |
| eswbs_code | æ—ç¾¤çµæ§‹ç¢¼HSC | VARCHAR(20) | ğŸ“ | ESWBSï¼ˆäº”ç¢¼ï¼‰è£å‚™åˆ†é¡ç¢¼ |
| system_function_name | ç³»çµ±åŠŸèƒ½åç¨± | VARCHAR(200) | ğŸ“ | ç³»çµ±åŠŸèƒ½èªªæ˜ |
| installation_qty | åŒä¸€é¡å‹æ•¸é‡ | INT | ğŸ“ | å–®è‰¦è£ç½®æ•¸é‡ |
| total_installation_qty | å…¨è‰¦è£ç½®æ•¸ | INT | ğŸ“ | å…¨è‰¦ç¸½æ•¸ |
| maintenance_level | è£å‚™ç¶­ä¿®ç­‰ç´šä»£ç¢¼ | VARCHAR(10) | ğŸ“ | ç¶­ä¿®ç­‰ç´š |
| equipment_serial | è£å‚™åºè™Ÿ / è£å‚™è­˜åˆ¥ç·¨è™Ÿ | VARCHAR(50) | UNIQUE | è£å‚™åºè™Ÿ |
| created_at | å»ºç«‹æ™‚é–“ | TIMESTAMP | ğŸ”„ | è¨˜éŒ„å»ºç«‹æ™‚é–“ |
| updated_at | æ›´æ–°æ™‚é–“ | TIMESTAMP | ğŸ”„ | è¨˜éŒ„æ›´æ–°æ™‚é–“ |

**Excelæ¬„ä½å°ç…§è£œå……** (2M_å–®ä½æ§‹å‹æª”):
- ğŸ“Œ Excelã€Œæœƒè¨ˆç·¨è™Ÿã€â†’ å¯èƒ½ç”¨æ–¼é—œè¯æŸ¥è©¢
- ğŸ“Œ Excelã€Œçµ„é¡åˆ¥ã€â†’ å“é …è­˜åˆ¥è™Ÿå°æ‡‰
- ğŸ“Œ Excelã€Œæ§‹å‹å ±å‘Šå–®ä½ã€ã€ã€Œæ§‹å‹å ±å‘Šäººå“¡ã€â†’ æœªç´å…¥
- ğŸ“Œ Excelã€Œå®‰è£åœ–è™Ÿã€ã€ã€Œå®‰è£åœ–è™Ÿç‰ˆåˆ¥ã€ç­‰â†’ ç§»è‡³TechnicalDocumentè¡¨
- ğŸ“Œ Excelã€ŒVM_ESNé¡åˆ¥ã€ã€ã€ŒVM_ESNåºè™Ÿã€â†’ æœªç´å…¥æ­¤ç‰ˆæœ¬
- ğŸ“Œ Excelã€ŒPWSFè¨˜éŒ„ç‹€æ³ä»£ç¢¼ã€ç­‰æµç¨‹æ¬„ä½â†’ æœªç´å…¥

**ç´¢å¼•**:
- `idx_equipment_eswbs` - ESWBSç¢¼ç´¢å¼•
- `idx_equipment_ship_type` - è‰¦å‹ç´¢å¼•

**ç´„æŸ**:
- `uk_equipment_serial` - è£å‚™åºè™Ÿå”¯ä¸€ç´„æŸ

**è§¸ç™¼å™¨**:
- `update_equipment_updated_at` - è‡ªå‹•æ›´æ–°æ™‚é–“æˆ³

---

### 3. Item (å“é …ä¸»æª”) â­

**ç”¨é€”**: ç®¡ç†å“é …åŸºæœ¬è³‡æ–™+å±¬æ€§ï¼ˆV2.0 åˆä½µ ItemAttributeï¼‰
**ä¾†æº**: 19M_æ–™è™ŸåŸºæœ¬è³‡æ–™æª” (B010106)
**V2.0 è®Šæ›´**: åˆä½µåŸ ItemAttribute çš„ 14 å€‹å±¬æ€§æ¬„ä½

| è‹±æ–‡æ¬„ä½å | ä¸­æ–‡æ¬„ä½åï¼ˆExcelï¼‰ | è³‡æ–™é¡å‹ | æ¨™è¨˜ | èªªæ˜ |
|-----------|------------------|---------|------|------|
| **åŸºæœ¬æ¬„ä½** |||||
| item_id | å“é …è­˜åˆ¥è™Ÿ | VARCHAR(20) | ğŸ”‘â­ | NIIN/å“é …ID |
| item_id_last5 | å“é …è­˜åˆ¥ç¢¼ï¼ˆå¾Œäº”ç¢¼ï¼‰ | VARCHAR(5) | ğŸ“ | å¿«é€Ÿè­˜åˆ¥ç”¨ |
| nsn | NSN/åœ‹å®¶æ–™è™Ÿ | VARCHAR(20) | UNIQUE | NATO Stock Number |
| item_category | çµ±ä¸€çµ„é¡åˆ¥ | VARCHAR(10) | ğŸ“ | å“é …åˆ†é¡ä»£ç¢¼ |
| item_name_en | è‹±æ–‡å“å | VARCHAR(200) | â­ | å“é …è‹±æ–‡åç¨± |
| item_name_zh | ä¸­æ–‡å“å | VARCHAR(100) | â­ | å“é …ä¸­æ–‡åç¨± |
| item_name_zh_short | ä¸­æ–‡å“åï¼ˆ9å­—å…§ï¼‰ | VARCHAR(20) | ğŸ“ | ç°¡çŸ­ä¸­æ–‡å |
| item_code | å“åä»£è™Ÿ | VARCHAR(10) | â­ | INCå“åä»£è™Ÿ |
| fiig | FIIG | VARCHAR(10) | ğŸ“ | Federal Item Identification Guide |
| weapon_system_code | æ­¦å™¨ç³»çµ±ä»£è™Ÿ | VARCHAR(20) | â­ | æ‰€å±¬æ­¦å™¨ç³»çµ± |
| accounting_code | æœƒè¨ˆç·¨è™Ÿ | VARCHAR(20) | ğŸ“ | æœƒè¨ˆç§‘ç›®ä»£è™Ÿ |
| issue_unit | æ’¥ç™¼å–®ä½ | VARCHAR(10) | â­ | EA/SET/LOTç­‰ |
| unit_price_usd | ç¾é‡‘å–®åƒ¹ | DECIMAL(10,2) | â­ | å–®ä½åƒ¹æ ¼ï¼ˆç¾é‡‘ï¼‰ |
| package_qty | å–®ä½åŒ…è£é‡ | INT | â­ | åŒ…è£æ•¸é‡ |
| weight_kg | é‡é‡(KG) | DECIMAL(10,3) | ğŸ“ | å–®ä½é‡é‡ï¼ˆå…¬æ–¤ï¼‰ |
| has_stock | æœ‰ç„¡æ–™è™Ÿ | BOOLEAN | ğŸ“ | æ˜¯å¦æœ‰åº«å­˜æ–™è™Ÿ |
| **å±¬æ€§æ¬„ä½ï¼ˆåŸ ItemAttributeï¼‰** |||||
| storage_life_code | å­˜å„²å£½é™ä»£è™Ÿ | VARCHAR(10) | ğŸ“ | å„²å­˜æœŸé™ä»£ç¢¼ |
| file_type_code | æª”åˆ¥ä»£è™Ÿ | VARCHAR(10) | ğŸ“ | æª”æ¡ˆé¡å‹ä»£è™Ÿ |
| file_type_category | æª”åˆ¥å€åˆ† | VARCHAR(10) | ğŸ“ | æª”æ¡ˆåˆ†é¡ |
| security_code | æ©Ÿå¯†æ€§ä»£è™Ÿ | VARCHAR(10) | ğŸ“ | æ©Ÿå¯†ç­‰ç´šï¼ˆU/C/Sç­‰ï¼‰ |
| consumable_code | æ¶ˆè€—æ€§ä»£è™Ÿ | VARCHAR(10) | ğŸ“ | æ¶ˆè€—å“åˆ†é¡ï¼ˆM/Nç­‰ï¼‰ |
| spec_indicator | è¦æ ¼æŒ‡ç¤º | VARCHAR(10) | ğŸ“ | è¦æ ¼æŒ‡æ¨™ |
| navy_source | æµ·è»è»å“ä¾†æº | VARCHAR(50) | ğŸ“ | ä¾†æºèªªæ˜ |
| storage_type | å„²å­˜å‹å¼ | VARCHAR(20) | ğŸ“ | å„²å­˜æ–¹å¼ |
| life_process_code | è™•ç†ä»£è™Ÿ(å£½é™è™•ç†) | VARCHAR(10) | ğŸ“ | å£½é™ç®¡ç†ä»£è™Ÿ |
| manufacturing_capacity | è£½é€ èƒ½é‡ | VARCHAR(10) | ğŸ“ | è£½é€ èƒ½åŠ› |
| repair_capacity | ä¿®ç†èƒ½é‡ | VARCHAR(10) | ğŸ“ | ä¿®ç†èƒ½åŠ› |
| source_code | ä¾†æºä»£è™Ÿ | VARCHAR(10) | ğŸ“ | ä¾†æºåˆ†é¡ |
| project_code | å°ˆæ¡ˆä»£è™Ÿ | VARCHAR(20) | ğŸ“ | æ‰€å±¬å°ˆæ¡ˆ |
| **æ™‚é–“æˆ³æ¬„ä½** |||||
| created_at | å»ºç«‹æ™‚é–“ | TIMESTAMP | ğŸ”„ | è¨˜éŒ„å»ºç«‹æ™‚é–“æˆ³ |
| updated_at | æ›´æ–°æ™‚é–“ | TIMESTAMP | ğŸ”„ | è¨˜éŒ„æ›´æ–°æ™‚é–“æˆ³ |

**Excelæ¬„ä½å°ç…§è£œå……**:
- ğŸ“Œ Excelã€Œé …æ¬¡ã€â†’ ä¸å„²å­˜æ–¼æ­¤è¡¨ï¼ˆåƒ…ç”¨æ–¼è³‡æ–™åŒ¯å…¥ï¼‰
- ğŸ“Œ Excelã€Œç•°å‹•æ–¹å¼ã€â†’ ä¸å„²å­˜ï¼ˆç³»çµ±æ“ä½œæ¬„ä½ï¼‰
- ğŸ“Œ Excelã€ŒEICã€â†’ ä¸å„²å­˜æ–¼Itemè¡¨
- ğŸ“Œ Excelã€Œç”³è«‹å–®ä½æœƒè¨ˆç·¨è™Ÿã€â†’ å­˜æ–¼ApplicationFormè¡¨
- ğŸ“Œ Excelã€Œåƒè€ƒè™Ÿç¢¼(P/N)ã€ã€ã€Œåƒè€ƒè™Ÿç²å¾—ç¨‹åº¦ã€ã€ã€Œåƒè€ƒè™Ÿç²å¾—ä¾†æºã€â†’ å­˜æ–¼Part_Number_xrefè¡¨
- ğŸ“Œ Excelã€Œå» å•†ä¾†æºä»£è™Ÿã€ã€ã€Œå» å®¶ç™»è¨˜ä»£è™Ÿã€â†’ å­˜æ–¼Supplierè¡¨

**ç´¢å¼•**:
- `idx_item_nsn` - NSNç´¢å¼•
- `idx_item_category` - å“é …åˆ†é¡ç´¢å¼•
- `idx_item_accounting_code` - æœƒè¨ˆç·¨è™Ÿç´¢å¼•
- `idx_item_weapon_system_code` - æ­¦å™¨ç³»çµ±ä»£è™Ÿç´¢å¼•

**ç´„æŸ**:
- `chk_price` - åƒ¹æ ¼å¿…é ˆ â‰¥ 0
- `chk_weight` - é‡é‡å¿…é ˆ â‰¥ 0

**è§¸ç™¼å™¨**:
- `update_item_updated_at` - è‡ªå‹•æ›´æ–°æ™‚é–“æˆ³

**V2.0 è®Šæ›´èªªæ˜**:
- âœ… åˆä½µäº†åŸ ItemAttribute çš„ 14 å€‹å±¬æ€§æ¬„ä½
- âœ… ç°¡åŒ–æŸ¥è©¢ï¼ˆç„¡éœ€ JOIN ItemAttributeï¼‰
- âœ… æå‡æ•ˆèƒ½ï¼ˆæ¸›å°‘ä¸€æ¬¡ JOIN æ“ä½œï¼‰

---

## ç¬¬äºŒéšæ®µï¼šé—œè¯è¡¨

### 4. Part_Number_xref (é›¶ä»¶è™Ÿç¢¼é—œè¯æª”)

**ç”¨é€”**: å“é …-é›¶ä»¶è™Ÿ-å» å•†çš„å¤šå°å¤šé—œè¯
**ä¾†æº**: 20M_æ–™è™Ÿä¸»è¦ä»¶è™Ÿæª” (B010107) + 19Méƒ¨åˆ†æ¬„ä½
**V2.0 è®Šæ›´**: è¡¨åå¾ PartNumber æ”¹ç‚º Part_Number_xref

| è‹±æ–‡æ¬„ä½å | ä¸­æ–‡æ¬„ä½åï¼ˆExcelï¼‰ | è³‡æ–™é¡å‹ | æ¨™è¨˜ | èªªæ˜ |
|-----------|------------------|---------|------|------|
| part_number_id | ï¼ˆè‡ªå‹•ç·¨è™Ÿï¼‰ | SERIAL | ğŸ”‘ğŸ”„ | ç³»çµ±è‡ªå‹•ç”¢ç”Ÿ |
| part_number | é…ä»¶è™Ÿç¢¼ | VARCHAR(50) | â­ | P/N (Part Number) |
| item_id | å“é …è­˜åˆ¥ç¢¼ | VARCHAR(20) | ğŸ”—â­ | å¤–éµé€£çµè‡³Item |
| supplier_id | ï¼ˆé—œè¯å» å•†IDï¼‰ | INT | ğŸ”— | å¤–éµé€£çµè‡³Supplier |
| obtain_level | åƒè€ƒè™Ÿç²å¾—ç¨‹åº¦ | VARCHAR(10) | ğŸ“ | å–å¾—é›£æ˜“åº¦ |
| obtain_source | åƒè€ƒè™Ÿç²å¾—ä¾†æº | VARCHAR(50) | ğŸ“ | å–å¾—ç®¡é“ |
| is_primary | æ˜¯å¦ç‚ºä¸»è¦é›¶ä»¶è™Ÿ | BOOLEAN | ğŸ“ | ä¸»/æ›¿ä»£é›¶ä»¶è™Ÿï¼ˆé è¨­falseï¼‰ |
| created_at | å»ºç«‹æ™‚é–“ | TIMESTAMP | ğŸ”„ | è¨˜éŒ„å»ºç«‹æ™‚é–“ |
| updated_at | æ›´æ–°æ™‚é–“ | TIMESTAMP | ğŸ”„ | è¨˜éŒ„æ›´æ–°æ™‚é–“ |

**ç´¢å¼•**:
- `idx_part_number` - é›¶ä»¶è™Ÿç´¢å¼•
- `idx_part_supplier` - è¤‡åˆç´¢å¼•(é›¶ä»¶è™Ÿ+å» å•†ID)

**å¤–éµé—œè¯**:
- `item_id` â†’ `Item.item_id` (ON DELETE CASCADE)
- `supplier_id` â†’ `Supplier.supplier_id` (ON DELETE SET NULL)

**ç´„æŸ**:
- `unique_part` - (part_number, item_id, supplier_id) çµ„åˆå”¯ä¸€

**è§¸ç™¼å™¨**:
- `update_part_number_updated_at` - è‡ªå‹•æ›´æ–°æ™‚é–“æˆ³

**V2.0 è®Šæ›´èªªæ˜**:
- ğŸ”„ è¡¨åå¾ PartNumber æ”¹ç‚º Part_Number_xref
- âœ… çµ±ä¸€ xref å‘½åè¦ç¯„
- ğŸ“ çµæ§‹ä¿æŒä¸è®Š

---

### 5. Equipment_Item_xref (è£å‚™å“é …é—œè¯æª”)

**ç”¨é€”**: è£å‚™-å“é …å¤šå°å¤šé—œè¯ + å¯é åº¦è³‡æ–™
**ä¾†æº**: 18M_å–®æ©Ÿé›¶é™„ä»¶æª” (B010105)
**V2.0 è®Šæ›´**: åˆä½µåŸ BOM è¡¨çš„å¯é åº¦æ¬„ä½

| è‹±æ–‡æ¬„ä½å | ä¸­æ–‡æ¬„ä½åï¼ˆExcelï¼‰ | è³‡æ–™é¡å‹ | æ¨™è¨˜ | èªªæ˜ |
|-----------|------------------|---------|------|------|
| **ä¸»éµèˆ‡é—œè¯** |||||
| equipment_id | å–®æ©Ÿè­˜åˆ¥ç¢¼ | VARCHAR(50) | ğŸ”‘ğŸ”—â­ | å¤–éµé€£çµè‡³Equipment |
| item_id | å“é …è­˜åˆ¥è™Ÿ | VARCHAR(20) | ğŸ”‘ğŸ”—â­ | å¤–éµé€£çµè‡³Item |
| **è£ç½®è³‡è¨Š** |||||
| installation_qty | å–®æ©Ÿé›¶é™„ä»¶è£ç½®æ•¸ | INT | ğŸ“ | è©²å“é …åœ¨è£å‚™ä¸Šçš„æ•¸é‡ |
| installation_unit | å–®æ©Ÿé›¶é™„ä»¶è£ç½®å–®ä½(æ’¥ç™¼å–®ä½) | VARCHAR(10) | ğŸ“ | EA/SET/LOTç­‰ |
| **å¯é åº¦è³‡è¨Šï¼ˆåŸ BOM æ¬„ä½ï¼‰** |||||
| delivery_time | äº¤è²¨æ™‚é–“ï¼ˆå¤©ï¼‰ | INT | ğŸ“ | æ¡è³¼äº¤æœŸ |
| failure_rate_per_million | æ¯ç™¾è¬å°æ™‚é ä¼°æ•…éšœæ¬¡æ•¸ | DECIMAL(10,4) | ğŸ“ | æ•…éšœç‡ |
| mtbf_hours | å¹³å‡æ•…éšœé–“éš”ï¼ˆå°æ™‚ï¼‰ | INT | ğŸ“ | MTBF (Mean Time Between Failures) |
| mttr_hours | å¹³å‡ä¿®è­·æ™‚é–“ï¼ˆå°æ™‚ï¼‰ | DECIMAL(10,2) | ğŸ“ | MTTR (Mean Time To Repair) |
| is_repairable | æ˜¯å¦ç‚ºå¯ä¿®ä»¶ | CHAR(1) | ğŸ“ | Y/N |
| **æ™‚é–“æˆ³** |||||
| created_at | å»ºç«‹æ™‚é–“ | TIMESTAMP | ğŸ”„ | è¨˜éŒ„å»ºç«‹æ™‚é–“ |
| updated_at | æ›´æ–°æ™‚é–“ | TIMESTAMP | ğŸ”„ | è¨˜éŒ„æ›´æ–°æ™‚é–“ |

**è¤‡åˆä¸»éµ**: (equipment_id, item_id)

**ç´¢å¼•**:
- `idx_equipment_item` - è¤‡åˆç´¢å¼•(è£å‚™ID+å“é …ID)

**å¤–éµé—œè¯**:
- `equipment_id` â†’ `Equipment.equipment_id` (ON DELETE CASCADE)
- `item_id` â†’ `Item.item_id` (ON DELETE CASCADE)

**ç´„æŸ**:
- `chk_is_repairable` - å¯ä¿®æ€§å¿…é ˆç‚º 'Y', 'N' æˆ– NULL

**è§¸ç™¼å™¨**:
- `update_equipment_item_updated_at` - è‡ªå‹•æ›´æ–°æ™‚é–“æˆ³

**V2.0 è®Šæ›´èªªæ˜**:
- âœ… åˆä½µåŸ BOM è¡¨çš„ 5 å€‹å¯é åº¦æ¬„ä½
- âœ… ä¸å†ä½¿ç”¨ Item-Item è‡ªé—œè¯
- âœ… æ”¹ç‚º Equipment-Item ç›´æ¥é—œè¯
- âœ… ç°¡åŒ– BOM çµæ§‹ï¼Œèˆ‡è£å‚™ç›´æ¥ç¶å®š

**æ¬„ä½å°æ‡‰ (BOM â†’ Equipment_Item_xref)**:
- BOM.quantity â†’ Equipment_Item_xref.installation_qty
- BOM.unit â†’ Equipment_Item_xref.installation_unit
- BOM.delivery_time â†’ Equipment_Item_xref.delivery_time
- BOM.failure_rate_per_million â†’ Equipment_Item_xref.failure_rate_per_million
- BOM.mtbf_hours â†’ Equipment_Item_xref.mtbf_hours
- BOM.mttr_hours â†’ Equipment_Item_xref.mttr_hours
- BOM.is_repairable â†’ Equipment_Item_xref.is_repairable

---

### 6. Equipment_Document_xref (è£å‚™æ–‡ä»¶é—œè¯æª”)

**ç”¨é€”**: è£å‚™-æŠ€è¡“æ–‡ä»¶å¤šå°å¤šé—œè¯
**V2.0 æ–°å¢**: æ”¯æ´ä¸€æœ¬æ‰‹å†Šå°æ‡‰å¤šå€‹è£å‚™çš„æ¥­å‹™éœ€æ±‚

| è‹±æ–‡æ¬„ä½å | ä¸­æ–‡åç¨± | è³‡æ–™é¡å‹ | æ¨™è¨˜ | èªªæ˜ |
|-----------|---------|---------|------|------|
| **ä¸»éµèˆ‡é—œè¯** |||||
| equipment_id | å–®æ©Ÿè­˜åˆ¥ç¢¼ | VARCHAR(50) | ğŸ”‘ğŸ”—â­ | å¤–éµé€£çµè‡³Equipment |
| document_id | æ–‡ä»¶ID | INT | ğŸ”‘ğŸ”—â­ | å¤–éµé€£çµè‡³TechnicalDocument |
| **æ™‚é–“æˆ³** |||||
| created_at | å»ºç«‹æ™‚é–“ | TIMESTAMP | ğŸ”„ | è¨˜éŒ„å»ºç«‹æ™‚é–“ |
| updated_at | æ›´æ–°æ™‚é–“ | TIMESTAMP | ğŸ”„ | è¨˜éŒ„æ›´æ–°æ™‚é–“ |

**è¤‡åˆä¸»éµ**: (equipment_id, document_id)

**ç´¢å¼•**:
- `idx_equipment_document` - è¤‡åˆç´¢å¼•(è£å‚™ID+æ–‡ä»¶ID)

**å¤–éµé—œè¯**:
- `equipment_id` â†’ `Equipment.equipment_id` (ON DELETE CASCADE)
- `document_id` â†’ `TechnicalDocument.document_id` (ON DELETE CASCADE)

**è§¸ç™¼å™¨**:
- `update_equipment_document_updated_at` - è‡ªå‹•æ›´æ–°æ™‚é–“æˆ³

**è¨­è¨ˆèªªæ˜**:
- âœ… æ”¯æ´å¤šå°å¤šé—œä¿‚ï¼šä¸€å€‹è£å‚™å¯æœ‰å¤šæœ¬æ‰‹å†Šï¼Œä¸€æœ¬æ‰‹å†Šå¯ä¾›å¤šå€‹è£å‚™ä½¿ç”¨
- âœ… é©ç”¨æƒ…å¢ƒï¼šåŒå‹è™Ÿè£å‚™å…±ç”¨ç¶­ä¿®æ‰‹å†Šã€æ“ä½œæ‰‹å†Šç­‰

---

## ç¬¬ä¸‰éšæ®µï¼šè¼”åŠ©è³‡æ–™

### 7. TechnicalDocument (æŠ€è¡“æ–‡ä»¶æª”)

**ç”¨é€”**: ç®¡ç†è£å‚™ç›¸é—œæŠ€è¡“æ–‡ä»¶èˆ‡åœ–é¢è³‡æ–™ï¼ˆç¨ç«‹ä¸»æª”ï¼‰
**V2.0 è®Šæ›´**: æ”¹ç‚ºç¨ç«‹è¡¨ï¼Œé€é Equipment_Document_xref èˆ‡ Equipment å¤šå°å¤šé—œè¯

| è‹±æ–‡æ¬„ä½å | ä¸­æ–‡åç¨± | è³‡æ–™é¡å‹ | æ¨™è¨˜ | èªªæ˜ |
|-----------|---------|---------|------|------|
| document_id | æ–‡ä»¶ID | SERIAL | ğŸ”‘ğŸ”„ | è‡ªå‹•ç·¨è™Ÿ |
| document_name | åœ–å/æ›¸å | VARCHAR(200) | â­ | æ–‡ä»¶åç¨± |
| document_version | æŠ€è¡“æ–‡ä»¶ç‰ˆåˆ¥/ç‰ˆæ¬¡ | VARCHAR(20) | ğŸ“ | ç‰ˆæœ¬è™Ÿ |
| shipyard_drawing_no | èˆ¹å» åœ–è™Ÿ | VARCHAR(50) | ğŸ“ | èˆ¹å» åœ–é¢ç·¨è™Ÿ |
| design_drawing_no | è¨­è¨ˆåœ–è™Ÿ | VARCHAR(50) | ğŸ“ | è¨­è¨ˆåœ–é¢ç·¨è™Ÿ |
| document_type | è³‡æ–™é¡å‹ | VARCHAR(20) | ğŸ“ | æ–‡ä»¶é¡å‹ |
| document_category | è³‡æ–™é¡åˆ¥ | VARCHAR(20) | ğŸ“ | æ–‡ä»¶åˆ†é¡ |
| language | èªè¨€ | VARCHAR(10) | ğŸ“ | ä¸­æ–‡/è‹±æ–‡ |
| security_level | æ©Ÿå¯†ç­‰ç´š | VARCHAR(10) | ğŸ“ | æ©Ÿå¯†åˆ†ç´š |
| eswbs_code | ESWBSï¼ˆäº”ç¢¼ï¼‰ | VARCHAR(20) | ğŸ“ | è£å‚™åˆ†é¡ç¢¼ |
| accounting_code | æœƒè¨ˆç·¨è™Ÿ | VARCHAR(20) | ğŸ“ | æœƒè¨ˆç§‘ç›® |
| created_at | å»ºç«‹æ™‚é–“ | TIMESTAMP | ğŸ”„ | è¨˜éŒ„å»ºç«‹æ™‚é–“ |
| updated_at | æ›´æ–°æ™‚é–“ | TIMESTAMP | ğŸ”„ | è¨˜éŒ„æ›´æ–°æ™‚é–“ |

**ç´¢å¼•**:
- `idx_tech_doc_eswbs` - ESWBSç¢¼ç´¢å¼•

**è§¸ç™¼å™¨**:
- `update_technical_document_updated_at` - è‡ªå‹•æ›´æ–°æ™‚é–“æˆ³

**V2.0 è®Šæ›´èªªæ˜**:
- âœ… ç§»é™¤ equipment_id å¤–éµï¼Œæ”¹ç‚ºé€é Equipment_Document_xref é—œè¯
- âœ… æ”¯æ´å¤šå°å¤šé—œä¿‚ï¼šä¸€æœ¬æ‰‹å†Šå¯ä¾›å¤šå€‹è£å‚™å…±ç”¨
- âœ… æ¥­å‹™åƒ¹å€¼ï¼šåŒå‹è™Ÿè£å‚™å¯å…±ç”¨ç¶­ä¿®ã€æ“ä½œæ‰‹å†Šï¼Œæ¸›å°‘é‡è¤‡è³‡æ–™

---

### 8. EquipmentSpecification (è£å‚™ç‰¹æ€§èªªæ˜æª”)

**ç”¨é€”**: è¨˜éŒ„è£å‚™çš„è©³ç´°ç‰¹æ€§èªªæ˜ï¼ˆä¸€å°å¤šé—œä¿‚ï¼‰
**ä¾†æº**: 16M_å–®æ©Ÿç‰¹æ€§æª” (B010104)

| è‹±æ–‡æ¬„ä½å | ä¸­æ–‡æ¬„ä½åï¼ˆExcelï¼‰ | è³‡æ–™é¡å‹ | æ¨™è¨˜ | èªªæ˜ |
|-----------|------------------|---------|------|------|
| equipment_id | å–®æ©Ÿè­˜åˆ¥ç¢¼ | VARCHAR(50) | ğŸ”‘ğŸ”—â­ | å¤–éµé€£çµè‡³Equipment |
| spec_seq_no | å–®æ©Ÿç‰¹æ€§èªªæ˜åºè™Ÿ | INT | ğŸ”‘â­ | åºè™Ÿï¼ˆ1,2,3...ï¼‰ |
| spec_description | å–®æ©Ÿç‰¹æ€§èªªæ˜ | TEXT | â­ | ç‰¹æ€§æè¿°å…§å®¹ |
| created_at | å»ºç«‹æ™‚é–“ | TIMESTAMP | ğŸ”„ | è¨˜éŒ„å»ºç«‹æ™‚é–“ |
| updated_at | æ›´æ–°æ™‚é–“ | TIMESTAMP | ğŸ”„ | è¨˜éŒ„æ›´æ–°æ™‚é–“ |

**è¤‡åˆä¸»éµ**: (equipment_id, spec_seq_no)

**å¤–éµé—œè¯**:
- `equipment_id` â†’ `Equipment.equipment_id` (ON DELETE CASCADE)

**è§¸ç™¼å™¨**:
- `update_equipment_spec_updated_at` - è‡ªå‹•æ›´æ–°æ™‚é–“æˆ³

---

### 9. ItemSpecification (å“é …è¦æ ¼æª”)

**ç”¨é€”**: è¨˜éŒ„å“é …çš„è©³ç´°è¦æ ¼è³‡æ–™ï¼ˆä¸€å°å¤šé—œä¿‚ï¼Œæœ€å¤š5çµ„ï¼‰

| è‹±æ–‡æ¬„ä½å | ä¸­æ–‡åç¨± | è³‡æ–™é¡å‹ | æ¨™è¨˜ | èªªæ˜ |
|-----------|---------|---------|------|------|
| spec_id | è¦æ ¼ID | SERIAL | ğŸ”‘ğŸ”„ | è‡ªå‹•ç·¨è™Ÿ |
| item_id | å“é …è­˜åˆ¥ç¢¼ | VARCHAR(20) | ğŸ”—â­ | å¤–éµé€£çµè‡³Item |
| spec_no | è¦æ ¼ç·¨è™Ÿ | INT | â­ | 1-5 |
| spec_abbr | è¦æ ¼è³‡æ–™ç¸®å¯« | VARCHAR(20) | ğŸ“ | è¦æ ¼ç°¡ç¨± |
| spec_en | è¦æ ¼è³‡æ–™è‹±æ–‡ | VARCHAR(200) | ğŸ“ | è¦æ ¼é …ç›®è‹±æ–‡ |
| spec_zh | è¦æ ¼è³‡æ–™ç¿»è­¯ | VARCHAR(200) | ğŸ“ | è¦æ ¼é …ç›®ä¸­æ–‡ |
| answer_en | è‹±ç­” | VARCHAR(200) | ğŸ“ | è¦æ ¼å€¼è‹±æ–‡ |
| answer_zh | ä¸­ç­” | VARCHAR(200) | ğŸ“ | è¦æ ¼å€¼ä¸­æ–‡ |
| created_at | å»ºç«‹æ™‚é–“ | TIMESTAMP | ğŸ”„ | è¨˜éŒ„å»ºç«‹æ™‚é–“ |
| updated_at | æ›´æ–°æ™‚é–“ | TIMESTAMP | ğŸ”„ | è¨˜éŒ„æ›´æ–°æ™‚é–“ |

**ç´¢å¼•**:
- `idx_item_spec` - è¤‡åˆç´¢å¼•(å“é …ID+è¦æ ¼ç·¨è™Ÿ)

**å¤–éµé—œè¯**:
- `item_id` â†’ `Item.item_id` (ON DELETE CASCADE)

**è§¸ç™¼å™¨**:
- `update_item_spec_updated_at` - è‡ªå‹•æ›´æ–°æ™‚é–“æˆ³

---

### 10. ApplicationForm (ç”³ç·¨å–®æª”)

**ç”¨é€”**: ç®¡ç†ç”³ç·¨å–®ä¸»æª”è³‡æ–™

| è‹±æ–‡æ¬„ä½å | ä¸­æ–‡åç¨± | è³‡æ–™é¡å‹ | æ¨™è¨˜ | èªªæ˜ |
|-----------|---------|---------|------|------|
| form_id | è¡¨å–®ID | SERIAL | ğŸ”‘ğŸ”„ | è‡ªå‹•ç·¨è™Ÿ |
| form_no | è¡¨å–®ç·¨è™Ÿ | VARCHAR(50) | UNIQUE | ç”³ç·¨å–®è™Ÿ |
| submit_status | ç”³ç·¨å–®æé€ç‹€æ…‹ | VARCHAR(20) | ğŸ“ | å¾…é€/å·²é€/æ ¸å‡†ç­‰ |
| yetl | YETL | VARCHAR(20) | ğŸ“ | YETLä»£è™Ÿ |
| applicant_accounting_code | ç”³è«‹å–®ä½æœƒè¨ˆç·¨è™Ÿ | VARCHAR(20) | ğŸ“ | ç”³è«‹å–®ä½ |
| created_date | å»ºç«‹æ—¥æœŸ | DATE | ğŸ”„ | è¡¨å–®å»ºç«‹æ—¥ |
| updated_date | æ›´æ–°æ—¥æœŸ | DATE | ğŸ”„ | è¡¨å–®æ›´æ–°æ—¥ |

**ç´¢å¼•**:
- `idx_app_form_no` - è¡¨å–®ç·¨è™Ÿç´¢å¼•

---

### 11. ApplicationFormDetail (ç”³ç·¨å–®æ˜ç´°æª”)

**ç”¨é€”**: ç”³ç·¨å–®çš„æ˜ç´°è³‡æ–™ï¼ˆå–®é ­-æ˜ç´°çµæ§‹ï¼‰

| è‹±æ–‡æ¬„ä½å | ä¸­æ–‡åç¨± | è³‡æ–™é¡å‹ | æ¨™è¨˜ | èªªæ˜ |
|-----------|---------|---------|------|------|
| detail_id | æ˜ç´°ID | SERIAL | ğŸ”‘ğŸ”„ | è‡ªå‹•ç·¨è™Ÿ |
| form_id | è¡¨å–®ID | INT | ğŸ”—â­ | å¤–éµé€£çµè‡³ApplicationForm |
| item_seq | é …æ¬¡ | INT | â­ | æ˜ç´°åºè™Ÿ |
| item_id | å“é …è­˜åˆ¥ç¢¼ | VARCHAR(20) | ğŸ”— | å¤–éµé€£çµè‡³Item |
| document_source | æ–‡ä»¶ä¾†æº | VARCHAR(100) | ğŸ“ | è³‡æ–™ä¾†æºæ–‡ä»¶ |
| image_path | åœ–ç‰‡è·¯å¾‘ | VARCHAR(500) | ğŸ“ | é™„ä»¶åœ–ç‰‡ä½ç½® |
| created_at | å»ºç«‹æ™‚é–“ | TIMESTAMP | ğŸ”„ | è¨˜éŒ„å»ºç«‹æ™‚é–“ |
| updated_at | æ›´æ–°æ™‚é–“ | TIMESTAMP | ğŸ”„ | è¨˜éŒ„æ›´æ–°æ™‚é–“ |

**ç´¢å¼•**:
- `idx_app_detail_form` - è¡¨å–®IDç´¢å¼•
- `idx_app_detail_item` - å“é …IDç´¢å¼•

**å¤–éµé—œè¯**:
- `form_id` â†’ `ApplicationForm.form_id` (ON DELETE CASCADE)
- `item_id` â†’ `Item.item_id` (ON DELETE SET NULL)

**è§¸ç™¼å™¨**:
- `update_app_form_detail_updated_at` - è‡ªå‹•æ›´æ–°æ™‚é–“æˆ³

---

## ğŸ“Š è³‡æ–™è¡¨é—œè¯åœ– (V2.0)

```
                        ApplicationForm (ç”³ç·¨å–®æª”)
                               â”‚
                               â”‚ 1:N
                               â†“
                    ApplicationFormDetail (ç”³ç·¨å–®æ˜ç´°)
                               â”‚
                               â”‚ N:1
                               â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                                 â”‚
    â”‚          EQUIPMENT (è£å‚™ä¸»æª”) â­                â”‚
    â”‚              æ ¸å¿ƒè¡¨                             â”‚
    â”‚                                                 â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚              â”‚              â”‚
              â”‚ 1:N          â”‚ N:M          â”‚ 1:N
              â†“              â†“              â†“
       EquipmentSpec  Equipment_Item_xref  TechnicalDoc
       (è£å‚™ç‰¹æ€§)      (å«å¯é åº¦è³‡æ–™)      (æŠ€è¡“æ–‡ä»¶)
                            â”‚
                            â”‚ N:M
                            â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                                 â”‚
    â”‚              ITEM (å“é …ä¸»æª”) â­                 â”‚
    â”‚         (å«ItemAttributeå±¬æ€§)                   â”‚
    â”‚                                                 â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚           â”‚           â”‚
         â”‚ 1:N       â”‚ 1:N       â”‚ N:M
         â†“           â†“           â†“
    ItemSpec   Part_Number_xref  ApplicationFormDetail
    (è¦æ ¼)           â”‚           (ç”³ç·¨æ˜ç´°)
                     â”‚ N:1
                     â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                                 â”‚
    â”‚            SUPPLIER (å» å•†ä¸»æª”) â­               â”‚
    â”‚                                                 â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”‘ ä¸»éµé¡å‹èªªæ˜

### è‡ªå‹•ç·¨è™Ÿä¸»éµ (SERIAL)
ä½¿ç”¨è³‡æ–™åº«è‡ªå‹•éå¢æ•¸å­—ä½œç‚ºä¸»éµï¼š

| è³‡æ–™è¡¨ | ä¸»éµæ¬„ä½ | èªªæ˜ |
|--------|---------|------|
| Supplier | supplier_id | å» å•†ID |
| Part_Number_xref | part_number_id | é›¶ä»¶è™Ÿç¢¼ID |
| TechnicalDocument | document_id | æ–‡ä»¶ID |
| ItemSpecification | spec_id | è¦æ ¼ID |
| ApplicationForm | form_id | è¡¨å–®ID |
| ApplicationFormDetail | detail_id | æ˜ç´°ID |

### æ¥­å‹™é‚è¼¯ä¸»éµ (è‡ªç„¶éµ)
ä½¿ç”¨æ¥­å‹™ä¸Šæœ‰æ„ç¾©çš„è­˜åˆ¥ç¢¼ä½œç‚ºä¸»éµï¼š

| è³‡æ–™è¡¨ | ä¸»éµæ¬„ä½ | èªªæ˜ |
|--------|---------|------|
| Equipment | equipment_id | å–®æ©Ÿè­˜åˆ¥ç¢¼(CID) |
| Item | item_id | å“é …è­˜åˆ¥ç¢¼(NIIN) |

### è¤‡åˆä¸»éµ
ä½¿ç”¨å¤šå€‹æ¬„ä½çµ„åˆä½œç‚ºä¸»éµï¼š

| è³‡æ–™è¡¨ | ä¸»éµæ¬„ä½ | èªªæ˜ |
|--------|---------|------|
| Equipment_Item_xref | (equipment_id, item_id) | è£å‚™-å“é …çµ„åˆ |
| EquipmentSpecification | (equipment_id, spec_seq_no) | è£å‚™-åºè™Ÿçµ„åˆ |

---

## ğŸ”— å¤–éµé—œè¯æ‘˜è¦

### Equipment (è£å‚™ä¸»æª”) çš„é—œè¯ â­

Equipment æ˜¯ V2.0 çš„æ ¸å¿ƒè¡¨ï¼š

| é—œè¯è¡¨ | é—œè¯é¡å‹ | èªªæ˜ |
|--------|---------|------|
| EquipmentSpecification | 1:N | è£å‚™ç‰¹æ€§èªªæ˜ |
| Equipment_Item_xref | N:M | è£å‚™-å“é …é—œè¯ï¼ˆå«å¯é åº¦ï¼‰ |
| TechnicalDocument | 1:N | æŠ€è¡“æ–‡ä»¶ |

### Item (å“é …ä¸»æª”) çš„é—œè¯

| é—œè¯è¡¨ | é—œè¯é¡å‹ | èªªæ˜ |
|--------|---------|------|
| ItemSpecification | 1:N | å“é …è¦æ ¼èªªæ˜ |
| Part_Number_xref | N:M | å“é …-é›¶ä»¶è™Ÿ-å» å•† |
| Equipment_Item_xref | N:M | å“é …-è£å‚™é—œè¯ |
| ApplicationFormDetail | N:1 | ç”³ç·¨å–®æ˜ç´° |

### Supplier (å» å•†ä¸»æª”) çš„é—œè¯

| é—œè¯è¡¨ | é—œè¯é¡å‹ | èªªæ˜ |
|--------|---------|------|
| Part_Number_xref | 1:N | å» å•†æä¾›çš„é›¶ä»¶è™Ÿ |

---

## ğŸ“ å¸¸ç”¨ä»£è™Ÿèªªæ˜

### è£å‚™ç›¸é—œ
- **CID**: Configuration Item ID (å–®æ©Ÿè­˜åˆ¥ç¢¼)
- **ESWBS**: Enhanced Ship Work Breakdown Structure (è‰¦è‰‡å·¥ä½œåˆ†è§£çµæ§‹ç¢¼)
- **MTBF**: Mean Time Between Failures (å¹³å‡æ•…éšœé–“éš”)
- **MTTR**: Mean Time To Repair (å¹³å‡ä¿®è­·æ™‚é–“)

### å“é …ç›¸é—œ
- **NSN**: NATO Stock Number (åŒ—ç´„æ–™è™Ÿ)
- **NIIN**: National Item Identification Number (åœ‹å®¶å“é …è­˜åˆ¥è™Ÿ)
- **FIIG**: Federal Item Identification Guide (è¯é‚¦å“é …è­˜åˆ¥æŒ‡å—)
- **P/N**: Part Number (é›¶ä»¶è™Ÿç¢¼)
- **CAGE CODE**: Commercial And Government Entity Code (å•†æ¥­åŠæ”¿åºœå¯¦é«”ä»£ç¢¼)

### å…¶ä»–
- **INC**: Item Name Code (å“åä»£è™Ÿ)
- **YETL**: (å°ˆæ¡ˆä»£è™Ÿ)
- **PLSIN**: (ç‰©æ–™æ¸…å–®é …æ¬¡è™Ÿ)

---

## ğŸ“Œ è³‡æ–™å®Œæ•´æ€§ç´„æŸ

### CHECK ç´„æŸ
- `Item.unit_price_usd >= 0` - åƒ¹æ ¼æª¢æŸ¥
- `Item.weight_kg >= 0` - é‡é‡æª¢æŸ¥
- `Equipment_Item_xref.is_repairable IN ('Y','N') OR NULL` - å¯ä¿®æ€§æª¢æŸ¥

### UNIQUE ç´„æŸ
- `Supplier.supplier_code` - å» å•†ä»£è™Ÿå”¯ä¸€
- `Supplier.cage_code` - CAGE CODEå”¯ä¸€
- `Equipment.equipment_serial` - è£å‚™åºè™Ÿå”¯ä¸€
- `Item.nsn` - NSNå”¯ä¸€
- `ApplicationForm.form_no` - è¡¨å–®ç·¨è™Ÿå”¯ä¸€
- `Part_Number_xref.(part_number, item_id, supplier_id)` - çµ„åˆå”¯ä¸€

### å¤–éµåˆªé™¤è¦å‰‡

**ON DELETE CASCADE** (ä¸²è¯åˆªé™¤):
- åˆªé™¤ Item æ™‚ï¼Œé€£å¸¶åˆªé™¤ ItemSpecification, Part_Number_xref, Equipment_Item_xref
- åˆªé™¤ Equipment æ™‚ï¼Œé€£å¸¶åˆªé™¤ Equipment_Item_xref, TechnicalDocument, EquipmentSpecification
- åˆªé™¤ ApplicationForm æ™‚ï¼Œé€£å¸¶åˆªé™¤ ApplicationFormDetail

**ON DELETE SET NULL** (è¨­ç‚ºç©ºå€¼):
- åˆªé™¤ Supplier æ™‚ï¼ŒPart_Number_xref.supplier_id è¨­ç‚º NULL
- åˆªé™¤ Item æ™‚ï¼ŒApplicationFormDetail.item_id è¨­ç‚º NULL

---

## âš™ï¸ è‡ªå‹•è§¸ç™¼å™¨

æ‰€æœ‰åŒ…å« `updated_at` æ¬„ä½çš„è³‡æ–™è¡¨éƒ½è¨­æœ‰è‡ªå‹•æ›´æ–°è§¸ç™¼å™¨ï¼š

```sql
CREATE TRIGGER update_[table_name]_updated_at
BEFORE UPDATE ON [TableName]
FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();
```

æ¯æ¬¡æ›´æ–°è¨˜éŒ„æ™‚ï¼Œ`updated_at` æ¬„ä½æœƒè‡ªå‹•æ›´æ–°ç‚ºç•¶å‰æ™‚é–“æˆ³ã€‚

**è§¸ç™¼å™¨æ¸…å–®** (V2.0 å…± 9 å€‹):
1. update_supplier_updated_at
2. update_equipment_updated_at
3. update_item_updated_at
4. update_part_number_updated_at
5. update_equipment_item_updated_at
6. update_technical_document_updated_at
7. update_equipment_spec_updated_at
8. update_item_spec_updated_at
9. update_app_form_detail_updated_at

---

## ğŸ“Š V2.0 é‡æ§‹ç¸½çµ

### é‡æ§‹å‰ï¼ˆV1.0ï¼‰ï¼š12 å€‹è¡¨
- Supplier, Equipment, Item, **ItemAttribute**, **PartNumber**
- Equipment_Item_xref, **BOM**
- TechnicalDocument, EquipmentSpecification, ItemSpecification
- ApplicationForm, ApplicationFormDetail

### é‡æ§‹å¾Œï¼ˆV2.0ï¼‰ï¼š10 å€‹è¡¨
- **ä¸‰å¤§ä¸»è¡¨**ï¼šSupplier, Equipment, Item (å«å±¬æ€§)
- **å…©å€‹é—œè¯è¡¨**ï¼šPart_Number_xref, Equipment_Item_xref (å«å¯é åº¦)
- **äº”å€‹è¼”åŠ©è¡¨**ï¼šTechnicalDocument, EquipmentSpecification, ItemSpecification, ApplicationForm, ApplicationFormDetail

### æ•ˆèƒ½æå‡
- âœ… æ¸›å°‘ JOIN æ“ä½œï¼ˆItem â† ItemAttribute åˆä½µï¼‰
- âœ… ç°¡åŒ– BOM æŸ¥è©¢ï¼ˆç›´æ¥æŸ¥ Equipment_Item_xrefï¼‰
- âœ… çµ±ä¸€å‘½åè¦ç¯„ï¼ˆxref å¾Œç¶´ï¼‰
- âœ… ä»¥ Equipment ç‚ºä¸­å¿ƒçš„æ¸…æ™°æ¶æ§‹

### è³‡æ–™é·ç§»æ³¨æ„äº‹é …
1. **ItemAttribute â†’ Item**: æ‰€æœ‰å±¬æ€§æ¬„ä½ç›´æ¥åˆä½µåˆ° Item è¡¨
2. **BOM â†’ Equipment_Item_xref**: å¯é åº¦æ¬„ä½é·ç§»ï¼Œéœ€èª¿æ•´æŸ¥è©¢é‚è¼¯
3. **PartNumber â†’ Part_Number_xref**: åƒ…è¡¨åè®Šæ›´ï¼Œè³‡æ–™ç›´æ¥é·ç§»

---

**æ–‡ä»¶ç‰ˆæœ¬**: 2.0
**æœ€å¾Œæ›´æ–°**: 2025-11-11
**ç¶­è­·å–®ä½**: SBIR å°ˆæ¡ˆåœ˜éšŠ
**é‡æ§‹å®Œæˆ**: âœ… ä¸‰å¤§ä¸»è¡¨æ¶æ§‹ï¼Œ10 è¡¨è¨­è¨ˆ
